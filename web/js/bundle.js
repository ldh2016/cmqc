!function(){"use strict";var e,t=Laya.View,a=Laya.Dialog,i=Laya.ClassUtils.regClass;!function(e){!function(e){class s extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/MoreGameDialog")}}e.MoreGameDialogUI=s,i("ui.commonUI.MoreGameDialogUI",s);class n extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/NativeAdDialog")}}e.NativeAdDialogUI=n,i("ui.commonUI.NativeAdDialogUI",n);class o extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/SettingDialog")}}e.SettingDialogUI=o,i("ui.commonUI.SettingDialogUI",o);class r extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/ShopDialog")}}e.ShopDialogUI=r,i("ui.commonUI.ShopDialogUI",r);class h extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/TryUseDialog")}}e.TryUseDialogUI=h,i("ui.commonUI.TryUseDialogUI",h);class l extends t{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/UIAdwardBox")}}e.UIAdwardBoxUI=l,i("ui.commonUI.UIAdwardBoxUI",l);class c extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/UISelectBox")}}e.UISelectBoxUI=c,i("ui.commonUI.UISelectBoxUI",c);class d extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/UISign")}}e.UISignUI=d,i("ui.commonUI.UISignUI",d);class g extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/UnlockNewDialog")}}e.UnlockNewDialogUI=g,i("ui.commonUI.UnlockNewDialogUI",g)}(e.commonUI||(e.commonUI={}))}(e||(e={})),function(e){!function(e){!function(e){class t extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("commonUI/zs/MoneyGet")}}e.MoneyGetUI=t,i("ui.commonUI.zs.MoneyGetUI",t)}(e.zs||(e.zs={}))}(e.commonUI||(e.commonUI={}))}(e||(e={})),function(e){!function(e){class s extends t{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("gameUI/GameMain")}}e.GameMainUI=s,i("ui.gameUI.GameMainUI",s);class n extends t{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("gameUI/GameStartView")}}e.GameStartViewUI=n,i("ui.gameUI.GameStartViewUI",n);class o extends t{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("gameUI/LoadSceneView")}}e.LoadSceneViewUI=o,i("ui.gameUI.LoadSceneViewUI",o);class r extends t{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("gameUI/MainLayer")}}e.MainLayerUI=r,i("ui.gameUI.MainLayerUI",r);class h extends t{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("gameUI/ResultView")}}e.ResultViewUI=h,i("ui.gameUI.ResultViewUI",h);class l extends a{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("gameUI/ShopView")}}e.ShopViewUI=l,i("ui.gameUI.ShopViewUI",l);class c extends t{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("gameUI/ShowOffView")}}e.ShowOffViewUI=c,i("ui.gameUI.ShowOffViewUI",c)}(e.gameUI||(e.gameUI={}))}(e||(e={}));const s=!0,n={name:"为小姐姐定制美丽指甲吧",title:"美甲小姐姐",desc:"美甲小姐姐 为小姐姐定制漂亮指甲吧！",templateId:"e0bogoj212c4l61e7b",imageUrl:"res/image/share.jpg",imageUrlId:""};var o,r,h;!function(e){e[e.None=0]="None",e[e.TT=1]="TT",e[e.WX=2]="WX",e[e.QQ=3]="QQ",e[e.VV=4]="VV",e[e.OP=5]="OP",e[e.BD=6]="BD"}(o||(o={})),function(e){e[e.NONE=0]="NONE",e[e.BANNER=1]="BANNER",e[e.VIDEO=2]="VIDEO",e[e.INTERSTITIAL=3]="INTERSTITIAL",e[e.GRID=4]="GRID",e[e.APP_BOX=5]="APP_BOX",e[e.BLOCK=6]="BLOCK",e[e.NATIVE_INSTIL=7]="NATIVE_INSTIL",e[e.NATIVE_BANNER=8]="NATIVE_BANNER",e[e.NATIVE_VIDEO=9]="NATIVE_VIDEO",e[e.NATIVE_INSTIL_VIVO=10]="NATIVE_INSTIL_VIVO",e[e.BANNER_WX_START=11]="BANNER_WX_START",e[e.BANNER_WX_RESULT=12]="BANNER_WX_RESULT",e[e.BANNER_WX_FULL1=13]="BANNER_WX_FULL1",e[e.BANNER_WX_FULL2=14]="BANNER_WX_FULL2"}(r||(r={})),function(e){e[e.SCREEN_START=0]="SCREEN_START",e[e.SCREEN_RESULT=1]="SCREEN_RESULT",e[e.SCREEN_FULL1=2]="SCREEN_FULL1",e[e.SCREEN_FULL2=3]="SCREEN_FULL2",e[e.SCREEN_NONE=4]="SCREEN_NONE"}(h||(h={}));const l={version:"2.0",appid:"tt28455ef8b77eb10b",isUseZS:!1,serviceUrl:"https://cp.game.7to.cn/api/login/toutiao",bannerIds:["2g2bef994leb15cm85","dfaj27ahc3edj83k7d"],VideoId:["2547pvpugo130d5886"],InterstitialId:["4ajc3dbggmeb11fa13"],usePromise:!0,destroyInstl:!0,adIntervals:60,error_count:5,style:{top:0,isCenter:!0,left:100,mp:1,width:.8,height:100}},c={version:"1.7",appid:"30351543",isUseZS:!1,serviceUrl:"https://cp.game.7to.cn/api/login/oppo",bannerIds:["220831","220834"],VideoId:["220829","220830"],InterstitialId:[""],nativeIds:["220817","220820"],usePromise:!1,destroyInstl:!0,adIntervals:60,error_count:5,style:{top:0,isCenter:!0,left:100,mp:1,width:1,height:100}},d={version:"1.0",appid:"100007206",isUseZS:!0,serviceUrl:"https://cp.game.7to.cn/api/login/vivo",bannerIds:["a10aa9cdd2964052ba2f824b323027fe","5e75aabda70c45b793a43664a0557145"],VideoId:["52e448a6f400422ca58a50111975678d"],InterstitialId:[""],nativeIds:["b4e312e5596e48b2897a865c56bd68a1","29e0bb1ea253448fac420aeabd4cce91","274d9c3931f3483ba107386e74a2d0cc"],usePromise:!1,destroyInstl:!0,adIntervals:60,error_count:5,style:{top:0,isCenter:!0,left:100,mp:1,width:1,height:100}};class g{constructor(e){this.caller=null,this._cbShow=null,this._cbClose=null,this.isShow=!1,this.isbannerSee=!1,this.bannerShowCount=0,this.data=null,this.adInstance=null,this.adType=r.NONE,this.isLoaded=!1,this.adData=null,this.adsId="",this.adsIndex=0,this.neespreLoad=!0,this.loadCount=0,this.style={width:600,height:100,realWidth:600,realHeight:100,top:0,left:0},this.adType=e}setAds(e,t,a,i){this._cbShow=e,this._cbClose=t,this.data=a,this.caller=i}setAdsData(e){this.adData=e}show(e,t){this._cbShow&&(this.caller?this._cbShow.call(this.caller,e,t):this._cbShow(e,t),e?this.isShow=!0:(this._cbClose=null,this.isLoaded=!1,this.isShow=!1),this._cbShow=null)}close(e,t){this.isShow=!1,this._cbClose&&(this.caller?this._cbClose.call(this.caller,e,t):this._cbClose(e,t),this.isLoaded=!1,this._cbClose=null)}setShowCall(e){this._cbShow=e}setCloseCall(e){this._cbClose=e}adsLoad(e){this.isLoaded=e}destroyAdsIns(){return!(!this.adInstance||void 0===this.adInstance.destroy)&&(this.adInstance.destroy(),this.adInstance=null,!0)}}class u{constructor(){this._adsList={},this.version="1.1",this.cfg=null,this.openId="",this.bannerhided=!0}init(e){}get ver(){return this.version}getLaunchOptionsSync(){return{}}getSystemInfoSync(){return{}}getRightMenuRectInfo(){return{width:0,height:0,top:0,right:0,bottom:0,left:0}}share(e,t){}playVibrative(e=!0){}loadSubpackage(e,t,a){for(let t=0;t<e.length;t++)a(t);t&&t()}navigateToMiniProgram(e,t=null,a=null,i=null){i&&i()}showMoreGamesModal(e,t=null,a=null,i=null,s=null,n=null){s&&s(2)}startRecord(){}shareRecordVideo(e){}stopRecording(){}reportMonitor(){}getNativeData(){return null}reportAdClick(e,t=r.NATIVE_INSTIL){}reportAdClickex(e,t=r.NATIVE_INSTIL){}reportAdShow(e,t=r.NATIVE_INSTIL){}installShortcut(e,t,a){}setKeepScreenOn(){}startLevel(e){}endLevel(e,t="complete"){}getAdsData(e,t=0){if(!this._adsList[e]){let t=new g(e);this._adsList[e]=[],this._adsList[e].push(t)}return this._adsList[e][t]}createAdsData(e){let t=new g(e);return!this._adsList[e]&&(this._adsList[e]=[]),this._adsList[e].push(t),t}createVideoAds(){}preloadVedioAds(){}showVideo(e){e&&e.close(!1)}createInstalAds(){}preloadInstalAds(){}showInstal(e){e&&e.close(!1)}showBanner(e){}hideBanner(e=!0,t){}showBannerzs(e,t){}hideBannerzs(e,t){}setBannerShowCount(e=2){}hide_banner(){}bannerMoveBy(e=80,t=0){}bannerMoveTo(e=0,t=0){}showGridAd(e){}hideGridAd(e=!0,t){}hide_gridAd(){}gridMoveBy(e=80,t=0){}gridMoveTo(e=0,t=0){}showAppBoxAd(e){}showBlockAd(e=!0){return!1}hideBlockAd(){}destroyBlockAd(){}showNativeAds(e){}showAds(e,t,a,i){let s=this.getAdsData(e);s.isShow||(s.setAds(t,a,i),s.isShow=!0,r.VIDEO==e?this.showVideo(s):r.INTERSTITIAL==e?this.showInstal(s):r.NATIVE_INSTIL==e&&this.showNativeAds(s))}getappId(){return"wxa8b94c906ddbe9dc"}get userId(){return this.openId}setUserId(e){this.openId=e}getopenId(e){e&&e()}get isUseZS(){return!1}}class S extends u{constructor(){super(),this._tt=null,this._isVideoAlreadyShared=!1,this._recordRes=null,this._tt=Laya.Browser.window.tt,this.version=l.version,this.cfg=l}init(e){this._tt.onShareAppMessage(function(){return{title:n.title,desc:n.desc,path:"",imageUrl:n.imageUrl,templateId:n.templateId,success:()=>{console.log("转发发布器已调起，并不意味着用户转发成功，微头条不提供这个时机的回调")},fail:()=>{console.log("转发发布器调起失败")}}})}getRightMenuRectInfo(){return void 0===this._tt.getMenuButtonLayout?u.prototype.getRightMenuRectInfo.call(this):this._tt.getMenuButtonLayout()}getLaunchOptionsSync(){return this._tt.getLaunchOptionsSync()}getSystemInfoSync(){return this._tt.getSystemInfoSync()}share(e,t){e=e||n.title,this._tt.onShareAppMessage(function(e){return{title:n.title,desc:n.desc,templateId:n.templateId,imageUrl:n.imageUrl,query:"k1=v1&k2=v2",success(){t&&t(!0)},fail(e){t&&t(!1)}}})}playVibrative(e=!0){e?this._tt.vibrateShort():this._tt.vibrateLong()}getappId(){return this.cfg.appid}get isUseZS(){return this.cfg.isUseZS}getopenId(e){this.initAds();let t=this;this.login((a,i)=>{a&&i.code?this._tt.request({method:"POST",url:t.cfg.serviceUrl,data:{code:i.code,appid:t.cfg.appid},success:a=>{t.openId=a.data.data.openid,e&&e(!0,t.openId)},fail:t=>{e&&e(!1)}}):e&&e(!1)})}login(e=null){this._tt.login({force:!1,success:t=>{e&&e(!0,t)},fail:t=>{e&&e(!1)},complete:e=>{}})}showMoreGamesModal(e,t=null,a=null,i=null,s=null,n=null){if(void 0===this._tt.showMoreGamesModal)return;if(e||(e=[]),this._tt.getSystemInfoSync().platform.indexOf("ios")>=0)return this._tt.showToast({title:"ios 暂不支持"}),void(s&&s(2));this._tt.onMoreGamesModalClose(function(e){n&&n()}),this._tt.onNavigateToMiniProgram(function(e){e&&(0==e.errCode?t&&t(e.errCode,e.errMsg,e.from):a&&a())}),(e.extraData||{}).appId=l.appid;let o=[];for(let t=0;t<e.length;t++)o.push({appId:e[t].app_id,query:e[t].path,extraData:{}});this._tt.showMoreGamesModal({appLaunchOptions:o,success(e){s&&s(0)},fail(e){s&&s(1)}})}initAds(){this.preloadInstalAds(),this.preloadVedioAds()}createVideoAds(){if(void 0===this._tt.createRewardedVideoAd)return;let e=this.getAdsData(r.VIDEO);if(e.adInstance)return;let t=e.adsIndex,a=l.VideoId[t%l.VideoId.length],i=this._tt.createRewardedVideoAd({adUnitId:a});i.onLoad(()=>{e.isLoaded=!0}),i.onError(t=>{e.isLoaded=!1}),i.onClose(function(t){t&&t.isEnded||void 0===t?e.close(!0):e.close(!1),e.neespreLoad&&this.preloadVedioAds()}.bind(this)),e.adInstance=i}preloadVedioAds(){let e=this.getAdsData(r.VIDEO);if(e.adInstance||this.createVideoAds(),!e.isLoaded&&e.adInstance){let t=e.adInstance.load();t&&l.usePromise&&t.then(function(){e.isLoaded=!0}.bind(this)).catch(function(t){e.isLoaded=!1}.bind(this))}}showVideo(e){if(!s)return void u.prototype.showVideo.call(this,e);let t=e.adInstance;if(t){if(l.usePromise){return void t.show().then(()=>{e.show(!0)}).catch(()=>{e.show(!1),e.neespreLoad&&this.preloadVedioAds()})}if(e.isLoaded)return e.show(!0),void t.show();e.show(!1),e.neespreLoad&&this.preloadVedioAds()}else e.show(!1),e.neespreLoad?this.preloadVedioAds():this.createVideoAds()}createInstalAds(){if(void 0===this._tt.createInterstitialAd)return;let e=this.getAdsData(r.INTERSTITIAL);if(!e)return;let t=e.adsIndex,a=l.InterstitialId[t%l.InterstitialId.length],i=this._tt.createInterstitialAd({adUnitId:a});i.onError(t=>{e.isLoaded=!1}),i.onLoad(()=>{e.isLoaded=!0}),i.onClose(t=>{e.close(!0),l.destroyInstl&&(e.adInstance.destroy(),e.adInstance=null),e.neespreLoad&&this.preloadInstalAds()}),e.adInstance=i}preloadInstalAds(){let e=this.getAdsData(r.INTERSTITIAL);if(e.adInstance){if(!e.isLoaded&&e.adInstance){let t=e.adInstance.load();t&&l.usePromise&&t.then(()=>{e.isLoaded=!0}).catch(t=>{e.isLoaded=!1})}}else this.createInstalAds()}showInstal(e){let t=e.adInstance;if(t){if(l.usePromise){return void t.show().then(()=>{e.show(!0)}).catch(()=>{e.show(!1),e.neespreLoad&&this.preloadInstalAds()})}e.isLoaded?(e.adInstance.show(),e.show(!0)):(e.show(!1),e.neespreLoad&&this.preloadInstalAds())}else e.show(!1),e.neespreLoad?this.preloadInstalAds():this.createInstalAds()}createBanner(e){if(void 0===this._tt.createBannerAd)return;let t=this.getSystemInfoSync(),a=t.screenWidth,i=t.screenHeight,s=this.getAdsData(r.BANNER);s.adInstance&&(s.adInstance.destroy(),s.adInstance=null),e=e||{};for(let t in l.style)e[t]=l.style[t];let n=e.width;n<=1&&(n*=a);let o=e.height,h=e.mp||1,c=s.adsIndex,d=l.bannerIds[c%l.bannerIds.length],g=1==h?i-o:2==h?0:e.top,u=e.isCenter?a/2-n/2:e.left,S=this._tt.createBannerAd({adUnitId:d,adIntervals:l.adIntervals,style:{left:u,top:g,width:n}});s.style.height=o,s.style.width=n,s.style.left=u,s.style.top=g,s.style.realWidth=n,s.style.realHeight=o,S.onResize(t=>{var n=t.height,o=t.width;S.style.top=1==h?i-n:2==h?0:e.top,S.style.left=e.isCenter?a/2-o/2:e.left,s.style.realWidth=o,s.style.realHeight=n,s.style.left=S.left,s.style.top=S.top});S.onLoad(()=>{s.isLoaded=!0}),S.onError(e=>{s.isLoaded=!1,this.reLoadBanner()}),s.adInstance=S,S&&S.hide()}reLoadBanner(){let e=this.getAdsData(r.BANNER);e.loadCount<l.error_count&&(e.adsIndex++,e.adInstance&&(e.adInstance.hide(),e.adInstance.destroy(),e.adInstance=null),this.createBanner()),e.loadCount++}showBanner(e){if(!s)return;this.bannerhided=!1;let t=this.getAdsData(r.BANNER);if(t.adInstance){if(this.bannerhided)return;t.adInstance.show()}else this.createBanner(e)}hideBanner(e=!0,t){this.bannerhided=!0;let a=this.getAdsData(r.BANNER);a.adInstance&&(a.adInstance.hide(),a.adInstance.destroy(),a.adInstance=null,a.loadCount=0)}hide_banner(){this.bannerhided=!0;let e=this.getAdsData(r.BANNER);e.adInstance&&e.adInstance.hide()}bannerMoveBy(e=80,t=0){let a=this.getAdsData(r.BANNER);a.adInstance&&(a.adInstance.style.top+=e,a.adInstance.style.left+=t)}bannerMoveTo(e=0,t=0){let a=this.getAdsData(r.BANNER);a.adInstance&&(a.adInstance.style.top=e,a.adInstance.style.left=t)}startRecord(){if(void 0===this._tt.getGameRecorderManager)return;this._isVideoAlreadyShared=!1,this._recordRes=null;const e=this._tt.getGameRecorderManager();e.start({duration:60}),e.onStart(e=>{});var t=(new Date).getTime();e.onStop(e=>{((new Date).getTime()-t)/1e3<3||(this._recordRes=e)})}shareRecordVideo(e){if(!this._recordRes)return void this._tt.showToast({title:"录屏时间过短 无法分享!!!"});let t=this;this._tt.shareAppMessage({channel:"video",title:n.title,desc:n.desc,imageUrl:n.imageUrl,query:"",extra:{videoPath:this._recordRes.videoPath,videoTopics:[n.desc]},success(){e&&e(!0),t._recordRes=null,t._isVideoAlreadyShared=!0},fail(t){e&&e(!1)}})}stopRecording(){if(void 0===this._tt.getGameRecorderManager)return;this._tt.getGameRecorderManager().stop()}}class m extends u{constructor(){super(),this._vivo=null,this._nativeData=null,this._vivo=Laya.Browser.window.qg,this.version=d.version,this.cfg=d,this._nativeShowIndex=0}init(e){this.initAds(),this._vivo.onShow&&this._vivo.onShow(e=>{}),this._vivo.onHide&&this._vivo.onHide(()=>{})}getLaunchOptionsSync(){return this._vivo.getLaunchOptionsSync()}getSystemInfoSync(){return this._vivo.getSystemInfoSync()}playVibrative(e=!0){e?this._vivo.vibrateShort():this._vivo.vibrateLong()}getRightMenuRectInfo(){return void 0===this._vivo.getMenuButtonBoundingClientRect?u.prototype.getRightMenuRectInfo.call(this):this._vivo.getMenuButtonBoundingClientRect()}getappId(){return this.cfg.appid}get isUseZS(){return this.cfg.isUseZS}getopenId(e){let t=this;this.login((a,i)=>{if(a){if(i.data.token){let a=new Laya.HttpRequest;a.http.timeout=1e4,a.once(Laya.Event.COMPLETE,this,a=>{t.openId=a.data.user_id,e&&e(!0,t.openId)}),a.once(Laya.Event.ERROR,this,t=>{e&&e(!1)});let s={appid:t.cfg.appid,code:i.data.token};a.send(t.cfg.serviceUrl,JSON.stringify(s),"post","json",["content-type","application/json"])}}else e&&e(!1)})}login(e=null){this._vivo.login().then(t=>{t.data.token&&e&&e(!0,t)},t=>{e&&e(!1,t)})}loadSubpackage(e,t,a){let i=e.length,s=i;for(let n=0;n<i;n++){this._vivo.loadSubpackage({name:e[n],success:function(e){a&&a(n),--s<=0&&t&&t()},fail:function(e){}}).onProgressUpdate(e=>{})}}navigateToMiniProgram(e,t=null,a=null,i=null){this._vivo.navigateToMiniGame({pkgName:e.link_pkgname,path:e.link_path,extraData:e.extraData,success:function(e){t&&t(e)},fail:function(e){a&&a(e)},complete:function(e){i&&i(e)}})}installShortcut(e,t,a){if(void 0===this._vivo.hasShortcutInstalled||void 0===this._vivo.installShortcut)return;let i=this;this._vivo.hasShortcutInstalled({success:function(s){0==s?i._vivo.installShortcut({success:function(){e&&e(!0)},fail:function(e){t&&t()},complete:function(){a&&a()}}):e&&e(!1)},fail:function(e){t&&t()},complete:function(){}})}initAds(){this.preloadVedioAds(),this.createNative()}createVideoAds(){if(void 0===this._vivo.createRewardedVideoAd)return;let e=this.getAdsData(r.VIDEO);if(!e)return;let t=e.adsIndex,a=d.VideoId[t%d.VideoId.length],i=this._vivo.createRewardedVideoAd({adUnitId:a});i.onLoad(()=>{e.isLoaded=!0}),i.onError(t=>{e.isLoaded=!1}),i.onClose(t=>{t&&t.isEnded||void 0===t?e.close(!0):e.close(!1),e.neespreLoad&&this.preloadVedioAds()}),e.adInstance=i}preloadVedioAds(){let e=this.getAdsData(r.VIDEO);if(e.adInstance||this.createVideoAds(),!e.isLoaded&&e.adInstance){let t=e.adInstance.load();t&&d.usePromise&&t.then(function(){e.isLoaded=!0}.bind(this)).catch(function(t){e.isLoaded=!1}.bind(this))}}showVideo(e){if(!s)return void u.prototype.showVideo.call(this,e);let t=e.adInstance;if(t){if(d.usePromise){return void t.show().then(()=>{e.show(!0)}).catch(()=>{e.show(!1),e.neespreLoad&&this.preloadVedioAds()})}if(e.isLoaded)return e.show(!0),void t.show();e.show(!1),e.neespreLoad&&this.preloadVedioAds()}else e.show(!1),e.neespreLoad?this.preloadVedioAds():this.createVideoAds()}createInstalAds(){if(void 0===this._vivo.createInterstitialAd)return;let e=this.getAdsData(r.INTERSTITIAL);if(!e)return;let t=e.adsIndex,a=this.cfg.InterstitialId[t%this.cfg.InterstitialId.length],i=this._vivo.createInterstitialAd({adUnitId:a});i.onError(t=>{e.isLoaded=!1}),i.onLoad(()=>{e.isLoaded=!0}),i.onClose(t=>{e.close(!0),this.cfg.destroyInstl&&(e.adInstance.destroy(),e.adInstance=null),e.neespreLoad&&this.preloadInstalAds()}),e.adInstance=i}preloadInstalAds(){let e=this.getAdsData(r.INTERSTITIAL);if(e.adInstance){if(!e.isLoaded&&e.adInstance){let t=e.adInstance.load();t&&this.cfg.usePromise&&t.then(()=>{e.isLoaded=!0}).catch(t=>{e.isLoaded=!1})}}else this.createInstalAds()}showInstal(e){let t=e.adInstance;if(t){if(this.cfg.usePromise){return void t.show().then(()=>{e.show(!0)}).catch(()=>{e.show(!1),e.neespreLoad&&this.preloadInstalAds()})}e.isLoaded?(e.adInstance.show(),e.show(!0)):(e.show(!1),e.neespreLoad&&this.preloadInstalAds())}else e.show(!1),e.neespreLoad?this.preloadInstalAds():this.createInstalAds()}createBanner(e){let t=this.getSystemInfoSync(),a=t.screenWidth,i=t.screenHeight,s=this.getAdsData(r.BANNER);s.adInstance&&(s.adInstance.destroy(),s.adInstance=null),e=e||{};for(let t in d.style)e[t]=d.style[t];let n=e.width;n<=1&&(n*=a);let o=e.height,h=e.mp||1,l=s.adsIndex,c=d.bannerIds[l%d.bannerIds.length],g=1==h?i-o:2==h?0:e.top,u=e.isCenter?a/2-n/2:e.left,S=this._vivo.createBannerAd({posId:c,style:{}});s.style.height=o,s.style.width=n,s.style.left=u,s.style.top=g,s.style.realHeight=o,s.style.realWidth=n,S.onSize(e=>{}),S.onLoad(()=>{s.isLoaded=!0,s.loadCount=0}),S.onError(e=>{s.isLoaded=!1}),s.adInstance=S,S.show().then(()=>{}).catch(e=>{})}reLoadBanner(){let e=this.getAdsData(r.BANNER);e.loadCount<d.error_count&&(e.adsIndex++,e.adInstance&&(e.adInstance.hide(),e.adInstance.destroy(),e.adInstance=null),this.createBanner(),this.showBanner()),e.loadCount++}showBanner(e){if(!s)return;let t=this.getAdsData(r.BANNER);if(t.adInstance||this.createBanner(e),d.usePromise){let e=t.adInstance.show();e&&e.then(()=>{t.loadCount=0}).catch(()=>{t.loadCount=0})}else t.adInstance.show();t.adsIndex++}hideBanner(e=!0,t){let a=this.getAdsData(r.BANNER);a.adInstance&&(a.adInstance.hide(),a.adInstance.destroy(),a.adInstance=null,a.loadCount=0,a.neespreLoad&&this.createBanner(t))}hide_banner(){let e=this.getAdsData(r.BANNER);e.adInstance&&e.adInstance.hide()}bannerMoveBy(e=80,t=0){let a=this.getAdsData(r.BANNER);a.adInstance&&(a.adInstance.style.top+=e,a.adInstance.style.left+=t)}bannerMoveTo(e=0,t=0){let a=this.getAdsData(r.BANNER);a.adInstance&&(a.adInstance.style.top=e,a.adInstance.style.left=t)}loadNativeData(e,t,a){if(!e)return;e.adInstance&&(e.adInstance.destroy&&e.adInstance.destroy(),e.adInstance=null);let i=this._vivo.createNativeAd({adUnitId:t});e.adInstance=i,i.onLoad(t=>{e.adData=t.adList,a(t.adList)}),i.onError(e=>{a(null)}),i.load()}getNativeAdId(e=0){return this.cfg.nativeIds[e]}getNativeAd(e,t=1){if(void 0===this._vivo.createNativeAd)return;let a=this.getNativeAdId(t);if(!a)return void e(null);let i=this._vivo.createNativeAd({posId:a});i.load(),i.onLoad(t=>{e(t.adList)}),i.onError(t=>{e(null)})}defaultNativeData(){return{adId:"0a41b6f9-bcda-4671-bee1-5daac81b67e7",clickBtnTxt:"立即下载",creativeType:3,desc:"看《烈火军校》小说",iconUrlList:["https://cdopic0.heytapimage.com/img/202004/28/b03983e69df362375e830b37fa124732.png"],icon:"https://cdopic0.heytapimage.com/img/202004/28/b03983e69df362375e830b37fa124732.png",interactionType:3,logoUrl:"https://adsfs.heytapimage.com/union/adlogo/o_1512387525231.png",title:"爱奇艺免费阅读",imgUrlList:[]}}createNative(e=0,t=r.NATIVE_INSTIL){0==this._nativeShowIndex||2==this._nativeShowIndex?t=r.NATIVE_INSTIL:1==this._nativeShowIndex&&(t=r.NATIVE_INSTIL_VIVO);let a=this.getAdsData(t),i=this.cfg.nativeIds.length;e>=i||this.loadNativeData(a,d.nativeIds[a.adsIndex%i],a=>{null==a&&this.createNative(e++,t)})}getNativeData(){let e;0==this._nativeShowIndex||1==this._nativeShowIndex?e=r.NATIVE_INSTIL:2==this._nativeShowIndex&&(e=r.NATIVE_INSTIL_VIVO);let t=this.getAdsData(e);if(t.adData)return t.adData[0];if(0==this._nativeShowIndex)return null;if(2==this._nativeShowIndex){if((t=this.getAdsData(r.NATIVE_INSTIL)).adData)return this._nativeShowIndex=1,t.adData[0]}else if(1==this._nativeShowIndex&&(t=this.getAdsData(r.NATIVE_INSTIL_VIVO)).adData)return this._nativeShowIndex=2,t.adData[0]}reportAdClick(e,t=r.NATIVE_INSTIL){let a;2==this._nativeShowIndex?a=r.NATIVE_INSTIL_VIVO:1==this._nativeShowIndex&&(a=r.NATIVE_INSTIL);let i=this.getAdsData(t);i.adInstance&&(i.adInstance.reportAdClick({adId:e.adId.toString()}),i.adData=null)}reportAdShow(e,t=r.NATIVE_INSTIL){0==this._nativeShowIndex||2==this._nativeShowIndex?(this._nativeShowIndex=1,t=r.NATIVE_INSTIL):1==this._nativeShowIndex&&(this._nativeShowIndex=2,t=r.NATIVE_INSTIL_VIVO);let a=this.getAdsData(t);a.adInstance&&a.adInstance.reportAdShow({adId:e.adId.toString()}),this.createNative()}showNativeAds(e){e.adInstance&&e.adData?e.show(!0,e.adData):(e.show(!1),this.createNative(0,e.adType))}setKeepScreenOn(){this._vivo.setKeepScreenOn({keepScreenOn:!0,success:function(){},fail:function(e,t){}})}}var I,v;!function(e){e[e.None=0]="None",e[e.QT=1]="QT",e[e.ZS=2]="ZS"}(I||(I={})),function(e){e[e.bottom=1]="bottom",e[e.full=2]="full",e[e.middle=3]="middle",e[e.rotation=4]="rotation",e[e.more=5]="more"}(v||(v={}));class p{constructor(){this.channelId="0",this.engine="laya",this.remoteConfigName="cmqc_zgxfl"}static getInstance(){return p.instance||(p.instance=new p),p.instance}}p.SDKVersion="version_335_3",p.APPID="0",p.ver="1.1",p.ossUrl="https://cmqc.oss-cn-shenzhen.aliyuncs.com";const y=p.getInstance();var w;!function(e){e[e.GP_Oppo=0]="GP_Oppo",e[e.GP_Vivo=1]="GP_Vivo",e[e.GP_Tiktok=2]="GP_Tiktok",e[e.GP_QQ=3]="GP_QQ",e[e.GP_Test=4]="GP_Test",e[e.GP_WX=5]="GP_WX",e[e.GP_KS=6]="GP_KS",e[e.GP_HW=7]="GP_HW",e[e.GP_XM=8]="GP_XM",e[e.GP_BL=9]="GP_BL"}(w||(w={}));class C{constructor(){this.screenWidth=0,this.screenHeight=0}}class A{constructor(){this.systemInfo=null,this.ctrData=null}static getInstance(){return A.instance||(A.instance=new A),A.instance}static saveData(e,t){Laya.LocalStorage.setItem(e,t)}static getData(e,t){var a=Laya.LocalStorage.getItem(e);return null!=a&&""!=a||(a=t),a}static getPlatform(){if(!y.channelId||y.channelId.length<3)return w.GP_Test;var e=y.channelId.substring(4,7);return"142"==e?w.GP_Oppo:"108"==e?w.GP_Vivo:"154"==e?w.GP_Tiktok:"155"==e?w.GP_QQ:"161"==e?w.GP_WX:"162"==e?w.GP_KS:"163"==e?w.GP_HW:"164"==e?w.GP_XM:"165"==e?w.GP_BL:w.GP_Test}static sdklog(e,...t){console.log(e,t)}initSystemInfo(e){var t=this;switch(this.systemInfo=new C,A.getPlatform()){case w.GP_Oppo:qg.getSystemInfo({success:function(e){console.log("ASCSDK",`获取设备信息成功， screenWidth = ${e.screenWidth},handling success， screenHeight = ${e.screenHeight}, ${Laya.stage.height}`),t.systemInfo.screenWidth=e.screenWidth,t.systemInfo.screenHeight=e.screenHeight},complete:function(){e&&e(!0)}});break;case w.GP_Vivo:qg.getSystemInfo({success:function(e){console.log("ASCSDK",`获取设备信息成功， screenWidth = ${e.screenWidth},handling success， screenHeight = ${e.screenHeight}, ${Laya.stage.height}`),t.systemInfo.screenWidth=e.screenWidth,t.systemInfo.screenHeight=e.screenHeight},fail:function(){},complete:function(){e&&e(!0)}});break;default:e&&e(!0)}}getSystemInfo(){return this.systemInfo}setCtrlData(e){this.ctrData=e}getCtrlData(){return this.ctrData}isversionNewThanEngineVersion(e){switch(A.getPlatform()){case w.GP_QQ:var t=e.split("."),a=100*Number(t[0])+10*Number(t[1])+Number(t[2]),i=qq.getSystemInfoSync().SDKVersion.split(".");return a<=100*Number(i[0])+10*Number(i[1])+Number(i[2]);case w.GP_Tiktok:t=e.split("."),a=100*Number(t[0])+10*Number(t[1])+Number(t[2]),i=tt.getSystemInfoSync().SDKVersion.split(".");return a<=100*Number(i[0])+10*Number(i[1])+Number(i[2]);case w.GP_WX:t=e.split("."),a=100*Number(t[0])+10*Number(t[1])+Number(t[2]),i=wx.getSystemInfoSync().SDKVersion.split(".");return a<=100*Number(i[0])+10*Number(i[1])+Number(i[2]);default:return!0}}LoadSubpackage(e,t,a){let i=e[t],s=this;switch(A.getPlatform()){case w.GP_Vivo:qg.loadSubpackage({name:i,success:function(i){++t>=e.length?a():s.LoadSubpackage(e,t,a)},fail:function(e){console.log("加载分包"+i+"失败！")},complete:function(){}});break;case w.GP_Test:a()}}}class _{constructor(){this.nativeIcon=null,this.navigateSettle=null,this.navigateBanner=null,this.navigatePortal=null,this.NavigateBoxPortalUIInfo=null,this.navigatePortalErrorTimes=0,this.testBannerOnShow=!1}static getInstance(){return _.instance||(_.instance=new _),_.instance}showNavigateIcon(e,t,a,i){this.nativeIcon?console.log("ASCSDK","Test 已存在互推ICON return"):(console.log("ASCSDK","Test showNavigateIcon=================="),this.nativeIcon=new Laya.Sprite,this.nativeIcon.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateIconRes/iconBg.png"),this.nativeIcon.width=152,this.nativeIcon.height=152,this.nativeIcon.scaleX=e/152,this.nativeIcon.scaleY=t/152,this.nativeIcon.x=a,this.nativeIcon.y=i,Laya.stage.addChild(this.nativeIcon),this.nativeIcon.zOrder=29999)}hideNavigateIcon(){this.nativeIcon?(console.log("ASCSDK","Test hideNavigateIcon===================="),this.nativeIcon.removeSelf(),this.nativeIcon=null):console.log("ASCSDK","Test 不存在互推ICON return")}showNavigateSettle(e,t,a){if(this.navigateSettle)console.log("ASCSDK","Test 已存在结算互推 return");else{ne.getInstance().hideBanner(),console.log("ASCSDK","Test showNavigateSettle==================");switch(e){case 1:this.navigateSettle=new Laya.Sprite,this.navigateSettle.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NewNavigateSettleRes/navigateSettle1Test.png"),Laya.stage.addChild(this.navigateSettle),this.navigateSettle.width=9*Laya.stage.width/10,this.navigateSettle.height=2*this.navigateSettle.width/3,this.navigateSettle.x=Laya.stage.width/2-this.navigateSettle.width/2,this.navigateSettle.y=Laya.stage.height-this.navigateSettle.height-a,this.navigateSettle.zOrder=3e4;break;case 3:this.navigateSettle=new Laya.Sprite,this.navigateSettle.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/TestRes/TestNavigateSettleType3.png"),Laya.stage.width<Laya.stage.height?(this.navigateSettle.width=.904*Laya.stage.width,this.navigateSettle.height=.317*this.navigateSettle.width):(this.navigateSettle.height=Laya.stage.height/5,this.navigateSettle.width=this.navigateSettle.height/.317),this.navigateSettle.x=t-this.navigateSettle.width/2,this.navigateSettle.y=a-this.navigateSettle.height/2,this.navigateSettle.zOrder=3e4,Laya.stage.addChild(this.navigateSettle);break;case 4:this.navigateSettle=new Laya.Sprite,this.navigateSettle.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/TestRes/TestNavigateBoxBanner.png"),Laya.stage.width<Laya.stage.height?(this.navigateSettle.width=Laya.stage.width,this.navigateSettle.height=13*this.navigateSettle.width/35):(this.navigateSettle.height=.4*Laya.stage.height,this.navigateSettle.width=35*this.navigateSettle.height/13),this.navigateSettle.x=Laya.stage.width/2-this.navigateSettle.width/2,this.navigateSettle.y=Laya.stage.height-this.navigateSettle.height-a,this.navigateSettle.zOrder=29999,Laya.stage.addChild(this.navigateSettle);break;default:console.log("ASCSDK","无该种类型的结算互推:"+e)}}}hideNavigateSettle(){this.navigateSettle?(console.log("ASCSDK","Test hideNavigateSettle===================="),this.navigateSettle.removeSelf(),this.navigateSettle=null):console.log("ASCSDK","Test 不存在测试结算互推 return")}showNavigateBoxBanner(){if(this.navigateBanner)return void console.log("ASCSDK","Test 已存在测试互推盒子横幅 return");ne.getInstance().hideBanner(),console.log("ASCSDK","Test showNavigateBoxBanner====================");let e=this;e.navigateBanner=new Laya.Sprite,e.navigateBanner.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/TestRes/TestNavigateBoxBanner.png"),Laya.stage.width<Laya.stage.height?(e.navigateBanner.width=Laya.stage.width,e.navigateBanner.height=.22*Laya.stage.height):(e.navigateBanner.width=Laya.stage.width/2,e.navigateBanner.height=.4*Laya.stage.height,e.navigateBanner.x=Laya.stage.width/2-e.navigateBanner.width/2),e.navigateBanner.y=Laya.stage.height-e.navigateBanner.height,e.navigateBanner.zOrder=29999,Laya.stage.addChild(e.navigateBanner)}hideNavigateBoxBanner(){this.navigateBanner?(console.log("ASCSDK","Test hideNavigateBoxBanner===================="),this.navigateBanner.removeSelf(),this.navigateBanner=null):console.log("ASCSDK","Test 不存在测试互推盒子横幅 return")}showNavigateBoxPortal(){this.NavigateBoxPortalUIInfo={layerBg:null,navigatePortal:null,exit:null};var e=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeInsertRes/layerBg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/TestRes/TestNavigateBoxPortal.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/TestRes/nativeClose.png"];let t=this;Laya.loader.load(e,Laya.Handler.create(this,function(){t.NavigateBoxPortalUIInfo.layerBg=e[0],t.NavigateBoxPortalUIInfo.navigatePortal=e[1],t.NavigateBoxPortalUIInfo.exit=e[2],this.testBannerOnShow=ne.getInstance().testBannerShow,ne.getInstance().hideBanner(),console.log("ASCSDK","Test showNavigateBoxPortal====================");let a=new Laya.Sprite;a.loadImage(t.NavigateBoxPortalUIInfo.layerBg),a.width=Laya.stage.width,a.height=Laya.stage.height,a.zOrder=30003,a.alpha=.8,Laya.stage.addChild(a),a.mouseEnabled=!0;let i=new Laya.Sprite;i.loadImage(t.NavigateBoxPortalUIInfo.navigatePortal),i.width=520,i.height=628,i.x=a.width/2-i.width/2,i.y=a.height/2-i.height/2,a.addChild(i);let s=new Laya.Sprite;s.loadImage(t.NavigateBoxPortalUIInfo.exit),s.width=50,s.height=50,s.x=i.width-s.width,s.y=3*i.height/32,i.addChild(s),s.on("click",this,function(){a.removeSelf(),t.testBannerOnShow&&ne.getInstance().showBanner()})}))}}class f{constructor(){this.isLoadVideo=!1,this.videoAd=null,this.videoCallBack=null,this.loadVideoTimeout=null,this.videoID=""}static getInstance(){return f.instance||(f.instance=new f),f.instance}createVideoAd(e){this.videoID=e,this.videoAd=qg.createRewardedVideoAd({posId:e}),this.videoAd.onLoad(()=>{console.log("ASCSDK","OPPO 视频广告加载完成"),this.isLoadVideo=!0}),this.videoAd.onError(e=>{console.log("ASCSDK","OPPO 视频加载失败："+JSON.stringify(e)),this.videoAd&&setTimeout(()=>{this.videoAd&&this.videoAd.load()},3e4)}),this.videoAd.onVideoStart(function(){console.log("ASCSDK","OPPO 激励视频开始播放")}),this.videoAd.onClose(e=>{e.isEnded?(console.log("ASCSDK","OPPO 激励视频广告完成，发放奖励"),this.videoCallBack&&(this.videoCallBack(!0),this.videoAd.load())):(console.log("ASCSDK","OPPO 激励视频广告取消关闭，不发放奖励"),this.videoCallBack&&(this.videoCallBack(!1),this.videoAd.load()))}),this.videoAd.load()}getVideoFlag(){return this.isLoadVideo||null!=this.loadVideoTimeout||(this.loadVideoTimeout=setTimeout(()=>{this.videoAd&&this.videoAd.destroy(),this.createVideoAd(this.videoID),this.loadVideoTimeout=null},1e3)),this.isLoadVideo}showVideo(e){this.videoCallBack=e,this.videoAd&&(console.log("ASCSDK","OPPO 展示视频==========================="),this.videoAd.show(),this.isLoadVideo=!1)}}class N{static getInstance(){return N.instance||(N.instance=new N),N.instance}showVideo(e){console.log("ASCSDK","Test showVideo==================");var t=Laya.stage.width,a=Laya.stage.height,i=new Laya.Sprite;i.pos(t/2-1280,a/2-1280),i.size(2560,2560),Laya.stage.addChild(i),i.zOrder=99999,i.loadImage("http://minigame.xplaymobile.com/oppo_native_insters%5ClayerBg.png");var s=new Laya.Label;s.font="Microsoft YaHei",s.text="视频播放回调的测试",s.fontSize=30,s.color="#FFFFFF",s.x=i.width/2-s.width/2,s.y=i.height/2-s.height/2-100,i.addChild(s);var n=new Laya.Label;n.font="Microsoft YaHei",n.text="播放成功",n.fontSize=30,n.color="#FFFFFF",n.x=i.width/2-n.width/2-200,n.y=i.height/2-n.height/2+100,i.addChild(n);var o=new Laya.Label;o.font="Microsoft YaHei",o.text="播放失败",o.fontSize=30,o.color="#FFFFFF",o.x=i.width/2-o.width/2+200,o.y=i.height/2-o.height/2+100,i.addChild(o),n.on("click",this,function(t){e(!0),i.removeSelf()}),o.on("click",this,function(t){e(!1),i.removeSelf()})}}class L{constructor(){this.isLoadVideo=!1,this.videoAd=null,this.videoCallBack=null}static getInstance(){return L.instance||(L.instance=new L),L.instance}createVideoAd(e){console.log("ASCSDK","VIVO 视频广告初始化",e),this.videoAd=qg.createRewardedVideoAd({posId:e}),this.videoAd.onLoad(()=>{console.log("ASCSDK","VIVO 视频广告加载完成"),this.isLoadVideo=!0}),this.videoAd.onError(e=>{console.log("ASCSDK","VIVO 视频加载失败 ："+JSON.stringify(e)),this.isLoadVideo=!1,this.videoAd&&setTimeout(()=>{this.videoAd.load()},3e3)}),this.videoAd.onClose(e=>{e.isEnded?(console.log("ASCSDK","VIVO 激励视频广告完成，发放奖励"),this.videoCallBack&&(this.videoCallBack(!0),this.videoCallBack=null)):(console.log("ASCSDK","VIVO 激励视频广告取消关闭，不发放奖励"),this.videoCallBack&&(this.videoCallBack(!1),this.videoCallBack=null)),this.isLoadVideo=!1,setTimeout(()=>{this.videoAd.load()},3e3)})}getVideoFlag(){return this.isLoadVideo}showVideo(e){this.videoCallBack=e,this.videoAd&&(console.log("ASCSDK","VIVO showVideo ==========================="),this.videoAd.show(),this.isLoadVideo=!1)}}class D{constructor(){this.isLoadVideo=!1,this.videoAd=null,this.videoCallBack=null,this.videoOnShow=!1}static getInstance(){return D.instance||(D.instance=new D),D.instance}getVideoFlag(){return this.isLoadVideo}createVideoAd(e){console.log("ASCSDK","Tiktok 视频广告初始化",e),this.videoAd=tt.createRewardedVideoAd({adUnitId:e}),this.videoAd.onLoad(()=>{console.log("ASCSDK","Tiktok 视频广告加载完成"),this.isLoadVideo=!0}),this.videoAd.onError(e=>{console.log("ASCSDK","Tiktok 视频广告加载失败 ："+JSON.stringify(e)),this.isLoadVideo=!1,this.videoAd&&setTimeout(()=>{this.videoAd&&this.videoAd.load()},3e4)}),this.videoAd.onClose(e=>{setTimeout(()=>{e.isEnded?(console.log("ASCSDK","Tiktok 激励视频广告完成，发放奖励"),this.videoCallBack&&(this.videoCallBack(!0),this.isLoadVideo=!1,this.videoAd.load())):(console.log("ASCSDK","Tiktok 激励视频广告取消关闭，不发放奖励"),this.videoCallBack&&(this.videoCallBack(!1),this.isLoadVideo=!1,this.videoAd.load())),this.videoOnShow=!1},500)}),this.videoAd.load()}showVideo(e){if(this.videoOnShow)return void console.log("ASCSDK","视频正在播放中,请勿多次点击！");this.videoOnShow=!0;let t=this;this.videoCallBack=e,this.videoAd?t.videoAd.show().then(()=>{console.log("ASCSDK","Tiktok 激励视频广告显示成功")}).catch(a=>{console.log("ASCSDK","Tiktok 激励视频广告组件出现问题",JSON.stringify(a)),t.videoAd.load().then(()=>{console.log("ASCSDK","Tiktok 激励视频广告手动加载成功"),t.videoAd.show().catch(a=>{console.log("ASCSDK","Tiktok 激励视频广告播放失败",JSON.stringify(a)),t.videoOnShow=!1,e(!1)})})}):(t.videoOnShow=!1,e(!1))}}class B{constructor(){this.isLoadVideo=!1,this.videoAd=null,this.videoCallBack=null}static getInstance(){return B.instance||(B.instance=new B),B.instance}getVideoFlag(){return!this.isLoadVideo&&this.videoAd&&this.videoAd.load(),this.isLoadVideo}createVideoAd(e){console.log("ASCSDK","QQ 视频广告初始化",e);let t=this;this.videoAd=qq.createRewardedVideoAd({adUnitId:e}),this.videoAd.onLoad(()=>{console.log("ASCSDK","QQ 视屏广告加载完成"),t.isLoadVideo=!0}),this.videoAd.onError(e=>{console.log("ASCSDK","QQ 视屏加载失败 ："+JSON.stringify(e)),t.isLoadVideo=!1,this.videoAd&&setTimeout(()=>{t.videoAd&&t.videoAd.load()},3e4)}),this.videoAd.onClose(e=>{setTimeout(()=>{e.isEnded?(console.log("ASCSDK","QQ 激励视频广告完成，发放奖励"),this.videoCallBack&&(this.videoCallBack(!0),this.videoAd.load())):(console.log("ASCSDK","QQ 激励视频广告取消关闭，不发放奖励"),this.videoCallBack&&(this.videoCallBack(!1),this.videoAd.load()))},500)}),this.videoAd.load()}showVideo(e){this.videoAd?(this.videoCallBack=e,console.log("ASCSDK","VIVO showVideo ========================"),this.videoAd.show(),this.isLoadVideo=!1):console.log("ASCSDK","不存在视频广告===============")}}class b{constructor(){this.isLoadVideo=!1,this.videoAd=null,this.videoCallBack=null}static getInstance(){return b.instance||(b.instance=new b),b.instance}getVideoFlag(){return!this.isLoadVideo&&this.videoAd&&this.videoAd.load(),this.isLoadVideo}createVideoAd(e){console.log("ASCSDK","WX 视频广告初始化",e);let t=this;this.videoAd=wx.createRewardedVideoAd({adUnitId:e}),this.videoAd.onLoad(()=>{console.log("ASCSDK","WX 视频广告加载完成"),t.isLoadVideo=!0}),this.videoAd.onError(e=>{console.log("ASCSDK","WX 视频广告加载失败："+JSON.stringify(e)),t.isLoadVideo=!1,this.videoAd&&setTimeout(()=>{t.videoAd&&t.videoAd.load()},3e4)}),this.videoAd.onClose(e=>{setTimeout(()=>{e.isEnded?(console.log("ASCSDK","WX 激励视频广告完成,发放奖励"),this.videoCallBack&&(this.videoCallBack(!0),this.videoAd.load())):(console.log("ASCSDK","WX 激励视频广告取消关闭,不发放奖励"),this.videoCallBack&&(this.videoCallBack(!1),this.videoAd.load()))},500)}),this.videoAd.load()}showVideo(e){let t=this;this.videoAd?(this.videoCallBack=e,console.log("ASCSDK","WX showVideo========================"),this.videoAd.show().then(()=>{console.log("ASCSDK","WX 激励视频广告显示成功")}).catch(a=>{console.log("ASCSDK","WX 激励视频广告播放出错",JSON.stringify(a)),t.videoAd.load().then(()=>{console.log("ASCSDK","WX 激励视频广告手动加载成功"),t.videoAd.show().catch(a=>{console.log("ASCSDK","WX 激励视频广告播放失败",JSON.stringify(a)),t.isLoadVideo=!1,e(!1)})})})):console.log("ASCSDK","WX 不存在视频广告实例===============")}}class k{constructor(){this.isLoadVideo=!1,this.videoAd=null,this.videoCallBack=null}static getInstance(){return k.instance||(k.instance=new k),k.instance}getVideoFlag(){return this.isLoadVideo}createVideoAd(e){console.log("ASCSDK","KS 视频广告初始化",e);this.videoAd=kwaigame.createRewardedVideoAd({adUnitId:e}),this.videoAd&&(this.isLoadVideo=!0,this.videoAd.onClose(e=>{console.log("ASCSDK","激励视频取消播放"),this.videoCallBack(!1)}),this.videoAd.onReward(e=>{console.log("ASCSDK","激励视频播放完成"),this.videoCallBack(!0)}))}showVideo(e){this.videoAd?(this.videoCallBack=e,console.log("ASCSDK","KS showVideo========================"),this.videoAd.show({success:()=>{},fail:e=>{console.log("ASCSDK","激励视频播放失败: "+JSON.stringify(e))}})):console.log("ASCSDK","不存在视频广告===============")}}class T{constructor(){this.isLoadVideo=!1,this.videoAd=null,this.videoCallBack=null}static getInstance(){return T.instance||(T.instance=new T),T.instance}getVideoFlag(){return this.isLoadVideo}createVideoAd(e){console.log("ASCSDK","HW 视频广告初始化",e);let t=this;this.videoAd=hbs.createRewardedVideoAd({adUnitId:e}),this.videoAd.onLoad(()=>{console.log("ASCSDK","HW 视频广告加载完成"),this.isLoadVideo=!0}),this.videoAd.onError(e=>{console.log("ASCSDK","HW 视频加载失败 ："+JSON.stringify(e)),this.isLoadVideo=!1,this.videoAd&&setTimeout(()=>{t.videoAd&&t.videoAd.load()},3e4)}),this.videoAd.onClose(e=>{e.isEnded?(console.log("ASCSDK","HW 激励视频广告完成，发放奖励"),this.videoCallBack&&(this.videoCallBack(!0),this.videoAd.load())):(console.log("ASCSDK","HW 激励视频广告取消关闭，不发放奖励"),this.videoCallBack&&(this.videoCallBack(!1),this.videoAd.load()))}),this.videoAd.load()}showVideo(e){this.videoAd?(this.videoCallBack=e,console.log("ASCSDK","HW showVideo========================"),this.videoAd.show()):console.log("ASCSDK","不存在视频广告===============")}}class P{constructor(){this.isLoadVideo=!1,this.videoAd=null,this.videoCallBack=null}static getInstance(){return P.instance||(P.instance=new P),P.instance}getVideoFlag(){return!this.isLoadVideo&&this.videoAd&&this.videoAd.load(),this.isLoadVideo}createVideoAd(e){console.log("ASCSDK","XM 视频广告初始化",e);let t=this;this.videoAd=qg.createRewardedVideoAd({adUnitId:e}),this.videoAd.onLoad(()=>{console.log("ASCSDK","XM 视频广告加载完成"),t.isLoadVideo=!0}),this.videoAd.onError(e=>{console.log("ASCSDK","XM 视频广告加载失败："+JSON.stringify(e)),t.isLoadVideo=!1,this.videoAd&&setTimeout(()=>{t.videoAd&&t.videoAd.load()},3e4)}),this.videoAd.onClose(e=>{setTimeout(()=>{e.isEnded?(console.log("ASCSDK","XM 激励视频广告完成,发放奖励"),this.videoCallBack&&(this.videoCallBack(!0),this.videoAd.load())):(console.log("ASCSDK","XM 激励视频广告取消关闭,不发放奖励"),this.videoCallBack&&(this.videoCallBack(!1),this.videoAd.load()))},500)}),this.videoAd.load()}showVideo(e){this.videoAd?(this.videoCallBack=e,console.log("ASCSDK","XM showVideo========================"),this.videoAd.show()):console.log("ASCSDK","XM 不存在视频广告实例===============")}}class x{constructor(){this.isLoadVideo=!1,this.videoAd=null,this.videoCallBack=null}static getInstance(){return x.instance||(x.instance=new x),x.instance}getVideoFlag(){return!this.isLoadVideo&&this.videoAd&&this.videoAd.load(),this.isLoadVideo}createVideoAd(){console.log("ASCSDK","BL 视频广告初始化"),this.videoAd=bl.createRewardedVideoAd(),this.videoAd.onLoad(e=>{console.log("ASCSDK","BL 视频广告加载成功"),this.isLoadVideo=!0}),this.videoAd.onError(e=>{console.log("ASCSDK","BL 视频广告加载错误:",JSON.stringify(e)),this.videoAd.destroy(),this.createVideoAd()}),this.videoAd.onClose(e=>{e.isEnded?(console.log("ASCSDK","BL 激励视频广告完成，发放奖励"),this.videoCallBack(!0)):(console.log("ASCSDK","BL 激励视频广告取消关闭，不发放奖励"),this.videoCallBack(!1)),this.isLoadVideo=!1,this.videoAd.destroy(),this.createVideoAd()}),this.videoAd.load()}showVideo(e){this.videoAd?(this.videoCallBack=e,console.log("ASCSDK","BL showVideo ========================"),this.videoAd.show(),this.isLoadVideo=!1):console.log("ASCSDK","不存在视频广告===============")}}class G{constructor(){this.ID_VideoID="",this.SW_VideoSwitch=!1}static getInstance(){return G.instance||(G.instance=new G),G.instance}createVideoAd(){if(this.SW_VideoSwitch)switch(A.getPlatform()){case w.GP_Oppo:f.getInstance().createVideoAd(this.ID_VideoID);break;case w.GP_Vivo:L.getInstance().createVideoAd(this.ID_VideoID);break;case w.GP_Tiktok:D.getInstance().createVideoAd(this.ID_VideoID);break;case w.GP_QQ:B.getInstance().createVideoAd(this.ID_VideoID);break;case w.GP_WX:b.getInstance().createVideoAd(this.ID_VideoID);break;case w.GP_KS:k.getInstance().createVideoAd(this.ID_VideoID);break;case w.GP_HW:T.getInstance().createVideoAd(this.ID_VideoID);break;case w.GP_XM:P.getInstance().createVideoAd(this.ID_VideoID);break;case w.GP_BL:x.getInstance().createVideoAd()}else console.log("ASCSDK","VIVO 视频开关没有开启")}getVideoFlag(){switch(A.getPlatform()){case w.GP_Oppo:return f.getInstance().getVideoFlag();case w.GP_Vivo:return L.getInstance().getVideoFlag();case w.GP_Tiktok:return D.getInstance().getVideoFlag();case w.GP_QQ:return B.getInstance().getVideoFlag();case w.GP_WX:return b.getInstance().getVideoFlag();case w.GP_KS:return k.getInstance().getVideoFlag();case w.GP_HW:return T.getInstance().getVideoFlag();case w.GP_XM:return P.getInstance().getVideoFlag();case w.GP_BL:return x.getInstance().getVideoFlag();case w.GP_Test:return!0;default:return!1}}showVideo(e){if(A.getPlatform()!=w.GP_Test)if(this.SW_VideoSwitch)switch(A.getPlatform()){case w.GP_Oppo:f.getInstance().showVideo(e);break;case w.GP_Vivo:L.getInstance().showVideo(e);break;case w.GP_Tiktok:D.getInstance().showVideo(e);break;case w.GP_QQ:B.getInstance().showVideo(e);break;case w.GP_WX:b.getInstance().showVideo(e);break;case w.GP_KS:k.getInstance().showVideo(e);break;case w.GP_HW:T.getInstance().showVideo(e);break;case w.GP_XM:P.getInstance().showVideo(e);break;case w.GP_BL:x.getInstance().showVideo(e)}else console.log("ASCSDK","视频开关未开启");else N.getInstance().showVideo(e)}}class O{constructor(){this.SW_DesktopSwitch=!1,this.SW_IntersToDesktop=!1,this.NUM_DeskAutoMostTimes=0,this.NUM_IntersAddDesktopNumber=0}static getInstance(){return O.instance||(O.instance=new O),O.instance}hasDesktopFunc(){switch(A.getPlatform()){case w.GP_Oppo:case w.GP_Vivo:case w.GP_Tiktok:case w.GP_QQ:case w.GP_HW:case w.GP_Test:return!0;default:return!1}}getDeskTopFlag(e){if(!this.SW_DesktopSwitch)return console.log("ASCSDK","添加桌面图标开关未开启"),void e(!1);switch(A.getPlatform()){case w.GP_Oppo:qg.hasShortcutInstalled({success:function(t){0==t&&e(!0)},fail:function(e){console.log("ASCSDK",JSON.stringify(e))},complete:function(){}});break;case w.GP_Vivo:qg.hasShortcutInstalled({success:function(t){t?(console.log("ASCSDK","VIVO 已创建桌面图标"),e(!1)):(console.log("ASCSDK","VIVO 未创建桌面图标"),e(!0))}});break;case w.GP_Tiktok:tt.checkShortcut({success:function(t){!t.status.exist||t.status.needUpdate?(console.log("ASCSDK","checkShortcut res:",JSON.stringify(t)),console.log("ASCSDK","Tiktok 未创建桌面图标或图标需要更新"),e(!0)):(console.log("ASCSDK","Tiktok 已创建桌面图标"),e(!1))},fail:function(t){console.log("ASCSDK","Tiktok 拒绝添加桌面图标：",JSON.stringify(t.errMsg)),e(!1)}});break;case w.GP_QQ:e(!0);break;case w.GP_HW:hbs.hasInstalled({success:function(t){t?(console.log("ASCSDK","HW 已创建桌面图标"),e(!1)):(console.log("ASCSDK","HW 未创建桌面图标"),e(!0))},fail:function(t){console.log("ASCSDK","未知错误:"+t),e(!1)}});break;case w.GP_Test:default:e(!0)}}addDeskTop(e){if(!this.SW_DesktopSwitch)return console.log("ASCSDK","添加桌面图标开关未开启"),void e(!1);switch(A.getPlatform()){case w.GP_Oppo:qg.installShortcut({success:function(){console.log("ASCSDK","OPPO 创建桌面图标成功"),e(!0)},fail:function(t){console.log("ASCSDK","OPPO 创建桌面图标失败:"+JSON.stringify(t)),e(!1)},complete:function(){}});break;case w.GP_Vivo:qg.installShortcut({success:function(){console.log("ASCSDK","VIVO 创建桌面图标成功"),e(!0)},fail:function(t){console.log("ASCSDK","VIVO 创建桌面图标失败:"+JSON.stringify(t)),e(!1)},complete:function(){}});break;case w.GP_QQ:qq.saveAppToDesktop({success:function(){console.log("ASCSDK","QQ 创建桌面图标成功"),e(!0)},fail:function(t){console.log("ASCSDK","QQ 创建桌面图标失败:"+JSON.stringify(t)),e(!1)},complete:function(){}});break;case w.GP_Tiktok:tt.addShortcut({success:function(t){console.log("ASCSDK","Tiktok 添加桌面成功"),e(!0)},fail:function(t){console.log("ASCSDK","Tiktok 添加桌面失败:"+JSON.stringify(t)),e(!1)}});break;case w.GP_HW:hbs.install({success:function(t){console.log("ASCSDK","HW 添加桌面成功"),e(!0)},fail:function(t,a){console.log("ASCSDK","HW 添加桌面失败:"+JSON.stringify(t)),e(!1)}});break;default:e(!0)}}showToast(e,t){switch(null!=t&&null!=t&&0!=t||(t=1500),A.getPlatform()){case w.GP_Oppo:console.log("ASCSDK","OPPO showToast：",e),qg.showToast({title:e,duration:t});break;case w.GP_Vivo:console.log("ASCSDK","VIVO showToast：",e),qg.showToast({message:e,duration:1==t?1:0});break;case w.GP_Tiktok:console.log("ASCSDK","Tiktok showToast：",e),tt.showToast({title:e,duration:t});break;case w.GP_QQ:console.log("ASCSDK","QQ showToast：",e),qq.showToast({title:e,duration:t});break;case w.GP_Test:console.log("ASCSDK","Test 打包后会有真实效果:",e)}}phoneVibrate(e){switch(console.log("ASCSDK","手机震动，需要在打包后会有真实效果",e),A.getPlatform()){case w.GP_Oppo:"short"==e&&qg.vibrateShort({success:function(e){},fail:function(e){},complete:function(e){}}),"long"==e&&qg.vibrateLong({success:function(e){},fail:function(e){},complete:function(e){}});break;case w.GP_Vivo:case w.GP_XM:"short"==e&&qg.vibrateShort(),"long"==e&&qg.vibrateLong();break;case w.GP_Tiktok:"long"==e?tt.vibrateLong({success(e){},fail(e){console.log("ASCSDK","Tiktok vibrateLong调用失败")}}):"short"==e&&tt.vibrateShort({success(e){},fail(e){console.log("ASCSDK","Tiktok vibrateShort调用失败")}});break;case w.GP_QQ:"long"==e?qq.vibrateLong({success(e){},fail(e){console.log("ASCSDK","QQ vibrateLong调用失败",JSON.stringify(e))}}):"short"==e&&qq.vibrateShort({success(e){},fail(e){console.log("ASCSDK","QQ vibrateShort调用失败",JSON.stringify(e))}});break;case w.GP_WX:"long"==e?wx.vibrateLong({success(e){},fail(e){console.log("ASCSDK","WX vibrateLong调用失败",JSON.stringify(e))}}):"short"==e&&wx.vibrateShort({type:"heavy",success(e){},fail(e){console.log("ASCSDK","WX vibrateShort调用失败",JSON.stringify(e))}});break;case w.GP_BL:"long"==e?bl.vibrateLong({success(e){},fail(e){console.log("ASCSDK","BL vibrateLong调用失败",JSON.stringify(e))}}):"short"==e&&bl.vibrateShort({success(e){},fail(e){console.log("ASCSDK","BL vibrateShort调用失败",JSON.stringify(e))}});break;case w.GP_Test:console.log("ASCSDK","Test 手机震动，需要在打包后会有真实效果",e)}}reportMonitor(){switch(A.getPlatform()){case w.GP_Oppo:if(qg.getSystemInfoSync().platformVersionCode<1060)return;qg.reportMonitor("game_scene",0)}}reportAnalytics(e,t){switch(A.getPlatform()){case w.GP_Tiktok:tt.reportAnalytics(e,t)}}}class U{constructor(){this.boxBannerAd=null,this.isLoadBoxBanner=!1,this.boxBannerErrNum=0}static getInstance(){return U.instance||(U.instance=new U),U.instance}createBoxBanner(e){console.log("AD","VIVO 互推盒子Banner广告初始化",e);let t=e;qg.createBoxBannerAd?(this.boxBannerAd=qg.createBoxBannerAd({posId:e}),this.boxBannerAd.onLoad(()=>{console.log("AD","VIVO 互推盒子Banner广告加载完成"),this.isLoadBoxBanner=!0}),this.boxBannerAd.onError(t=>{console.log("AD","VIVO 互推盒子Banner加载失败："+JSON.stringify(t)),this.isLoadBoxBanner=!1,1008!=t.errCode&&(this.boxBannerErrNum++,console.log("AD","VIVO 互推盒子Banner加载错误次数:"+this.boxBannerErrNum),this.boxBannerErrNum<5&&setTimeout(()=>{this.createBoxBanner(e)},3e4))}),this.boxBannerAd.onClose(()=>{console.log("AD","VIVO 互推盒子Banner广告关闭"),this.isLoadBoxBanner=!1,setTimeout(()=>{this.createBoxBanner(t)},3e4)})):console.log("AD","VIVO 互推盒子Banner不存在",e)}getBoxBannerFlag(){return this.isLoadBoxBanner}showBoxBanner(){this.boxBannerAd?(console.log("AD","VIVO showBoxBanner=================="),this.boxBannerAd.show().then(()=>{console.log("AD","VIVO 互推盒子Banner广告展示成功==================")}).catch(e=>{console.log("AD","VIVO 互推盒子Banner展示错误:"+JSON.stringify(e))})):console.log("AD","VIVO 未创建互推盒子Banner广告")}hideBoxBanner(){this.boxBannerAd?(console.log("AD","VIVO hideBoxBanner=================="),this.boxBannerAd.hide()):console.log("AD","VIVO 未创建互推盒子Banner广告")}}class M{constructor(){this.boxPortalAd=null,this.isLoadBoxPortal=!1,this.boxPortalErrNum=0}static getInstance(){return M.instance||(M.instance=new M),M.instance}createBoxPortal(e){console.log("AD","VIVO 互推盒子九宫格广告初始化",e);let t=e;qg.createBoxPortalAd?(this.boxPortalAd=qg.createBoxPortalAd({posId:e,image:"",marginTop:Laya.stage.height>>1}),this.boxPortalAd.onLoad(()=>{console.log("AD","VIVO 互推盒子九宫格广告加载完成"),this.isLoadBoxPortal=!0}),this.boxPortalAd.onError(t=>{console.log("AD","VIVO 互推盒子九宫格加载失败："+JSON.stringify(t)),this.isLoadBoxPortal=!1,1008!=t.errCode&&(this.boxPortalErrNum++,console.log("AD","VIVO 互推盒子九宫格加载错误次数:"+this.boxPortalErrNum),this.boxPortalErrNum<5&&setTimeout(()=>{this.createBoxPortal(e)},3e4))}),this.boxPortalAd.onClose(()=>{console.log("AD","VIVO 互推盒子九宫格广告关闭"),this.isLoadBoxPortal=!1,setTimeout(()=>{this.createBoxPortal(t)},3e4)})):console.log("AD","VIVO 互推盒子九宫格广告不存在",e)}getBoxPortalFlag(){return this.isLoadBoxPortal}showBoxPortal(){this.boxPortalAd?(console.log("AD","VIVO showBoxPortal=================="),this.boxPortalAd.show().then(()=>{console.log("AD","VIVO 互推盒子九宫格广告展示成功==================")}).catch(e=>{console.log("AD","VIVO 互推盒子九宫格展示错误:"+JSON.stringify(e))})):console.log("AD","VIVO 未创建互推盒子九宫格广告")}hideBoxPortal(){this.boxPortalAd?(console.log("AD","VIVO hideBoxPortal=================="),this.boxPortalAd.hide()):console.log("AD","VIVO 未创建互推盒子九宫格广告")}}class K{constructor(){this.ID_BoxID="",this.ID_BoxBannerID="",this.ID_BoxPortalID="",this.SW_BoxSwitch=!0,this.appBoxAd=null}static getInstance(){return K.instance||(K.instance=new K),K.instance}createAppBox(e=null){if(this.SW_BoxSwitch)switch(A.getPlatform()){case w.GP_Oppo:q.getInstance().createNavigateBoxPortal(this.ID_BoxID);break;case w.GP_Vivo:e?M.getInstance().createBoxPortal(this.ID_BoxPortalID):U.getInstance().createBoxBanner(this.ID_BoxBannerID)}else console.log("AD","盒子广告开关未开启")}getBoxFlag(e){switch(A.getPlatform()){case w.GP_Vivo:return e?M.getInstance().getBoxPortalFlag():U.getInstance().getBoxBannerFlag()}}showAppBox(e){if(this.SW_BoxSwitch)switch(A.getPlatform()){case w.GP_Vivo:e?M.getInstance().getBoxPortalFlag()?M.getInstance().showBoxPortal():this.checkAppBoxLoadSucc(e):U.getInstance().getBoxBannerFlag()?U.getInstance().showBoxBanner():this.checkAppBoxLoadSucc(e);break;case w.GP_Test:console.log("AD","Test 没有测试盒子广告============")}else console.log("AD","盒子广告开关未开启")}hideAppBox(e){if(this.SW_BoxSwitch)switch(A.getPlatform()){case w.GP_Vivo:e?M.getInstance().hideBoxPortal():U.getInstance().hideBoxBanner();break;case w.GP_Test:console.log("AD","Test 没有测试盒子广告============")}else console.log("AD","盒子广告开关未开启")}checkAppBoxLoadSucc(e){let t;switch(e){case 0:t="互推Banner",this.loadBoxBannerCheck&&clearTimeout(this.loadBoxBannerCheck),this.SW_BoxSwitch&&this.getBoxFlag(e)?this.showAppBox(e):(console.log("AD","vivo "+t+"广告没有准备好"),this.loadBoxBannerCheck=setTimeout(function(){this.checkAppBoxLoadSucc(e)}.bind(this),5e3));break;case 1:t="互推九宫格",this.loadBoxPortalCheck&&clearTimeout(this.loadBoxPortalCheck),this.SW_BoxSwitch&&this.getBoxFlag(e)?this.showAppBox(e):(console.log("AD","vivo "+t+"广告没有准备好"),this.loadBoxPortalCheck=setTimeout(function(){this.checkAppBoxLoadSucc(e)}.bind(this),5e3))}}}class V{constructor(){this.ID_BlockID="",this.blockAd=null,this.isLoadBlock=!1,this.blockOrientation="landscape",this.blockX=32,this.blockY=32,this.blockSize=1,this.updateBlock=null}static getInstance(){return V.instance||(V.instance=new V),V.instance}createBlock(e){if(!A.getInstance().isversionNewThanEngineVersion("1.15.0"))return void console.log("ASCSDK","QQ 平台版本过低,不能创建积木广告");this.ID_BlockID=e,console.log("ASCSDK","QQ 积木广告初始化",e);let t=this;this.blockAd=qq.createBlockAd({adUnitId:e,size:t.blockSize,orientation:t.blockOrientation,style:{left:t.blockX,top:t.blockY}}),this.blockAd.onLoad(function(){console.log("ASCSDK","QQ 积木广告加载成功"),t.isLoadBlock=!0}),this.blockAd.onError(function(e){console.log("ASCSDK","QQ 积木广告加载失败:"+JSON.stringify(e)),1004==e.errCode&&console.log("ASCSDK","QQ 积木广告列表为空")})}getBlockFlag(){return this.isLoadBlock}showBlock(e,t,a,i){this.updateBlock&&clearInterval(this.updateBlock);let s=this,n=Number(qq.getSystemInfoSync().windowWidth),o=Number(qq.getSystemInfoSync().windowHeight),r=a;"8.3.6"!=qq.getSystemInfoSync().version?(a=Laya.stage.height-a,this.blockX=t*(n/Laya.stage.width),this.blockY=a*(o/Laya.stage.height),this.blockOrientation=e,this.blockSize=i,this.createBlock(this.ID_BlockID),setTimeout(()=>{console.log("ASCSDK","QQ 展示积木广告==============================="),this.blockAd.show()},500),this.updateBlock=setInterval(()=>{console.log("ASCSDK","QQ 刷新积木广告================"),s.blockAd.offLoad(),s.blockAd.offError(),s.blockAd.destroy(),s.showBlock(s.blockOrientation,t,r,s.blockSize)},3e4)):console.log("ASCSDK","QQ 平台版本过低,不展示积木广告==============")}hideBlock(){this.updateBlock&&clearInterval(this.updateBlock),this.blockAd?(console.log("ASCSDK","QQ hideBlock=========================="),this.blockAd.destroy()):console.log("ASCSDK","QQ 不存在积木广告")}}class E{constructor(){this.nativeIcon=null}static getInstance(){return E.instance||(E.instance=new E),E.instance}showBlock(e,t,a,i){this.nativeIcon?console.log("ASCSDK","Test 已存在测试积木广告 return"):(console.log("ASCSDK","Test showBlock=========================="),this.nativeIcon=new Laya.Sprite,this.nativeIcon.loadImage(p.ossUrl+"/SDK/SDKImage_1_0/NavigateIconRes/iconBg.png"),this.nativeIcon.width=200,this.nativeIcon.height=200,this.nativeIcon.x=t+this.nativeIcon.width/2,this.nativeIcon.y=a-this.nativeIcon.height/2,this.nativeIcon.zOrder=29999,Laya.stage.addChild(this.nativeIcon))}hideBlock(){this.nativeIcon?(console.log("ASCSDK","Test hideBlock=========================="),this.nativeIcon.removeSelf(),this.nativeIcon=null):console.log("ASCSDK","Test 不存在积木广告 return")}}class R{constructor(){this.ID_BlockID="",this.blockAd=null,this.isLoadBlock=!1,this.type="white",this.blockX=0,this.blockY=0,this.blockSize=5,this.updateBlock=null}static getInstance(){return R.instance||(R.instance=new R),R.instance}createBlock(e){if(!A.getInstance().isversionNewThanEngineVersion("2.9.2"))return console.log("ASCSDK","WX 平台版本过低,不能创建积木广告"),void console.log("ASCSDK","当前版本："+wx.getSystemInfoSync().SDKVersion);this.ID_BlockID=e,console.log("ASCSDK","WX 格子(积木)广告初始化",e);let t=this;this.blockAd=wx.createGridAd({adUnitId:e,adTheme:t.type,gridCount:t.blockSize,style:{left:t.blockX,top:t.blockY,width:330,opacity:.8}}),this.blockAd.onLoad(function(){console.log("ASCSDK","WX 格子(积木)广告加载成功"),t.isLoadBlock=!0}),this.blockAd.onError(function(e){console.log("ASCSDK","WX 格子(积木)广告加载失败:"+JSON.stringify(e))})}getBlockFlag(){return this.isLoadBlock}showBlock(e,t,a,i){this.updateBlock&&clearInterval(this.updateBlock);let s=this,n=Number(wx.getSystemInfoSync().windowWidth),o=Number(wx.getSystemInfoSync().windowHeight),r=a;a=Laya.stage.height-a,this.blockX=t*(n/Laya.stage.width),this.blockY=a*(o/Laya.stage.height),this.type=e,this.blockSize=i,this.createBlock(this.ID_BlockID),setTimeout(()=>{console.log("ASCSDK","WX showBlock==============================="),this.blockAd.show()},500),this.updateBlock=setInterval(()=>{console.log("ASCSDK","WX 刷新积木广告================"),s.blockAd.offLoad(),s.blockAd.offError(),s.blockAd.destroy(),s.showBlock(s.type,t,r,s.blockSize)},3e4)}hideBlock(){this.updateBlock&&clearInterval(this.updateBlock),this.blockAd?(console.log("ASCSDK","WX hideBlock=========================="),this.blockAd.destroy()):console.log("ASCSDK","WX 不存在积木广告")}}class W{constructor(){this.ID_BlockID=""}static getInstance(){return W.instance||(W.instance=new W),W.instance}createBlock(){switch(A.getPlatform()){case w.GP_Oppo:return void q.getInstance().createNavigateBoxBanner(this.ID_BlockID);case w.GP_QQ:return void V.getInstance().createBlock(this.ID_BlockID);case w.GP_WX:return void R.getInstance().createBlock(this.ID_BlockID)}}getBlockFlag(){switch(A.getPlatform()){case w.GP_QQ:return V.getInstance().getBlockFlag();case w.GP_WX:return R.getInstance().getBlockFlag();case w.GP_Test:return!0}}showBlock(e,t,a,i){switch(A.getPlatform()){case w.GP_QQ:return void V.getInstance().showBlock(e,t,a,i);case w.GP_WX:return void R.getInstance().showBlock(e,t,a,i);case w.GP_Test:return void E.getInstance().showBlock(e,t,a,i)}}hideBlock(){switch(A.getPlatform()){case w.GP_Test:return void E.getInstance().hideBlock();case w.GP_QQ:return void V.getInstance().hideBlock();case w.GP_WX:return void R.getInstance().hideBlock()}}}class F{constructor(){this.nativeCustomAd=null,this.customLoadErrNum=0,this.isLoadNativeCustom=!1}static getInstance(){return F.instance||(F.instance=new F),F.instance}createNativeCustom(e){if(console.log("AD","VIVO 原生模板广告初始化",e),!qg.createCustomAd)return void console.log("AD","VIVO 原生模板广告不存在",e);let t,a;Laya.stage.width>Laya.stage.height?(t=Laya.stage.width/2,a=100):(t=0,a=Laya.stage.height/2),this.nativeCustomAd=qg.createCustomAd({posId:e,style:{left:t,top:a}}),this.nativeCustomAd.onLoad(()=>{console.log("AD","VIVO 原生模板广告加载完成"),this.isLoadNativeCustom=!0}),this.nativeCustomAd.onError(t=>{console.log("AD","VIVO 原生模板广告加载失败："+JSON.stringify(t)),this.isLoadNativeCustom=!1,1008!=t.errCode&&(this.customLoadErrNum++,console.log("AD","VIVO 原生模板加载错误次数:"+this.customLoadErrNum),this.customLoadErrNum<5&&setTimeout(()=>{this.createNativeCustom(e)},1e3))}),this.nativeCustomAd.onClose(()=>{console.log("AD","VIVO 原生模板广告关闭"),oe.getInstance().hideNativeCustomUI(),this.closeCall&&this.closeCall(),this.isLoadNativeCustom=!1,setTimeout(()=>{this.createNativeCustom(e)},1e3)})}getNativeCustomFlag(){return this.isLoadNativeCustom}showNativeCustom(e){this.nativeCustomAd?(console.log("AD","VIVO showNativeCustom=================="),oe.getInstance().showNativeCustomUI(),this.nativeCustomAd.show().then(()=>{this.closeCall=e,console.log("AD","VIVO 原生模板广告展示成功==================")}).catch(e=>{oe.getInstance().hideNativeCustomUI(),console.log("AD","VIVO 原生模板广告展示错误:"+JSON.stringify(e))})):console.log("AD","VIVO 未创建原生模板广告")}hideNativeCustom(){this.nativeCustomAd&&(console.log("AD","VIVO hideNativeCustom=================="),this.nativeCustomAd.hide())}}class H{constructor(){this.SW_NativeCustomSwitch=!1,this.ID_NativeCustomId=""}static getInstance(){return H.instance||(H.instance=new H),H.instance}createNativeCustom(){if(this.SW_NativeCustomSwitch)switch(A.getPlatform()){case w.GP_Vivo:oe.getInstance().loadNativeCustomRes(),F.getInstance().createNativeCustom(this.ID_NativeCustomId)}else console.log("AD","原生模板开关未开启")}getNativeCustomFlag(){switch(A.getPlatform()){case w.GP_Vivo:return F.getInstance().getNativeCustomFlag();default:return!1}}showNativeCustom(e){switch(A.getPlatform()){case w.GP_Vivo:this.getNativeCustomFlag()?F.getInstance().showNativeCustom(e):this.checkNativeLoadSucc(e);break;default:console.log("AD","当前平台不存在原生模板广告位！")}}hideNativeCustom(){switch(A.getPlatform()){case w.GP_Vivo:F.getInstance().hideNativeCustom();break;default:console.log("AD","当前平台不存在原生模板广告位！")}}checkNativeLoadSucc(e){this.loadCustomCheck&&clearTimeout(this.loadCustomCheck),this.SW_NativeCustomSwitch&&this.getNativeCustomFlag()?this.showNativeCustom(e):this.loadCustomCheck=setTimeout(()=>{this.checkNativeLoadSucc(e)},5e3)}}const X=p.getInstance(),z="https://cloud.xminigame.com/api";class Q{constructor(){this.mobileToken="",this.isInitCompelete=0,this.hasBeenInit=!1,this.pushAd=!1,this.statisSwitch=!0,this.gameUserId="",this.uid=0,this.userData=null,this.userId="",this.userToken="",this.userType=0,this.userInfo=null,this.nickName="",this.avatar="",this.gender="",this.isGetRemote=!1}static getInstance(){return Q.instance||(Q.instance=new Q),Q.instance}login(e){let t=this;switch(A.getPlatform()){case w.GP_Oppo:qg.login({success:function(a){console.log("ASCSDK","OPPO 登录成功："+JSON.stringify(a.data)),t.getH5SDKUserInfo(a.data.token,A.getData("ServerUserId",""),e)},fail:function(a){console.log("ASCSDK","OPPO 登录失败,",JSON.stringify(a)),console.log("ASCSDK","OPPO 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e)}});break;case w.GP_Vivo:console.log("ASCSDK","VIVO 启用游客登录"),this.userRegister(A.getData("ServerUserId",""),e);break;case w.GP_Tiktok:tt.login({force:!1,success(a){a.isLogin?(console.log("ASCSDK","Tiktok 已登录："+JSON.stringify(a)),t.getH5SDKUserInfo(a.code,A.getData("ServerUserId",""),e)):(console.log("ASCSDK","Tiktok 未登录,",JSON.stringify(a)),console.log("ASCSDK","Tiktok 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e))},fail(a){console.log("ASCSDK","Tiktok 登录失败,",JSON.stringify(a)),console.log("ASCSDK","Tiktok 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e)}});break;case w.GP_QQ:qq.login({success(a){console.log("ASCSDK","QQ 登录成功："+JSON.stringify(a)),t.getH5SDKUserInfo(a.code,A.getData("ServerUserId",""),e)},fail(a){console.log("ASCSDK","QQ 登录失败,",JSON.stringify(a)),console.log("ASCSDK","QQ 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e)}});break;case w.GP_WX:wx.login({success(a){a.code?(console.log("ASCSDK","WX 登录成功："+JSON.stringify(a)),t.getH5SDKUserInfo(a.code,A.getData("ServerUserId",""),e)):(console.log("ASCSDK","WX 登录失败,"+JSON.stringify(a)),console.log("ASCSDK","WX 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e))},fail(a){console.log("ASCSDK","WX 登录失败,",JSON.stringify(a)),console.log("ASCSDK","WX 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e)}});break;case w.GP_KS:kwaigame.login({success:a=>{console.log("ASCSDK","KS 登录成功:"+JSON.stringify(a)),t.gameUserId=a.gameUserId,t.getH5SDKUserInfo(a.gameToken,A.getData("ServerUserId",""),e)},fail:a=>{console.log("ASCSDK","KS 登录失败:"+JSON.stringify(a)),console.log("ASCSDK","KS 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e)}});break;case w.GP_HW:hbs.gameLogin({forceLogin:1,appid:p.APPID,success:function(a){console.log("ASCSDK","HW 登录成功",JSON.stringify(a)),console.log(a.playerId),t.getH5SDKUserInfo(a.playerId,A.getData("ServerUserId",""),e)},fail(a,i){console.log("ASCSDK","HW 登录失败",JSON.stringify(a)+","+JSON.stringify(i)),console.log("ASCSDK","HW 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e)}});break;case w.GP_XM:qg.login({success:function(a){console.log("ASCSDK XM 登录成功"+JSON.stringify(a)),t.uid=a.data.appAccountId,t.getH5SDKUserInfo(a.data.session,A.getData("ServerUserId",""),e)},fail:function(a){console.log("ASCSDK","XM 登录失败",JSON.stringify(a)),t.userRegister(A.getData("ServerUserId",""),e)}});break;case w.GP_BL:bl.login({success(a){a.code?(console.log("ASCSDK","BL 登录成功",JSON.stringify(a)),t.getH5SDKUserInfo(a.code,A.getData("ServerUserId",""),e)):(console.log("ASCSDK","BL 登录失败",JSON.stringify(a)),console.log("ASCSDK","BL 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e))},fail(a){console.log("ASCSDK","BL 登录失败",JSON.stringify(a)),console.log("ASCSDK","BL 启用游客登录"),t.userRegister(A.getData("ServerUserId",""),e)}})}}userRegister(e,t){console.log("ASCSDK","获取游客token");var a={channelId:X.channelId,signParam:{},userId:e},i=this,s=`${z}/xmini-game-user/mobile/login/getVisitorToken`,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText;e&&console.log("ASCSDK","getVisitorToken 服务器返回的data:",e);var a=JSON.parse(e);if(void 0===a||!a||!a.data)return console.log("ASCSDK","error : is not a json"),void t(!1);var s=a.data.token,o=a.data.userId;s&&void 0!==s&&o&&void 0!==o?(console.log("ASCSDK","注册成功",s,o),i.mobileToken=s,A.saveData("ServerUserId",o),t(!0)):(console.log("ASCSDK","注册失败",s,o),t(!1)),i.userToken=s,i.userId=o,i.userType=0}},console.log("ASCSDK","发送给服务器的Data：",JSON.stringify(a)),n.open("POST",s,!0),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(a))}getH5SDKUserInfo(e,t,a){var i;switch(console.log("ASCSDK","渠道返回的token：",e),A.getPlatform()){case w.GP_Oppo:i={channelId:X.channelId,signParam:{token:e,sdkVersion:"1.0.0"},userId:t};break;case w.GP_Vivo:i={channelId:X.channelId,signParam:{token:e},userId:t};break;case w.GP_Tiktok:case w.GP_QQ:case w.GP_WX:i={channelId:X.channelId,signParam:{code:e,nickName:A.getData("nickName",""),avatar:A.getData("avatarUrl",""),gender:A.getData("gender","0")},userId:t};break;case w.GP_KS:i={channelId:X.channelId,signParam:{gameUserId:this.gameUserId,gameToken:e,nickName:A.getData("nickName",""),avatar:A.getData("avatarUrl",""),gender:A.getData("gender","0")},userId:t};break;case w.GP_HW:i={channelId:X.channelId,signParam:{openId:e,appId:p.APPID,nickName:A.getData("nickName",""),avatar:A.getData("avatarUrl",""),gender:A.getData("gender","0")},userId:t};break;case w.GP_XM:i={channelId:X.channelId,signParam:{session:e,uid:this.uid,nickName:A.getData("nickName",""),avatarUrl:A.getData("avatarUrl",""),gender:A.getData("gender","0")},userId:t};break;case w.GP_BL:i={channelId:X.channelId,signParam:{js_code:e,nickName:A.getData("nickName",""),avatar:A.getData("avatarUrl",""),gender:A.getData("gender","0")},userId:t};break;default:a(!1)}console.log("ASCSDK","封装的Data：",JSON.stringify(i));var s=this,n=`${z}/xmini-game-user/mobile/login/getMobileToken`;let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var e=o.responseText;e&&console.log("ASCSDK","getMobileToken 服务器返回的data：",e);var t=JSON.parse(e);if(void 0===t||!t||!t.data)return console.log("ASCSDK","error : is not a json"),void a(!1);var i=t.data.token,n=t.data.userId;s.nickName=t.data.nickName,""==t.data.gender?s.gender="0":s.gender=t.data.gender,s.avatar=t.data.avatar,i&&void 0!==i&&n&&void 0!==n?(s.mobileToken=i,A.saveData("ServerUserId",n),a(!0)):(console.log("ASCSDK","注册失败"),a(!1)),s.userToken=i,s.userId=n,s.userType=1}},o.open("POST",n,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(i))}getSDKOnlineConfig(e){if(this.hasBeenInit)return void console.log("ASCSDK","重复初始化 return");this.hasBeenInit=!0;var t=`${z}/xmini-game-advert/mobile/advert/downAdConfigure?channelId=${X.channelId}`,a=this;let i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var t=i.responseText;if(!t)return void console.log("ASCSDK","初始化失败");if(a.pushAd)return;a.pushAd=!0,console.log("ASCSDK","downAdConfigure 下发广告data：",t);var s=JSON.parse(t);if(void 0===s||!s||!s.data)return void console.log("ASCSDK","error : is not a json");if(void 0!==s.data.mainSwitch){if(!s.data.mainSwitch)return void console.log("ASCSDK","广告开关没有开启")}var n=s.data.advertSwitch;void 0!==n.bannerSwitch&&(ne.getInstance().SW_SystemBannerSwitch=n.bannerSwitch),void 0!==n.intersSwitch&&(ve.getInstance().SW_SystemIntersSwitch=n.intersSwitch),void 0!==n.videoSwitch&&(G.getInstance().SW_VideoSwitch=n.videoSwitch),void 0!==n.nativeBigIntersSwitch&&(ce.getInstance().SW_NativeMainSwitch=n.nativeBigIntersSwitch),void 0!==n.nativeBannerSwitch&&(ne.getInstance().SW_NativeBannerSwitch=n.nativeBannerSwitch),void 0!==n.nativeIntersSwitch&&(ve.getInstance().SW_NativeIntersSwitch=n.nativeIntersSwitch),void 0!==n.boxSwitch&&(K.getInstance().SW_BoxSwitch=n.boxSwitch,q.getInstance().SW_BoxSwitch=n.boxSwitch);var o=s.data.advertIdentity;if(o.enableSwitch&&void 0!==o?(o.adBannerId&&(ne.getInstance().ID_BannerId=o.adBannerId),o.adIntersId&&(ve.getInstance().ID_SystemIntersId=o.adIntersId),o.adNativeId&&(ce.getInstance().ID_NativeID=o.adNativeId),o.adVideoId&&(G.getInstance().ID_VideoID=o.adVideoId),o.adBoxId&&(K.getInstance().ID_BoxID=o.adBoxId),o.adBrickId&&(W.getInstance().ID_BlockID=o.adBrickId)):console.log("ASCSDK","广告ID未启用=================="),null!=s.data.combineInters){var r=s.data.combineInters;void 0!==r&&null!=r.enableSwitch&&r.enableSwitch&&(ve.getInstance().NUM_NativeIntersPercent=r.nativeIntersRatio)}if(null!=s.data.dynamicNativeInters){var h=s.data.dynamicNativeInters;void 0!==h.intersSwitch&&null!=h.intersSwitch&&h.intersSwitch&&(ce.getInstance().NUM_NativeIntersReportFrequency=h.reportFrequency)}if(null!=s.data.baseControl){var l=s.data.baseControl;void 0!==l.bannerSwitch&&null!=l.bannerSwitch&&l&&(void 0!==l.refreshTime&&null!=l.refreshTime&&0!=l.refreshTime&&(ne.getInstance().NUM_BannerUpdateTime=l.refreshTime),void 0!==l.priority&&null!=l.priority&&l.priority&&"nativeBanner"==l.priority&&(ne.getInstance().SW_SystemBannerFirst=!1),void 0!==l.maxClose&&null!=l.maxClose&&0!=l.maxClose&&(ne.getInstance().NUM_BannerMostShowTimes=l.maxClose))}if(null!=s.data.baseControl){var c=s.data.baseControl;void 0!==c&&null!=c&&c&&(ve.getInstance().SW_IntersBaseControlSwitch=c.intersSwitch,void 0!==c.startNum&&null!=c.startNum&&0!=c.startNum&&(ve.getInstance().NUM_IntersStartNum=c.startNum),void 0!==c.intervalNum&&null!=c.intervalNum&&0!=c.intervalNum&&(ve.getInstance().NUM_IntersIntervalNum=c.intervalNum),void 0!==c.intervalTime&&null!=c.intervalTime&&0!=c.intervalTime&&(ve.getInstance().NUM_IntersIntervalTime=c.intervalTime),void 0!==c.delayEject&&null!=c.delayEject&&0!=c.delayEject&&(ve.getInstance().NUM_IntersDelayTime=c.delayEject),void 0!==c.delayProbability&&null!=c.delayProbability&&0!=c.delayProbability&&(ve.getInstance().NUM_IntersDelayPercent=c.delayProbability))}if(null!=s.data.baseControl){var d=s.data.baseControl;void 0!==d.originalSwitch&&null!=d.originalSwitch&&d.originalSwitch&&void 0!==d.originalRefreshTime&&null!=d.originalRefreshTime&&d.originalRefreshTime>0&&(ce.getInstance().NUM_NativeUpdateTime=d.originalRefreshTime)}if(null!=s.data.desktopSwitch){var g=s.data.desktopSwitch;void 0!==g.desktopIconSwitch&&null!=g.desktopIconSwitch&&g&&(O.getInstance().SW_DesktopSwitch=g.desktopIconSwitch),void 0!==g.activateDesktopIconSwitch&&null!=g.activateDesktopIconSwitch&&g&&(O.getInstance().SW_IntersToDesktop=g.activateDesktopIconSwitch),void 0!==g.autoAddDesktopNumber&&null!=g.autoAddDesktopNumber&&g.desktopIconSwitch&&g.activateDesktopIconSwitch&&0!=g.autoAddDesktopNumber&&(O.getInstance().NUM_DeskAutoMostTimes=g.autoAddDesktopNumber),void 0!==g.intersAddDesktopNumber&&null!=g.intersAddDesktopNumber&&g.activateDesktopIconSwitch&&0!=g.intersAddDesktopNumber&&(O.getInstance().NUM_IntersAddDesktopNumber=g.intersAddDesktopNumber)}(o.adBannerId||A.getPlatform()==w.GP_BL)&&ne.getInstance().createSystemBanner(),o.adIntersId&&ve.getInstance().createSystemInters(),o.adNativeId&&ce.getInstance().createNativeAd(),(o.adVideoId||A.getPlatform()==w.GP_BL)&&G.getInstance().createVideoAd(),o.adBoxId&&K.getInstance().createAppBox(),o.adBrickId&&W.getInstance().createBlock(),ve.getInstance().runIntersInterval(),A.getInstance().initSystemInfo(e)}},i.onerror=function(e){console.log("ASCSDK","err:"+JSON.stringify(e))},i.open("GET",t,!0),i.setRequestHeader("content-type","application/x-www-form-urlencoded"),i.setRequestHeader("Authorization",this.mobileToken),i.send(),A.getPlatform()==w.GP_Oppo||A.getPlatform()==w.GP_WX){var s=`${z}/xmini-game-advert/mobile/pushgame/downPushGames?channelId=${X.channelId}`,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var t=n.responseText;if(!t)return void console.log("ASCSDK","初始化失败");console.log("ASCSDK","下发互推data：",t);var i=JSON.parse(t);if(void 0===i||!i||!i.data)return void console.log("ASCSDK","error : is not a json");let r=!1;if(i.data.masterSwitch&&void 0!==i.data.masterSwitch&&(r=i.data.masterSwitch),!r)return a.isInitCompelete++,e&&2==a.isInitCompelete&&e(!0),void console.log("ASCSDK","互推开关没有开启");var s=i.data.pushSwitch;switch(void 0!==i.data.pushGameList&&(q.getInstance().navigateList=i.data.pushGameList,q.getInstance().loadNavigateList()),A.getPlatform()){case w.GP_Oppo:case w.GP_WX:s&&void 0!==s.iconSwitch&&(q.getInstance().SW_NavigateIconSwitch=s.iconSwitch,s.iconSwitch&&q.getInstance().createNavigateIcon()),s&&void 0!==s.listSwitch&&(q.getInstance().SW_NavigateGroupSwitch=s.listSwitch,s.listSwitch&&q.getInstance().createNavigateGroup()),s&&void 0!==s.settleSwitch&&(q.getInstance().SW_NavigateSettleSwitch=s.settleSwitch,s.settleSwitch&&q.getInstance().createNavigateSettle())}var o=i.data.statisSwitch;o&&void 0!==o&&(a.statisSwitch=o),a.isInitCompelete++,e&&2==a.isInitCompelete&&e(!0)}},n.open("GET",s,!0),n.setRequestHeader("Authorization",this.mobileToken),n.send()}}statistics(e){if(this.statisSwitch){var t=`${z}/xmini-game-user/mobile/pushdata/collectAdPush?channelId=${X.channelId}&pushGamePackage=${e.pushGamePackage}`,a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=a.responseText;e&&console.log("ASCSDK","互推统计数据:"+e)}},a.open("POST",t,!0),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("Authorization",this.mobileToken),a.send()}}getUserData(e){console.log("ASCSDK","getUserData====================="),this.userData={userId:this.userId,token:this.userToken,userType:this.userType},e(this.userData)}getUserInfo(e){console.log("ASCSDK","getUserInfo====================="),this.userInfo={head:"",name:"",sex:"",city:"",province:"",country:"",power:!1};let t=this;switch(A.getPlatform()){case w.GP_Tiktok:1==t.userType?tt.getUserInfo({success(a){console.log("ASCSDK","用户授权成功"),t.userInfo.head=a.userInfo.avatarUrl,t.userInfo.name=a.userInfo.nickName,1==a.userInfo.gender?t.userInfo.sex="M":2==a.userInfo.gender?t.userInfo.sex="F":t.userInfo.sex="0",t.userInfo.city=a.userInfo.city,t.userInfo.province=a.userInfo.province,t.userInfo.country=a.userInfo.country,t.userInfo.power=!0,A.saveData("avatarUrl",t.userInfo.head),A.saveData("nickName",t.userInfo.name),A.saveData("gender",t.userInfo.sex),e(t.userInfo)},fail(a){console.log("ASCSDK","用户拒绝授权"),t.userInfo.power=!1,e(t.userInfo)}}):e(t.userInfo);break;case w.GP_Oppo:t.userInfo.head=t.avatar,t.userInfo.name=t.nickName,t.userInfo.sex=t.gender,t.userInfo.power=!0,e(t.userInfo);break;case w.GP_KS:kwaigame.authorize({scope:"Scope.userInfo",success:()=>{console.log("ASCSDK","授权获取用户信息成功")},fail:e=>{console.log("ASCSDK","授权获取用户信息失败: "+JSON.stringify(e))},complete:()=>{console.log("ASCSDK","授权获取用户信息完成")}}),kwaigame.getUserInfo({success:a=>{console.log("ASCSDK","获取用户信息成功："+JSON.stringify(a)),t.userInfo.head=a.userHead,t.userInfo.name=a.userName,t.userInfo.sex=a.gender,t.userInfo.power=!0,A.saveData("avatarUrl",t.userInfo.head),A.saveData("nickName",t.userInfo.name),A.saveData("gender",t.userInfo.sex),e(t.userInfo)},fail:a=>{console.log("ASCSDK","获取用户信息失败: "+JSON.stringify(a)),t.userInfo.power=!1,e(t.userInfo)},complete:()=>{console.log("ASCSDK","获取用户信息完成")}});break;case w.GP_HW:hbs.authorize({scope:"userInfo",params:{appid:p.APPID,type:"token",scope:"scope.baseProfile",state:"200"},success:function(a){console.log("ASCSDK","HW authorize success",a),t.userInfo.name=a.nickname,null!=a.avatar.default&&(t.userInfo.head=a.avatar.default),t.userInfo.power=!0,A.saveData("avatarUrl",t.userInfo.head),A.saveData("nickName",t.userInfo.name),e(t.userInfo)},fail:function(){console.log("ASCSDK","HW authorize fail"),t.userInfo.power=!1,e(t.userInfo)}});break;case w.GP_BL:bl.getUserInfo({success(a){console.log("ASCSDK","BL 授权获取用户信息成功",a),t.userInfo.head=a.userInfo.avatarUrl,t.userInfo.name=a.userInfo.nickname,t.userInfo.country=a.userInfo.country,t.userInfo.province=a.userInfo.province,t.userInfo.city=a.userInfo.city,1==a.userInfo.gender?t.userInfo.sex="M":2==a.userInfo.gender?t.userInfo.sex="F":t.userInfo.sex="0",t.userInfo.power=!0,A.saveData("avatarUrl",t.userInfo.head),A.saveData("nickName",t.userInfo.name),A.saveData("gender",t.userInfo.sex),e(t.userInfo)},fail(e){console.log("ASCSDK","BL 授权获取用户信息失败",e),t.userInfo.power=!1}});break;case w.GP_Test:default:e(t.userInfo)}}mustLogin(e){let t=this;switch(this.mustLoginCallback=e,A.getPlatform()){case w.GP_Tiktok:let a={channelId:X.channelId,signParam:{code:"",nickName:A.getData("nickName",""),avatar:A.getData("avatarUrl",""),gender:A.getData("gender","0")},userId:this.userId};tt.login({success(e){console.log("ASCSDK","Tiktok 登录成功："+JSON.stringify(e)),a.signParam.code=e.code,t.sendRequestToServe(`${z}/xmini-game-user/mobile/login/getMobileToken`,"POST",a)},fail(t){console.log("ASCSDK","Tiktok 登录失败"),e(!1)}})}}sendRequestToServe(e,t,a){var i=this;let s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=s.responseText;e&&console.log("ASCSDK","getMobileToken 服务器返回的参数：",e);var t=JSON.parse(e);if(void 0===t||!t||!t.data)return console.log("ASCSDK","error : is not a json"),void i.mustLoginCallback(!1);i.userToken=t.data.token,i.userId=t.data.userId,i.userType=1,A.saveData("ServerUserId",i.userId),i.mustLoginCallback(!0)}},s.open(t,e,!0),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify(a))}GetNetSDKConfig(e){let t=X.remoteConfigName;switch(A.getPlatform()){case w.GP_Vivo:t+="/vivo";break;case w.GP_Oppo:t+="/oppo";break;case w.GP_Tiktok:t+="/tiktok";break;case w.GP_Test:t+="/vivo"}let a=p.ossUrl+"/SdkConfig/"+t+"/sdkConfig.json",i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){if(this.isGetRemote)return;this.isGetRemote=!0;var t=i.responseText;console.log("AD","获得远端客户端配置参数"+JSON.stringify(t));let a=JSON.parse(t);this.SetSDKConfig(a,e);let s={switch:a.switch,ratio:a.ratio,times:a.times};A.getInstance().setCtrlData(s)}}.bind(this),i.addEventListener("error",e=>{console.log("AD","远程配置加载失败",JSON.stringify(e))}),i.open("GET",a,!0),i.setRequestHeader("Cache-Control","no-cache"),i.send()}GetNetPrivacyConfig(e){if(-1==X.remoteConfigName.indexOf("_"))return;let t=p.ossUrl+"/Privacy/PrivacyPolicy.json",a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var t=a.responseText;let i=JSON.stringify(t).split(":")[1].replace(/[\\n]{3}/g,"\n"),s=i.indexOf('"'),n=i.lastIndexOf('"');i=i.substring(s+1,n-s-5),console.log("AD","获得隐私政策内容"+i),oe.getInstance().privacyStr=i,e&&e()}}.bind(this),a.addEventListener("error",e=>{console.log("AD","远程配置加载失败",JSON.stringify(e))}),a.open("GET",t,!0),a.setRequestHeader("Cache-Control","no-cache"),a.send()}SetSDKConfig(e,t){ne.getInstance().SW_SystemBannerSwitch=e.SW_SystemBannerSwitch,ve.getInstance().SW_SystemIntersSwitch=e.SW_SystemIntersSwitch,ve.getInstance().SW_IsAllInterOpen=e.SW_IsAllInterOpen,G.getInstance().SW_VideoSwitch=e.SW_VideoSwitch,ce.getInstance().SW_NativeMainSwitch=e.SW_NativeMainSwitch,ne.getInstance().SW_NativeBannerSwitch=e.SW_NativeBannerSwitch,ve.getInstance().SW_NativeIntersSwitch=e.SW_NativeIntersSwitch,H.getInstance().SW_NativeCustomSwitch=e.SW_NativeCustomSwitch,K.getInstance().SW_BoxSwitch=e.SW_BoxSwitch,ne.getInstance().ID_BannerId=e.ID_BannerId,ve.getInstance().ID_SystemIntersId=e.ID_SystemIntersId,ce.getInstance().ID_NativeID=e.ID_NativeID,G.getInstance().ID_VideoID=e.ID_VideoID,H.getInstance().ID_NativeCustomId=e.ID_NativeCustomId,K.getInstance().ID_BoxBannerID=e.ID_BoxBannerID,K.getInstance().ID_BoxPortalID=e.ID_BoxPortalID,K.getInstance().ID_BoxID=e.ID_BoxID,W.getInstance().ID_BlockID=e.ID_BlockID,ve.getInstance().NUM_NativeIntersPercent=e.NUM_NativeIntersPercent,ce.getInstance().NUM_NativeIntersReportFrequency=e.NUM_NativeIntersReportFrequency,ne.getInstance().NUM_BannerUpdateTime=e.NUM_BannerUpdateTime,ne.getInstance().SW_SystemBannerFirst=e.SW_SystemBannerFirst,ne.getInstance().NUM_BannerMostShowTimes=e.NUM_BannerMostShowTimes,ve.getInstance().SW_IntersBaseControlSwitch=e.SW_IntersBaseControlSwitch,ve.getInstance().NUM_IntersStartNum=e.NUM_IntersStartNum,ve.getInstance().NUM_IntersIntervalNum=e.NUM_IntersIntervalNum,ve.getInstance().NUM_IntersIntervalTime=e.NUM_IntersIntervalTime,ve.getInstance().NUM_IntersDelayTime=e.NUM_IntersDelayTime,ve.getInstance().NUM_IntersDelayPercent=e.NUM_IntersDelayPercent,O.getInstance().SW_DesktopSwitch=e.SW_DesktopSwitch,O.getInstance().SW_IntersToDesktop=e.SW_IntersToDesktop,O.getInstance().NUM_DeskAutoMostTimes=e.NUM_DeskAutoMostTimes,O.getInstance().NUM_IntersAddDesktopNumber=e.NUM_IntersAddDesktopNumber,oe.getInstance().isPrivacy=e.SW_Privacy,ce.getInstance().IsOpenNative=e.IsOpenNative,A.getPlatform()!=w.GP_Test&&(e.ID_BannerId&&ne.getInstance().createSystemBanner(),e.ID_SystemIntersId&&ve.getInstance().createSystemInters(),e.IsOpenNative&&e.ID_NativeID&&ce.getInstance().createNativeAd(),e.ID_VideoID&&G.getInstance().createVideoAd(),e.ID_NativeCustomId&&H.getInstance().createNativeCustom(),e.ID_BoxBannerID&&K.getInstance().createAppBox(0),e.ID_BoxPortalID&&K.getInstance().createAppBox(1),e.adBoxId&&K.getInstance().createAppBox(),e.adBrickId&&W.getInstance().createBlock()),ve.getInstance().runIntersInterval(),A.getInstance().initSystemInfo(t)}}class J{constructor(){this.navigateBg=null,this.navigateInfom=null,this.NavigateBanner=null,this.NavigateBannerUITextures=null,this.isLoadNavigateBanner=!1,this.NavigatePortalUITextures=null,this.layerBg=null,this.isLoadNavigatePortal=!1}static getInstance(){return J.instance||(J.instance=new J),J.instance}showNavigateIcon(e,t,a,i){if(this.navigateBg)return void console.log("ASCSDK","已存在互推ICON return");console.log("ASCSDK","showNavigateIcon===========================");let s=oe.getInstance(),n=this;this.navigateBg=new Laya.Sprite,this.navigateBg.width=e,this.navigateBg.height=t,this.navigateBg.x=a,this.navigateBg.y=i,this.navigateBg.on("click",this,function(){n.jumpToMiniGame(n.navigateInfom)}),Laya.stage.addChild(this.navigateBg),this.navigateBg.zOrder=29999;var o=new Laya.Sprite;o.width=.84*this.navigateBg.width,o.height=.84*this.navigateBg.height,this.navigateBg.addChild(o);var r=new Laya.Sprite;r.loadImage(s.navigateUITextures.moreGameTexture),r.width=.84*this.navigateBg.width,r.height=.19*this.navigateBg.height,r.x=0,r.y=.65*t,r.zOrder=20,o.addChild(r);var h=new Laya.Sprite;h.loadImage(s.navigateUITextures.maskTexture,Laya.Handler.create(this,function(){o.mask=h})),h.width=.84*e,h.height=.84*t,h.x=0,h.y=0;let l=0;var c=function(){if(n.navigateBg){var a=n.updateNavigateIcon();o.loadImage(a),o.scale(e/n.navigateBg.width*.84,t/n.navigateBg.height*.84)}};l=setInterval(c,3e4),c()}updateNavigateIcon(){console.log("ASCSDK","updateNavigateIcon===========================");for(var e=q.getInstance().navigateList,t=0,a=0;a<e.length;a++)e[a].sort>0&&(t+=e[a].sort);var i=Math.floor(Math.random()*t),s=0;let n=null,o=0;for(let t=0;t<e.length;t++)0!=e[t].sort&&(i>=s&&i<s+e[t].sort&&(n=e[t],o=t,console.log("ASCSDK","weight",i,e[t].pushGamePackage)),s+=e[t].sort);if(n)return this.navigateInfom=n,oe.getInstance().NavigateIconTextureList[o]}hideNavigateIcon(){oe.getInstance().navigateIconTimeInterval&&clearInterval(oe.getInstance().navigateIconTimeInterval),this.navigateBg?(console.log("ASCSDK","hideNavigateIcon==========================="),Laya.stage.removeChild(this.navigateBg),this.navigateBg=null):console.log("ASCSDK","不存在互推ICON return")}createNavigateBanner(){console.log("ASCSDK","WX 开始加载互推横幅资源");var e=this;this.NavigateBannerUITextures={navigateBanner:null};var t=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateSettleRes/navigateBanner.png"];Laya.loader.load(t,Laya.Handler.create(this,function(){e.NavigateBannerUITextures.navigateBanner=t[0],e.isLoadNavigateBanner=!0,console.log("ASCSDK","WX 互推横幅资源加载成功")}))}showNavigateBanner(){if(!this.isLoadNavigateBanner)return void console.log("ASCSDK","WX 互推横幅资源未加载完成");if(this.NavigateBanner)return void console.log("ASCSDK","WX 已存在互推横幅");let e=q.getInstance().navigateList;if(e.length<5)return void console.log("ASCSDK","WX 互推样式的游戏数量小于5个 return");ne.getInstance().hideBanner(),console.log("ASCSDK","showNavigateBanner================");var t=[];for(let a=0;a<e.length;a++)t[a]=e[a],t[a].index=a;var a=function(){for(var e=0,a=0;a<t.length;a++)e+=t[a].sort;var i=Math.floor(Math.random()*e),s=0;for(let e=0;e<t.length;e++){if(i>=s&&i<s+t[e].sort){var n=t[e];return t.splice(e,1),n}s+=t[e].sort}};let i=this;this.NavigateBanner=new Laya.Sprite,this.NavigateBanner.loadImage(this.NavigateBannerUITextures.navigateBanner),Laya.stage.width<Laya.stage.height?(this.NavigateBanner.width=Laya.stage.width,this.NavigateBanner.height=13*this.NavigateBanner.width/35):(this.NavigateBanner.height=.4*Laya.stage.height,this.NavigateBanner.width=35*this.NavigateBanner.height/13),this.NavigateBanner.x=(Laya.stage.width-this.NavigateBanner.width)/2,this.NavigateBanner.y=Laya.stage.height-this.NavigateBanner.height,Laya.stage.addChild(this.NavigateBanner);for(let e=0;e<5;e++){let t=a(),s=new Laya.Sprite;s.loadImage(oe.getInstance().NavigateIconTextureList[t.index]),s.width=this.NavigateBanner.width/6.5,s.height=s.width,s.x=this.NavigateBanner.width/25+this.NavigateBanner.width/5.25*e,s.y=this.NavigateBanner.height/2.8,this.NavigateBanner.addChild(s);let n=new Laya.Label;n.color="#000000";let o=t.pushGameName;t.pushGameName.length>4&&(o=o.substring(0,4)+"..."),n.text=o,n.fontSize=30,n.align="center",n.valign="middle",n.overflow="scroll",n.width=s.width,n.height=.4*s.height,n.x=0,n.y=s.height,s.addChild(n),s.on("click",this,function(){i.jumpToMiniGame(t)})}}hideNavigateBanner(){console.log("ASCSDK","hideNavigateBanner================"),this.NavigateBanner&&(this.NavigateBanner.removeSelf(),this.NavigateBanner=null)}createNavigatePortal(){console.log("ASCSDK","WX 开始加载互推九宫格资源");var e=this;this.NavigatePortalUITextures={layerBg:null,navigatePortal:null,navigatePortalClose:null};var t=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateBox/layerBg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateBox/NavigatePortal.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateBox/NavigatePortalClose.png"];Laya.loader.load(t,Laya.Handler.create(this,function(){e.NavigatePortalUITextures.layerBg=t[0],e.NavigatePortalUITextures.navigatePortal=t[1],e.NavigatePortalUITextures.navigatePortalClose=t[2],e.isLoadNavigatePortal=!0,console.log("ASCSDK","WX 互推九宫格资源加载成功")}))}showNavigatePortal(){if(!this.isLoadNavigatePortal)return void console.log("ASCSDK","WX 互推九宫格资源未加载完成");if(this.layerBg)return void console.log("ASCSDK","WX 已存在互推横幅");let e=q.getInstance().navigateList;if(e.length<9)return void console.log("ASCSDK","WX 互推样式的游戏数量小于9个 return");console.log("ASCSDK","showNavigatePortal================");var t=[];for(let a=0;a<e.length;a++)t[a]=e[a],t[a].index=a;var a=function(){for(var e=0,a=0;a<t.length;a++)e+=t[a].sort;var i=Math.floor(Math.random()*e),s=0;for(let e=0;e<t.length;e++){if(i>=s&&i<s+t[e].sort){var n=t[e];return t.splice(e,1),n}s+=t[e].sort}};let i=this;this.layerBg=new Laya.Sprite,this.layerBg.loadImage(this.NavigatePortalUITextures.layerBg),this.layerBg.width=Laya.stage.width,this.layerBg.height=Laya.stage.height,this.layerBg.zOrder=30003,this.layerBg.alpha=.8,Laya.stage.addChild(this.layerBg),this.layerBg.on("click",this,function(){});let s=new Laya.Sprite;s.loadImage(this.NavigatePortalUITextures.navigatePortal),s.width=780,s.height=942,s.x=this.layerBg.width/2-s.width/2,s.y=this.layerBg.height/2-s.height/2,this.layerBg.addChild(s);let n=new Laya.Sprite;n.loadImage(this.NavigatePortalUITextures.navigatePortalClose),n.width=50,n.height=50,n.x=s.width-1.5*n.width,n.y=s.height/2-n.height/2-12*s.height/32+n.height/2,s.addChild(n),n.on("click",this,function(){console.log("ASCSDK","用户手动关闭互推九宫格"),i.layerBg.removeSelf(),i.layerBg=null});for(let e=0;e<9;e++){let t=a(),n=new Laya.Sprite;n.loadImage(oe.getInstance().NavigateIconTextureList[t.index]),n.width=s.width/5,n.height=n.width,n.x=s.width/2-n.width/2-240+e%3*240,n.y=s.height/2+n.height/6+180-240*Math.floor(e/3),s.addChild(n);let o=new Laya.Label;o.color="#000000",o.text=t.pushGameName,o.fontSize=30,o.align="center",o.valign="middle",o.overflow="scroll",o.width=n.width,o.height=.234*n.height+20,o.x=0,o.y=n.height,n.addChild(o),n.on("click",this,function(){i.jumpToMiniGame(t)})}}jumpToMiniGame(e){console.log("ASCSDK","WX jumpToMiniGame==========================="),wx.navigateToMiniProgram({appId:e.pushGamePackage,path:"?foo=bar",success(t){Q.getInstance().statistics(e),console.log("ASCSDK","WX 跳转成功")},fail(e){console.log("ASCSDK","WX 跳转失败："+JSON.stringify(e))}})}}class q{constructor(){this.SW_BoxSwitch=!1,this.gameBannerAd=null,this.isLoadNavigateBoxBanner=!1,this.gamePortalAd=null,this.isLoadNavigateBoxPortal=!1,this.hasShowBanner=!1,this.SW_NavigateIconSwitch=!1,this.SW_NavigateGroupSwitch=!1,this.SW_NavigateSettleSwitch=!1,this.navigateList=[],this.isNavigateIconShow=!1,this.isNavigateGroupShow=!1,this.isNavigateSettleShow=!1}static getInstance(){return q.instance||(q.instance=new q),q.instance}createNavigateIcon(){this.SW_NavigateIconSwitch?oe.getInstance().loadNavigateIconRes():console.log("ASCSDK","互推ICON开关未开启")}getNavigateIconFlag(){return A.getPlatform()==w.GP_Test||oe.getInstance().isLoadNavigateIcon&&!this.isNavigateIconShow&&oe.getInstance().isLoadNavigateList}showNavigateIcon(e,t,a,i){A.getPlatform()!=w.GP_Test?this.SW_NavigateIconSwitch?(this.isNavigateIconShow=!0,oe.getInstance().showNavigateIcon(e,t,a,i)):console.log("ASCSDK","互推ICON开关未开启"):_.getInstance().showNavigateIcon(e,t,a,i)}hideNavigateIcon(){A.getPlatform()!=w.GP_Test?(this.isNavigateIconShow=!1,oe.getInstance().hideNavigateIcon()):_.getInstance().hideNavigateIcon()}createNavigateGroup(){this.SW_NavigateGroupSwitch?oe.getInstance().loadNavigateGroup():console.log("ASCSDK","互推列表开关未开启")}getNavigateGroupFlag(){return A.getPlatform()==w.GP_Test?(console.log("ASCSDK","Test 没有测试互推列表============"),!1):oe.getInstance().isLoadNavigateGroup&&!this.isNavigateGroupShow&&oe.getInstance().isLoadNavigateList}showNavigateGroup(e,t){A.getPlatform()!=w.GP_Test?this.SW_NavigateGroupSwitch?(this.isNavigateGroupShow=!0,oe.getInstance().showNavigateGroup(e,t)):console.log("ASCSDK","互推列表开关未开启"):console.log("ASCSDK","Test 没有测试互推列表============")}hideNavigateGroup(){A.getPlatform()!=w.GP_Test?(this.isNavigateGroupShow=!1,oe.getInstance().hideNavigateGroup()):console.log("ASCSDK","Test 没有测试互推列表============")}createNavigateSettle(){this.SW_NavigateSettleSwitch?oe.getInstance().loadNavigateSettleRes():console.log("ASCSDK","结算互推开关未开启")}getNavigateSettleFlag(){return A.getPlatform()==w.GP_Test||oe.getInstance().isLoadNavigateSettle&&!this.isNavigateSettleShow&&oe.getInstance().isLoadNavigateList}showNavigateSettle(e,t,a){if(A.getPlatform()==w.GP_Test)return this.isNavigateSettleShow=!0,void _.getInstance().showNavigateSettle(e,t,a);this.SW_NavigateSettleSwitch?(this.isNavigateSettleShow=!0,oe.getInstance().showNavigateSettle(e,t,a)):console.log("ASCSDK","结算互推开关未开启")}hideNavigateSettle(){if(A.getPlatform()==w.GP_Test)return this.isNavigateSettleShow=!1,void _.getInstance().hideNavigateSettle();this.isNavigateSettleShow=!1,oe.getInstance().hideNavigateSettle()}loadNavigateList(){this.navigateList?oe.getInstance().loadNavigateList():console.log("ASCSDK","互推列表加载出错")}createNavigateBoxBanner(e){if(!this.SW_BoxSwitch)return void console.log("ASCSDK","OPPO 互推盒子广告开关未开启");if(qg.getSystemInfoSync().platformVersionCode<1076)return void console.log("ASCSDK","OPPO 版本较低,不支持互推盒子广告");console.log("ASCSDK","OPPO 互推盒子横幅广告初始化",e),this.gameBannerAd=qg.createGameBannerAd({adUnitId:e}),this.isLoadNavigateBoxBanner=!0;let t=this;this.gameBannerAd.onError(function(e){t.isLoadNavigateBoxBanner=!1,console.log("ASCSDK","OPPO 互推盒子横幅广告出错:",JSON.stringify(e))})}getNavigateBoxBannerFlag(){switch(A.getPlatform()){case w.GP_Test:return!0;case w.GP_Oppo:return this.isLoadNavigateBoxBanner;case w.GP_WX:return J.getInstance().isLoadNavigateBanner;default:return!1}}showNavigateBoxBanner(){return A.getPlatform()==w.GP_Test?(this.isNavigateSettleShow=!0,void _.getInstance().showNavigateBoxBanner()):A.getPlatform()==w.GP_WX?(this.isNavigateSettleShow=!0,void J.getInstance().showNavigateBanner()):void(this.SW_BoxSwitch?A.getPlatform()==w.GP_Oppo?this.isLoadNavigateBoxBanner?(console.log("ASCSDK","showNavigateBoxBanner====================="),this.isNavigateSettleShow=!0,this.gameBannerAd?(ne.getInstance().hideBanner(),this.gameBannerAd.show()):console.log("ASCSDK","OPPO 不存在互推盒子横幅广告实例")):console.log("ASCSDK","OPPO 互推盒子横幅广告未加载完成"):console.log("ASCSDK","非OPPO平台,不能展示互推盒子横幅广告"):console.log("ASCSDK","OPPO 互推盒子广告开关未开启"))}hideNavigateBoxBanner(){this.isNavigateSettleShow=!1,A.getPlatform()!=w.GP_Test?A.getPlatform()!=w.GP_WX?this.gameBannerAd?(console.log("ASCSDK","hideNavigateBoxBanner====================="),this.gameBannerAd.hide()):console.log("ASCSDK","OPPO 不存在互推盒子横幅广告实例"):J.getInstance().hideNavigateBanner():_.getInstance().hideNavigateBoxBanner()}createNavigateBoxPortal(e){if(!this.SW_BoxSwitch)return void console.log("ASCSDK","OPPO 互推盒子广告开关未开启");if(qg.getSystemInfoSync().platformVersionCode<1076)return void console.log("ASCSDK","OPPO 版本较低,不支持互推盒子广告");console.log("ASCSDK","OPPO 互推盒子九宫格广告初始化",e),this.gamePortalAd=qg.createGamePortalAd({adUnitId:e});let t=this;this.gamePortalAd.onLoad(function(){console.log("ASCSDK","OPPO 互推盒子九宫格广告加载完成"),t.isLoadNavigateBoxPortal=!0}),this.gamePortalAd.onError(function(e){console.log("ASCSDK","OPPO 互推盒子九宫格广告出错:",JSON.stringify(e)),t.isLoadNavigateBoxPortal=!1,setTimeout(()=>{t.gamePortalAd.load()},2e4)}),this.gamePortalAd.onClose(function(){console.log("ASCSDK","OPPO 互推盒子九宫格广告关闭"),t.gamePortalAd.load(),t.hasShowBanner&&ne.getInstance().showBanner()}),this.gamePortalAd.load()}getNavigateBoxPortalFlag(){switch(A.getPlatform()){case w.GP_Test:return!0;case w.GP_Oppo:return this.isLoadNavigateBoxPortal;case w.GP_WX:return J.getInstance().isLoadNavigatePortal;default:return!1}}showNavigateBoxPortal(){A.getPlatform()!=w.GP_Test?A.getPlatform()!=w.GP_WX?this.SW_BoxSwitch?A.getPlatform()==w.GP_Oppo?this.isLoadNavigateBoxPortal?(console.log("ASCSDK","showNavigateBoxPortal====================="),this.gamePortalAd?(this.hasShowBanner=ne.getInstance().hasShowBanner,ne.getInstance().hideBanner(),this.gamePortalAd.show()):console.log("ASCSDK","OPPO 不存在互推盒子九宫格广告实例")):console.log("ASCSDK","OPPO 互推盒子九宫格广告未加载完成"):console.log("ASCSDK","非OPPO平台,不能展示互推盒子九宫格广告"):console.log("ASCSDK","OPPO 互推盒子广告开关未开启"):J.getInstance().showNavigatePortal():_.getInstance().showNavigateBoxPortal()}}class Y{constructor(){this.bannerAd=null,this.systemBannerOnShow=!1}static getInstance(){return Y.instance||(Y.instance=new Y),Y.instance}createSystemBanner(e){if(e){console.log("ASCSDK","OPPO Banner广告初始化",e);var t=this;this.bannerAd=qg.createBannerAd({adUnitId:e,style:{}}),ne.getInstance().isLoadSystemeBanner=!0,this.bannerAd.onLoad(function(){t.systemBannerOnShow=!0,console.log("ASCSDK","OPPO 系统banner展示中===================")}),this.bannerAd.onError(function(e){console.log("ASCSDK","OPPO 系统banner加载失败：",JSON.stringify(e)),"adItemList is null."==e.msg&&(ne.getInstance().isLoadSystemeBanner=!1,t.hideSystemBanner(),ne.getInstance().showBanner())}),this.bannerAd.onHide(function(){console.log("ASCSDK","OPPO 系统banner关闭",ne.getInstance().NUM_BannerUpdateTime+"S之后再次刷新"),t.systemBannerOnShow=!1,ne.getInstance().updateBanner()})}else console.log("ASCSDK","OPPO bannerId为空")}showSystemBanner(){q.getInstance().isNavigateSettleShow?console.log("ASCSDK","OPPO 正在展示结算互推 return"):(console.log("ASCSDK","OPPO showSystemBanner ========================"),this.bannerAd.show())}updateSytemBanner(){q.getInstance().isNavigateSettleShow?console.log("ASCSDK","OPPO 正在展示结算互推 return"):(console.log("ASCSDK","OPPO updateSystemBanner ========================"),this.bannerAd.show())}hideSystemBanner(){this.bannerAd?(console.log("ASCSDK","OPPO hideSystemBanner ========================"),this.bannerAd.offHide(),this.bannerAd.hide(),this.systemBannerOnShow=!1):console.log("ASCSDK","OPPO 不存在系统banner")}}class j{constructor(){this.bannerAd=null,this.systemBannerOnShow=!1,this.updateSytemBannerTmt=null}static getInstance(){return j.instance||(j.instance=new j),j.instance}createSystemBanner(e){if(!e)return void console.log("ASCSDK","VIVO bannerId为空");console.log("ASCSDK","VIVO Banner广告初始化",e),this.bannerAd=qg.createBannerAd({posId:e,style:{}}),this.bannerAd.onLoad(function(){ne.getInstance().isLoadSystemeBanner=!0,console.log("ASCSDK","VIVO 系统banner加载成功")});let t=this;this.bannerAd.onError(function(e){console.log("ASCSDK","VIVO 系统banner加载失败：",JSON.stringify(e)),30007==e.errCode&&(console.log("ASCSDK","VIVO 系统banner广告播放次数已达限制"),ne.getInstance().isLoadSystemeBanner=!1,t.hideSystemBanner(),ne.getInstance().showBanner())}),this.bannerAd.onClose(function(){console.log("ASCSDK","VIVO 系统banner关闭",ne.getInstance().NUM_BannerUpdateTime+"S之后再次刷新"),ne.getInstance().bannerClose(),ne.getInstance().updateBanner()})}showSystemBanner(){this.bannerAd?(console.log("ASCSDK","VIVO showSystemBanner ========================"),this.systemBannerOnShow=!0,this.bannerAd.show()):(this.createSystemBanner(ne.getInstance().ID_BannerId),this.updateSytemBannerTmt=setTimeout(()=>{this.systemBannerOnShow=!0,this.bannerAd.show()},2e3))}updateSytemBanner(){let e=this;this.bannerAd?(console.log("ASCSDK","VIVO 刷新系统banner ========================"),this.bannerAd.offClose(),this.bannerAd.offError(),this.bannerAd.offLoad(),this.bannerAd.destroy(),this.createSystemBanner(ne.getInstance().ID_BannerId),this.updateSytemBannerTmt=setTimeout(()=>{e.systemBannerOnShow=!0,e.bannerAd.show()},2e3)):console.log("ASCSDK","VIVO 不存在系统banner")}hideSystemBanner(){this.updateSytemBannerTmt&&clearTimeout(this.updateSytemBannerTmt),this.bannerAd?(console.log("ASCSDK","VIVO hideSystemBanner ========================"),this.bannerAd.offClose(),this.bannerAd.offError(),this.bannerAd.offLoad(),this.bannerAd.destroy(),this.systemBannerOnShow=!1):console.log("ASCSDK","VIVO 不存在系统banner")}}class Z{constructor(){this.bannerUI=null,this.bannerFakeBg=null}static getInstance(){return Z.instance||(Z.instance=new Z),Z.instance}createBanner(){}showBanner(){if(this.bannerFakeBg)return void console.log("ASCSDK","Test 已存在测试Banner return");console.log("ASCSDK","Test showBanner====================");var e=this;let t=[p.ossUrl+"/SDK/SDKImage_1_0/TestRes/FakeNativeBannerBg.png"];Laya.loader.load(t,Laya.Handler.create(this,function(){e.bannerUI=t[0],this.bannerFakeBg=new Laya.Sprite,this.bannerFakeBg.loadImage(this.bannerUI),Laya.stage.width<Laya.stage.height?(this.bannerFakeBg.width=Laya.stage.width,this.bannerFakeBg.height=.18*Laya.stage.height):(this.bannerFakeBg.width=Laya.stage.width/2,this.bannerFakeBg.height=.18*Laya.stage.height),this.bannerFakeBg.y=Laya.stage.height-this.bannerFakeBg.height,Laya.stage.addChild(this.bannerFakeBg),this.bannerFakeBg.zOrder=3e4}))}hideBanner(){this.bannerFakeBg?(console.log("ASCSDK","Test hideBanner=================="),this.bannerFakeBg.removeSelf(),this.bannerFakeBg=null):console.log("ASCSDK","Test 不存在测试banner return")}}class ${constructor(){this.nativeAd=null,this.nativeInfo=null,this.nativeContent=null,this.isLoadIconNative=!1,this.isLoadImageNative=!1}static getInstance(){return $.instance||($.instance=new $),$.instance}createNativeAd(e){console.log("ASCSDK","VIVO 加载原生广告",e),this.nativeAd=qg.createNativeAd({posId:e}),this.nativeInfo={adId:null,title:"特别惊喜",desc:"点我一下可不可以啊",clickBtnTxt:null,Native_icon:null,Native_BigImage:null},this.nativeContent={adId:null,title:null,desc:null,Native_icon:null,Native_BigImage:null,NativeAdTip:"https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeIconRes/ICONAd.png",NativeClose:"https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeBannerRes/nativeBannerClose.png"};var t=this;this.nativeAd.onLoad(function(e){console.log("ASCSDK","VIVO 原生广告加载成功",JSON.stringify(e.adList));let a=0;null!=typeof e.adList&&0!=e.adList.length?(a=e.adList.length-1,console.log("ASCSDK","第"+a+"个原生广告:"+JSON.stringify(e.adList[a])),""!=e.adList[a].icon&&0!=e.adList[a].imgUrlList.length?console.log("ASCSDK","VIVO 同时存在原生ICON和大图"):console.log("ASCSDK","VIVO 只存在原生ICON或大图"),t.nativeInfo.adId=String(e.adList[a].adId),t.nativeInfo.title=String(e.adList[a].title),t.nativeInfo.desc=String(e.adList[a].desc),t.nativeInfo.clickBtnTxt=String(e.adList[a].clickBtnTxt),t.nativeContent.adId=String(e.adList[a].adId),t.nativeContent.title=String(e.adList[a].title),t.nativeContent.desc=String(e.adList[a].desc),""!=e.adList[a].icon?(Laya.loader.load([{url:String(e.adList[a].icon),type:Laya.Loader.IMAGE}],Laya.Handler.create(this,function(){console.log("ASCSDK","VIVO 原生ICON加载成功"),t.nativeInfo.Native_icon=String(e.adList[a].icon),t.isLoadIconNative=!0})),t.nativeContent.Native_icon=String(e.adList[a].icon)):(t.nativeInfo.Native_icon=null,t.isLoadIconNative=!1),0!=e.adList[a].imgUrlList.length?(Laya.loader.load([{url:String(e.adList[a].imgUrlList[0]),type:Laya.Loader.IMAGE}],Laya.Handler.create(this,function(){console.log("ASCSDK","VIVO 原生大图加载成功"),t.nativeInfo.Native_BigImage=String(e.adList[a].imgUrlList[0]),t.isLoadImageNative=!0})),t.nativeContent.Native_BigImage=String(e.adList[a].imgUrlList[0])):(t.nativeInfo.Native_BigImage=null,t.isLoadImageNative=!1)):console.log("ASCSDK","VIVO 原生广告列表为空 return")}),this.nativeAd.onError(e=>{console.log("ASCSDK","VIVO 原生广告加载失败："+JSON.stringify(e))}),this.nativeAd.load()}showNativeBanner(){oe.getInstance().showNativeBannerUI(this.nativeInfo)}updateNativeBanner(){oe.getInstance().hideNativeBannerUI(),oe.getInstance().showNativeBannerUI(this.nativeInfo)}hideNativeBaner(){oe.getInstance().hideNativeBannerUI()}nativeUpdate(){this.nativeAd&&this.nativeAd.load()}getIconNativeFlag(){return this.isLoadIconNative}getImageNativeFlag(){return this.isLoadImageNative}showNativeInters(e,t){var a=this;if(e<=1)a.reportNativeShow(a.nativeInfo.adId);else for(var i=0;i<e;i++)setTimeout(()=>{a.reportNativeShow(a.nativeInfo.adId)},5e3*i);oe.getInstance().showNativeIntersUI(this.nativeInfo,t)}showNativeIcon(e,t,a,i){this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativeIconUI(e,t,a,i,this.nativeInfo)}showNativePatch(e,t,a,i,s,n){this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativePatchUI(e,t,a,i,s,n,this.nativeInfo)}showNativeImage(e,t,a,i){this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativeImageUI(e,t,a,i,this.nativeInfo)}getNativeInfo(){return this.nativeContent}reportNativeShow(e){console.log("ASCSDK","VIVO 上报原生广告展示","广告ID为:"+e),this.nativeAd.reportAdShow({adId:e})}reportNativeClick(e){console.log("ASCSDK","VIVO 上报原生广告点击","广告ID为:"+e),this.nativeAd.reportAdClick({adId:e})}}class ee{constructor(){this.bannerAd=null,this.systemBannerOnShow=!1,this.bannerShow=!1,this.updateBanner=null}static getInstance(){return ee.instance||(ee.instance=new ee),ee.instance}createSystemBanner(e){if(!e)return void console.log("ASCSDK","Tiktok bannerId为空");console.log("ASCSDK","Tiktok Banner广告初始化",e);let t=tt.getSystemInfoSync().windowWidth,a=tt.getSystemInfoSync().windowHeight,i=this;this.bannerAd=tt.createBannerAd({adUnitId:e,style:{left:-1e3,top:-1e3}}),this.bannerAd.onResize(function(e){console.log("ASCSDK","Tiktok banner广告重设位置"),i.bannerAd.style.top=a-e.height,i.bannerAd.style.left=(t-e.width)/2}),this.bannerAd.onLoad(function(){console.log("ASCSDK","Tiktok banner广告加载成功"),ne.getInstance().isLoadSystemeBanner=!0,i.bannerShow&&i.showSystemBanner()})}showSystemBanner(){console.log("ASCSDK","Tiktok show systemBanner ========================"),this.bannerShow=!0,ne.getInstance().isLoadSystemeBanner?this.bannerAd.show():console.log("ASCSDK","Tiktok banner广告未加载完成")}updateSytemBanner(){this.updateBanner&&clearInterval(this.updateBanner),this.updateBanner=setInterval(()=>{console.log("ASCSDK","Tiktok 刷新系统banner========================"),this.bannerAd.destroy(),this.createSystemBanner(ne.getInstance().ID_BannerId)},1e3*ne.getInstance().NUM_BannerUpdateTime)}hideSystemBanner(){console.log("ASCSDK","Tiktok hideSystemBanner ========================"),this.bannerAd&&this.bannerAd.hide(),this.bannerShow=!1,this.updateBanner&&clearInterval(this.updateBanner)}}class te{constructor(){this.bannerAd=null,this.systemBannerOnShow=!1,this.bannerShow=!1,this.updateBanner=null}static getInstance(){return te.instance||(te.instance=new te),te.instance}createSystemBanner(e){if(!e)return void console.log("ASCSDK","QQ bannerId为空");console.log("ASCSDK","QQ Banner广告初始化",e);let t=this;var a=Number(qq.getSystemInfoSync().windowWidth),i=Number(qq.getSystemInfoSync().windowHeight);this.bannerAd=qq.createBannerAd({adUnitId:e,style:{left:0,top:0,width:i>a?a:400,height:120},testDemoType:"65"}),this.bannerAd.onResize(function(e){i>a||Laya.stage.height>Laya.stage.width?(t.bannerAd.style.width=a,t.bannerAd.style.height=a):(t.bannerAd.style.width=a/2,t.bannerAd.style.height=a/2),t.bannerAd.style.top=i-e.height,t.bannerAd.style.left=(a-t.bannerAd.style.width)/2}),this.bannerAd.onLoad(function(){console.log("ASCSDK","QQ banner加载成功"),ne.getInstance().isLoadSystemeBanner=!0,t.bannerShow&&(t.showSystemBanner(),i>a?(t.bannerAd.style.width=a,t.bannerAd.style.height=a):(t.bannerAd.style.width=a/2,t.bannerAd.style.width=a/2),t.bannerAd.style.top=i-t.bannerAd.style.realHeight,t.bannerAd.style.left=(a-t.bannerAd.style.width)/2)}),this.bannerAd.onError(function(e){console.log("ASCSDK","QQ banner加载失败"+JSON.stringify(e))})}showSystemBanner(){this.bannerAd&&(console.log("ASCSDK","QQ show systemBanner ========================"),this.bannerShow=!0,this.bannerAd.show())}updateSytemBanner(){this.updateBanner&&clearInterval(this.updateBanner),this.updateBanner=setInterval(()=>{console.log("ASCSDK","QQ updateSystemBanner ========================"),this.bannerAd.offLoad(),this.bannerAd.offError(),this.bannerAd.destroy(),this.createSystemBanner(ne.getInstance().ID_BannerId)},1e3*ne.getInstance().NUM_BannerUpdateTime)}hideSystemBanner(){this.bannerAd?(console.log("ASCSDK","QQ hideSystemBanner ========================"),this.bannerAd.hide(),this.bannerShow=!1,this.systemBannerOnShow=!1):console.log("ASCSDK","QQ 不存在系统banner ========================')")}}class ae{constructor(){this.bannerAd=null,this.updateBanner=null,this.bannerShow=!1}static getInstance(){return ae.instance||(ae.instance=new ae),ae.instance}createSystemBanner(e){console.log("ASCSDK","WX 系统banner广告初始化",e);var t=Number(wx.getSystemInfoSync().windowWidth),a=Number(wx.getSystemInfoSync().windowHeight);this.bannerAd=wx.createBannerAd({adUnitId:e,style:{left:10,top:76,height:.2*a,width:a>t?t:200}});let i=this;this.bannerAd.onResize(function(e){a>t||Laya.stage.height>Laya.stage.width?(i.bannerAd.style.width=t,i.bannerAd.style.height=t):i.bannerAd.style.height=.2*a,i.bannerAd.style.top=a-e.height,i.bannerAd.style.left=(t-e.width)/2}),this.bannerAd.onLoad(function(){console.log("ASCSDK","WX banner加载成功"),ne.getInstance().isLoadSystemeBanner=!0,i.bannerShow&&i.showSystemBanner()}),this.bannerAd.onError(function(e){console.log("ASCSDK","WX banner加载失败"+JSON.stringify(e)),setTimeout(()=>{i.createSystemBanner(ne.getInstance().ID_BannerId)},1e4)})}showSystemBanner(){this.bannerAd?(console.log("ASCSDK","WX showSystemBanner========================"),this.bannerAd.show(),this.bannerShow=!0):console.log("ASCSDK","不存在系统banner广告实例")}updateSytemBanner(){this.updateBanner&&clearInterval(this.updateBanner),this.updateBanner=setInterval(()=>{console.log("ASCSDK","WX 刷新系统banner========================"),this.bannerAd.offLoad(),this.bannerAd.offError(),this.bannerAd.destroy(),this.createSystemBanner(ne.getInstance().ID_BannerId)},1e3*ne.getInstance().NUM_BannerUpdateTime)}hideSystemBanner(){this.bannerAd?(console.log("ASCSDK","WX hideSystemBanner========================"),this.bannerAd.hide(),this.bannerShow=!1):console.log("ASCSDK","不存在banner")}}class ie{constructor(){this.nativeAd=null,this.nativeInfo=null,this.isLoadIconNative=!1,this.isLoadImageNative=!1,this.hasCreateHWNative=!1,this.loadNativeIntervalTime=0,this.loadNativeInterval=null}static getInstance(){return ie.instance||(ie.instance=new ie),ie.instance}showNativeBanner(){this.hasCreateHWNative?(this.reLoadNative(),setTimeout(()=>{this.nativeInfo=this.nativeInfo,oe.getInstance().showNativeBannerUI(this.nativeInfo)},1500)):(this.createNativeAd(ce.getInstance().ID_NativeID),setTimeout(()=>{this.reLoadNative(),setTimeout(()=>{this.nativeInfo=this.nativeInfo,oe.getInstance().showNativeBannerUI(this.nativeInfo)},1500)},300))}updateNativeBanner(){oe.getInstance().hideNativeBannerUI(),this.reLoadNative(),setTimeout(()=>{this.nativeInfo=this.nativeInfo,oe.getInstance().showNativeBannerUI(this.nativeInfo)},1500)}hideNativeBaner(){oe.getInstance().hideNativeBannerUI()}createNativeAd(e){console.log("ASCSDK","HW 加载原生广告",e),this.nativeAd=hbs.createNativeAd({adUnitId:e}),this.hasCreateHWNative||(this.loadNativeIntervalTime=30),this.hasCreateHWNative=!0,this.nativeInfo={adId:null,title:"特别惊喜",desc:"",Native_icon:null,Native_BigImage:null};var t=this;this.nativeAd.onLoad(function(e){console.log("ASCSDK","HW 原生广告加载成功",JSON.stringify(e.adList[0])),t.loadNativeIntervalTime=0,t.loadNativeInterval&&(clearInterval(t.loadNativeInterval),t.loadNativeInterval=null),t.loadNativeInterval=setInterval(()=>{t.loadNativeIntervalTime++},1e3);let a=e.adList[0];t.nativeInfo.adId=String(a.adId),null!=a.title&&""!=a.title&&(t.nativeInfo.title=String(a.title)),null!=a.desc&&""!=a.desc&&(t.nativeInfo.desc=String(a.desc)),a&&null!=a.imgUrlList&&a.imgUrlList.length>0?Laya.loader.load(String(a.imgUrlList[0]),Laya.Handler.create(this,function(){console.log("ASCSDK","HW 原生大图加载成功"),t.nativeInfo.Native_BigImage=String(a.imgUrlList[0]),t.isLoadImageNative=!0})):(t.nativeInfo.Native_BigImage=null,t.isLoadImageNative=!1)}),this.nativeAd.onError(e=>{console.log("ASCSDK","HW 原生广告加载失败："+JSON.stringify(e))})}reLoadNative(){this.loadNativeIntervalTime>=30&&this.nativeUpdate()}nativeUpdate(){this.nativeAd&&this.nativeAd.load()}getIconNativeFlag(){return this.isLoadIconNative}getImageNativeFlag(){return this.isLoadImageNative}showNativeInters(e){this.hasCreateHWNative?(this.reLoadNative(),setTimeout(()=>{this.nativeInfo=this.nativeInfo,this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativeIntersUI(this.nativeInfo)},1500)):(this.createNativeAd(ce.getInstance().ID_NativeID),setTimeout(()=>{this.reLoadNative(),setTimeout(()=>{this.nativeInfo=this.nativeInfo,this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativeIntersUI(this.nativeInfo)},1500)},300))}showNativeIcon(e,t,a,i){this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativeIconUI(e,t,a,i,this.nativeInfo)}showNativeImage(e,t,a,i){this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativeImageUI(e,t,a,i,this.nativeInfo)}reportNativeShow(e){console.log("ASCSDK","HW 原生广告上报展示","广告ID为:"+e),this.nativeAd.reportAdShow({adId:e})}reportNativeClick(e){console.log("ASCSDK","HW 原生广告上报点击","广告ID为:"+e),this.nativeAd.reportAdClick({adId:e})}}class se{constructor(){this.bannerAd=null,this.bannerShow=!1,this.updateBanner=null}static getInstance(){return se.instance||(se.instance=new se),se.instance}createSystemBanner(){console.log("ASCSDK","BL Banner广告初始化");let e=this;this.bannerAd=bl.createBannerAd({style:{left:30,top:663,width:300,height:88}}),this.bannerAd.onResize(e=>{console.log("ASCSDK","BL banner真实宽高:",JSON.stringify(e))}),this.bannerAd.onLoad(()=>{console.log("ASCSDK","BL banner加载成功"),ne.getInstance().isLoadSystemeBanner=!0,e.bannerShow&&e.showSystemBanner()}),this.bannerAd.onError(e=>{console.log("ASCSDK","BL banner加载失败"+JSON.stringify(e))}),this.bannerAd.onClose(()=>{console.log("ASCSDK","BL banner被用户主动关闭",ne.getInstance().NUM_BannerUpdateTime+"S后再次刷新"),this.updateSytemBanner()})}showSystemBanner(){this.bannerAd&&(console.log("ASCSDK","BL showSystemBanner========================"),this.bannerShow=!0,this.bannerAd.show())}updateSytemBanner(){this.updateBanner&&clearInterval(this.updateBanner),this.updateBanner=setInterval(()=>{console.log("ASCSDK","BL updateSystemBanner ========================"),this.bannerAd.destroy(),this.bannerAd=null,this.createSystemBanner()},1e3*ne.getInstance().NUM_BannerUpdateTime)}hideSystemBanner(){this.bannerAd?(console.log("ASCSDK","BL hideSystemBanner ========================"),this.bannerAd.hide(),this.bannerShow=!1):console.log("ASCSDK","BL 不存在系统banner ========================')"),this.updateBanner&&clearInterval(this.updateBanner)}}class ne{constructor(){this.ID_BannerId="",this.SW_SystemBannerSwitch=!1,this.SW_SystemBannerFirst=!0,this.isLoadSystemeBanner=!1,this.NUM_BannerUpdateTime=30,this.NUM_BannerMostShowTimes=1e4,this.SW_NativeBannerSwitch=!1,this.bannerUpdateInterval=null,this.bannerCloseTime=0,this.isLoadBanner=!1,this.loadBannerCheck=null,this.hasShowBanner=!1,this.testBannerShow=!1,this.isLoadNativeBanner=!1}static getInstance(){return ne.instance||(ne.instance=new ne),ne.instance}createSystemBanner(){if(this.SW_SystemBannerSwitch)switch(A.getPlatform()){case w.GP_Oppo:Y.getInstance().createSystemBanner(this.ID_BannerId);break;case w.GP_Vivo:j.getInstance().createSystemBanner(this.ID_BannerId);break;case w.GP_Tiktok:ee.getInstance().createSystemBanner(this.ID_BannerId);break;case w.GP_QQ:te.getInstance().createSystemBanner(this.ID_BannerId);break;case w.GP_WX:ae.getInstance().createSystemBanner(this.ID_BannerId);break;case w.GP_BL:se.getInstance().createSystemBanner()}else console.log("ASCSDK","系统Banner开关关闭")}getSystemBannerFlag(){return this.isLoadSystemeBanner}checkLoadSucc(){console.log("ASCSDK","查询banner是否加载完成."),this.isLoadNativeBanner=(ce.getInstance().getIconNativeFlag()||ce.getInstance().getImageNativeFlag())&&oe.getInstance().isLoadNativeBannerUI,A.getPlatform()==w.GP_HW&&(this.isLoadNativeBanner=oe.getInstance().isLoadNativeBannerUI),this.loadBannerCheck&&clearTimeout(this.loadBannerCheck),this.SW_SystemBannerSwitch&&this.SW_NativeBannerSwitch&&(this.getSystemBannerFlag()||this.isLoadNativeBanner)?(this.isLoadBanner=!0,this.showBanner()):this.SW_SystemBannerSwitch&&!this.SW_NativeBannerSwitch&&this.getSystemBannerFlag()?(this.isLoadBanner=!0,this.showBanner()):!this.SW_SystemBannerSwitch&&this.SW_NativeBannerSwitch&&this.isLoadNativeBanner?(this.isLoadBanner=!0,this.showBanner()):(console.log("ASCSDK","banner未加载完成"),this.loadBannerCheck=setTimeout(()=>{this.checkLoadSucc()},5e3))}showBanner(){if(A.getPlatform()==w.GP_Test)return q.getInstance().isNavigateSettleShow?void console.log("ASCSDK","测试结算互推正在展示,请先关闭测试结算互推再showBanner"):(this.testBannerShow=!0,void Z.getInstance().showBanner());if(this.isLoadBanner){if(this.NUM_BannerMostShowTimes<=this.bannerCloseTime)return this.bannerUpdateInterval&&clearInterval(this.bannerUpdateInterval),void console.log("ASCSDK","banner展示次数(最大关闭次数)已达上限 return");switch(A.getPlatform()){case w.GP_Oppo:case w.GP_Vivo:if(q.getInstance().isNavigateSettleShow)return void console.log("ASCSDK","结算互推正在展示,请先关闭结算互推再showBanner");if(this.hasShowBanner=!0,this.SW_SystemBannerSwitch&&this.SW_NativeBannerSwitch)this.isLoadNativeBanner=(ce.getInstance().getIconNativeFlag()||ce.getInstance().getImageNativeFlag())&&oe.getInstance().isLoadNativeBannerUI,this.SW_SystemBannerFirst?(console.log("ASCSDK","系统banner优先"),this.getSystemBannerFlag()?(console.log("ASCSDK","系统Banner可以展示"),this.showSystemBanner()):(console.log("ASCSDK","系统Banner没有加载完成"),this.isLoadNativeBanner?(console.log("ASCSDK","改为展示原生Banner"),this.showNativeBanner()):console.log("ASCSDK","原生banner也没有加载完成"))):(console.log("ASCSDK","原生banner优先"),this.isLoadNativeBanner?(console.log("ASCSDK","原生Banner可以展示"),this.showNativeBanner()):(console.log("ASCSDK","原生Banner没有加载完成"),this.getSystemBannerFlag()?(console.log("ASCSDK","改为展示系统banner"),this.showSystemBanner()):console.log("ASCSDK","系统banner也没有加载完成")));else if(this.SW_SystemBannerSwitch)console.log("ASCSDK","只打开了系统Banner"),this.showSystemBanner();else{if(!this.SW_NativeBannerSwitch)return void console.log("ASCSDK","系统banner开关和原生banner开关都没有打开");console.log("ASCSDK","只打开了原生Banner"),this.showNativeBanner()}this.updateBanner();break;case w.GP_Tiktok:case w.GP_QQ:case w.GP_WX:this.SW_SystemBannerSwitch&&(this.showSystemBanner(),this.updateBanner());break;case w.GP_HW:this.SW_NativeBannerSwitch&&(this.showNativeBanner(),this.updateBanner());break;case w.GP_BL:this.SW_SystemBannerSwitch&&(this.showSystemBanner(),this.updateBanner())}}else this.checkLoadSucc()}showSystemBanner(){switch(A.getPlatform()){case w.GP_Oppo:Y.getInstance().showSystemBanner();break;case w.GP_Vivo:j.getInstance().showSystemBanner();break;case w.GP_Tiktok:ee.getInstance().showSystemBanner();break;case w.GP_QQ:te.getInstance().showSystemBanner();break;case w.GP_WX:ae.getInstance().showSystemBanner();break;case w.GP_BL:se.getInstance().showSystemBanner()}}updateBanner(){if(this.NUM_BannerMostShowTimes<=this.bannerCloseTime)return this.bannerUpdateInterval&&clearInterval(this.bannerUpdateInterval),void console.log("ASCSDK","banner展示次数(最大关闭次数)已达上限 return");switch(A.getPlatform()){case w.GP_Oppo:case w.GP_Vivo:this.bannerUpdateInterval&&clearInterval(this.bannerUpdateInterval),this.bannerUpdateInterval=setInterval(()=>{if(this.NUM_BannerMostShowTimes<=this.bannerCloseTime)return this.bannerUpdateInterval&&clearInterval(this.bannerUpdateInterval),void console.log("ASCSDK","banner展示次数(最大关闭次数)已达上限 return");this.SW_SystemBannerSwitch&&this.SW_NativeBannerSwitch?this.SW_SystemBannerFirst?(console.log("ASCSDK","系统banner优先"),this.getSystemBannerFlag()?(console.log("ASCSDK","刷新系统Banner"),oe.getInstance().hideNativeBannerUI(),this.updateSystemBanner()):(console.log("ASCSDK","系统Banner没有加载完成"),(ce.getInstance().getIconNativeFlag()||ce.getInstance().getImageNativeFlag())&&(console.log("ASCSDK","改为刷新原生Banner"),Y.getInstance().bannerAd&&Y.getInstance().hideSystemBanner(),j.getInstance().bannerAd&&j.getInstance().hideSystemBanner(),this.updateNativeBanner()))):(console.log("ASCSDK","原生banner优先"),ce.getInstance().getIconNativeFlag()||ce.getInstance().getImageNativeFlag()?(console.log("ASCSDK","刷新原生Banner"),Y.getInstance().bannerAd&&Y.getInstance().hideSystemBanner(),j.getInstance().bannerAd&&j.getInstance().hideSystemBanner(),this.updateNativeBanner()):(console.log("ASCSDK","原生Banner没有加载到"),this.getSystemBannerFlag()&&(console.log("ASCSDK","改为刷新系统banner"),oe.getInstance().hideNativeBannerUI(),this.updateSystemBanner()))):this.SW_SystemBannerSwitch?(console.log("ASCSDK","只打开了系统Banner"),this.updateSystemBanner()):this.SW_NativeBannerSwitch?(console.log("ASCSDK","只打开了原生Banner"),this.updateNativeBanner()):console.log("ASCSDK","系统banner开关和原生banner开关都没有打开")},1e3*this.NUM_BannerUpdateTime);break;case w.GP_Tiktok:case w.GP_QQ:case w.GP_WX:this.SW_SystemBannerSwitch&&this.updateSystemBanner();break;case w.GP_HW:this.bannerUpdateInterval&&clearInterval(this.bannerUpdateInterval),this.bannerUpdateInterval=setInterval(()=>{if(this.NUM_BannerMostShowTimes<=this.bannerCloseTime)return this.bannerUpdateInterval&&clearInterval(this.bannerUpdateInterval),void console.log("ASCSDK","banner展示次数(最大关闭次数)已达上限 return");this.SW_NativeBannerSwitch&&this.updateNativeBanner()},1e3*this.NUM_BannerUpdateTime);break;case w.GP_BL:this.SW_SystemBannerSwitch&&this.updateSystemBanner()}}updateSystemBanner(){switch(A.getPlatform()){case w.GP_Oppo:Y.getInstance().updateSytemBanner();break;case w.GP_Vivo:j.getInstance().updateSytemBanner();break;case w.GP_Tiktok:ee.getInstance().updateSytemBanner();break;case w.GP_QQ:te.getInstance().updateSytemBanner();break;case w.GP_WX:ae.getInstance().updateSytemBanner();break;case w.GP_BL:se.getInstance().updateSytemBanner()}}updateNativeBanner(){switch(A.getPlatform()){case w.GP_Oppo:re.getInstance().updateNativeBanner();break;case w.GP_Vivo:$.getInstance().updateNativeBanner();break;case w.GP_HW:ie.getInstance().updateNativeBanner()}}hideBanner(){if(A.getPlatform()==w.GP_Test)return this.testBannerShow=!1,void Z.getInstance().hideBanner();switch(this.loadBannerCheck&&clearTimeout(this.loadBannerCheck),A.getPlatform()){case w.GP_Oppo:this.hasShowBanner=!1,this.bannerUpdateInterval&&(clearInterval(this.bannerUpdateInterval),this.bannerUpdateInterval=null),Y.getInstance().hideSystemBanner(),re.getInstance().hideNativeBaner();break;case w.GP_Vivo:this.bannerUpdateInterval&&(clearInterval(this.bannerUpdateInterval),this.bannerUpdateInterval=null),j.getInstance().hideSystemBanner(),$.getInstance().hideNativeBaner();break;case w.GP_Tiktok:ee.getInstance().hideSystemBanner();break;case w.GP_QQ:te.getInstance().hideSystemBanner();break;case w.GP_WX:ae.getInstance().hideSystemBanner();break;case w.GP_HW:this.bannerUpdateInterval&&(clearInterval(this.bannerUpdateInterval),this.bannerUpdateInterval=null),ie.getInstance().hideNativeBaner();break;case w.GP_BL:se.getInstance().hideSystemBanner()}}showNativeBanner(){switch(A.getPlatform()){case w.GP_Oppo:re.getInstance().showNativeBanner();break;case w.GP_Vivo:$.getInstance().showNativeBanner();break;case w.GP_HW:ie.getInstance().showNativeBanner()}}bannerClose(){this.bannerCloseTime++}}class oe{constructor(){this.nativeBanner=null,this.nativeIcon=null,this.nativeImage=null,this.navigateIconTimeInterval=null,this.navigateInfom=null,this.navigateBg=null,this.navigateGroupBg=null,this.navigateSettleBg=null,this.NIUIInfo=null,this.CustomUIInfo=null,this.CustomLayerBg=null,this.NativeBannerUIInfo=null,this.ICONInfo=null,this.navigateUITextures=null,this.NavigateIconTextureList=[],this.navigateGroupUITextures=null,this.nativeIntersErrorTimes=0,this.nativeCustomErrorTimes=0,this.nativeBannerErrorTimes=0,this.nativeIconErrorTimes=0,this.isLoadNIUI=!1,this.isLoadNativeBannerUI=!1,this.isLoadIconTip=!1,this.isLoadNavigateIcon=!1,this.isLoadNavigateGroup=!1,this.isLoadNavigateList=!1,this.navigateSettleUITextures=null,this.groupMoving=!1,this.isLoadNavigateSettle=!1,this.privacyStr="",this.isPrivacy=!1,this.intersTime=0,this.isMouseDown=!1,this.lastPosY=0}static getInstance(){return oe.instance||(oe.instance=new oe),oe.instance}setGroup(e){}loadNativeInstersRes(){console.log("ASCSDK","开始加载原生插屏资源"),this.NIUIInfo={layerBg:null,bg:null,button:null,exit:null,mask:null};var e=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeInsertRes/layerBg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeInsertRes/nativeIntersBg_2.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeInsertRes/touchButton.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeInsertRes/nativeClose.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeInsertRes/mask.png"],t=this;Laya.loader.load(e,Laya.Handler.create(this,function(a){console.log("ASCSDK","原生插屏资源加载成功"),t.isLoadNIUI=a,t.NIUIInfo.layerBg=e[0],t.NIUIInfo.bg=e[1],t.NIUIInfo.button=e[2],t.NIUIInfo.exit=e[3],t.NIUIInfo.mask=e[4]}))}loadNativeCustomRes(){console.log("AD","开始加载原生模板资源"),this.CustomUIInfo={layerBg:null};var e=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeInsertRes/layerBg.png"],t=this;Laya.loader.load(e,Laya.Handler.create(this,function(a){console.log("ASCSDK","原生插屏资源加载成功"),t.CustomUIInfo.layerBg=e[0]}))}loadNativeIconRes(){console.log("ASCSDK","开始加载原生广告角标资源"),this.ICONInfo={iconButton:null,iconClose:null};var e=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeIconRes/ICONAd.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeBannerRes/nativeBannerClose.png"],t=this;Laya.loader.load(e,Laya.Handler.create(this,function(){t.isLoadIconTip=!0,console.log("ASCSDK","原生广告角标资源加载成功"),t.ICONInfo.iconButton=e[0],t.ICONInfo.iconClose=e[1]}))}loadNativeBannerRes(){console.log("ASCSDK","开始加载原生Banner资源"),this.NativeBannerUIInfo={bannerBg:null,bannerButton:null,bannerClose:null,bannerTip:null};var e=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeBannerRes/nativeBannerBg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeBannerRes/nativeBannerButton.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeBannerRes/nativeBannerClose.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeBannerRes/nativeBannerTip.png"],t=this;this.NativeBannerUIInfo.bannerBg=e[0],this.NativeBannerUIInfo.bannerButton=e[1],this.NativeBannerUIInfo.bannerClose=e[2],this.NativeBannerUIInfo.bannerTip=e[3];Laya.loader.load(e,Laya.Handler.create(this,function(e){console.log("ASCSDK","原生Banner资源是否加载成功:"+e),t.isLoadNativeBannerUI=e}))}loadNavigateIconRes(){console.log("ASCSDK","开始加载互推ICON资源");var e=this;this.navigateUITextures={maskTexture:null,bgTexture:null,moreGameTexture:null};var t=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateIconRes/iconMask.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateIconRes/iconBg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateIconRes/morgametitle.png"];Laya.loader.load(t,Laya.Handler.create(this,function(){e.isLoadNavigateIcon=!0,console.log("ASCSDK","互推ICON资源加载成功"),e.navigateUITextures.maskTexture=t[0],e.navigateUITextures.bgTexture=t[1],e.navigateUITextures.moreGameTexture=t[2]})),this.loadNavigateList()}loadNavigateGroup(){console.log("ASCSDK","开始加载互推列表资源");var e=this;this.navigateGroupUITextures={groupHTexture:null,groupVTexture:null,leftTexture:null,maskTexture:null,moreGameTitleTexture:null,redTexture:null,rightTexture:null};var t=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/groupH.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/groupV.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/left.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/mask.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/moreGameTitle.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/red.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/right.png"];Laya.loader.load(t,Laya.Handler.create(this,function(){e.isLoadNavigateGroup=!0,console.log("ASCSDK","互推列表资源加载成功"),e.navigateGroupUITextures.groupHTexture=t[0],e.navigateGroupUITextures.groupVTexture=t[1],e.navigateGroupUITextures.leftTexture=t[2],e.navigateGroupUITextures.maskTexture=t[3],e.navigateGroupUITextures.moreGameTitleTexture=t[4],e.navigateGroupUITextures.redTexture=t[5],e.navigateGroupUITextures.moreGameLeftTexture=t[6],e.navigateGroupUITextures.moreGameRightTexture=t[7]})),this.loadNavigateList()}loadNavigateSettleRes(){console.log("ASCSDK","开始加载结算互推资源");var e=this;this.navigateSettleUITextures={navigateSettleGroup:null,navigateSettletitleBg:null,mask:null,iconWihte:null,navigateBanner:null,navigateSettle1Bg:null,iconMask:null,iconNameBg:null,iconYellow:null};var t=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateSettleRes/navigateSettleGroup.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateSettleRes/navigateSettletitleBg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateSettleRes/settleIcon.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateSettleRes/iconWihte.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateSettleRes/navigateBanner.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NewNavigateSettleRes/navigateSettle1Bg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NewNavigateSettleRes/mask.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NewNavigateSettleRes/iconNameBg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NewNavigateSettleRes/iconYellow.png"];Laya.loader.load(t,Laya.Handler.create(this,function(){e.navigateSettleUITextures.navigateSettleGroup=t[0],e.navigateSettleUITextures.navigateSettletitleBg=t[1],e.navigateSettleUITextures.mask=t[2],e.navigateSettleUITextures.iconWihte=t[3],e.navigateSettleUITextures.navigateBanner=t[4],e.navigateSettleUITextures.navigateSettle1Bg=t[5],e.navigateSettleUITextures.iconMask=t[6],e.navigateSettleUITextures.iconNameBg=t[7],e.navigateSettleUITextures.iconYellow=t[8],e.isLoadNavigateSettle=!0,console.log("ASCSDK","结算互推资源加载成功")})),this.loadNavigateList()}loadNavigateList(){var e=this;let t=0,a=q.getInstance().navigateList;for(let i=0;i<a.length;i++)Laya.loader.load(a[i].pushGamePicture,Laya.Handler.create(this,function(){e.NavigateIconTextureList[i]=a[i].pushGamePicture,++t>=a.length&&(e.isLoadNavigateList=!0)}))}showNativeIntersUI(e,t=null){console.log("ASCSDK","showNativeIntersUI===========================");var a=Laya.stage.width,i=Laya.stage.height,s=new Laya.Sprite;s.pos(a/2-1280,i/2-1280),s.scale(25.6,25.6),s.zOrder=1e5,s.alpha=.8,Laya.stage.addChild(s),s.loadImage(this.NIUIInfo.layerBg),s.mouseEnabled=!0;var n=new Laya.Sprite;n.loadImage(this.NIUIInfo.bg),n.zOrder=200100;let o=function(){Laya.stage.removeChild(s),Laya.stage.removeChild(n),t&&t()}.bind(this);a<i?(n.width=a-50,n.height=1.1*n.width,n.x=a/2-n.width/2,n.y=i/2-n.height/2-100,Laya.stage.addChild(n)):(n.width=i-50,n.height=1.1*n.width,n.x=a/2-n.width/2,n.y=i/2-n.height/2,Laya.stage.addChild(n));let r=e.adId;n.on("click",this,function(){ce.getInstance().reportNativeClick(r),o(),A.getPlatform()==w.GP_HW&&(ve.getInstance().intersNowTime=0)});var h=new Laya.Label;if(h.font="Microsoft YaHei",e.title.length>=10&&(e.title=e.title.substring(0,10)),e.desc.length>=10&&(e.desc=e.desc.substring(0,10)),h.text=e.title,h.fontSize=30,h.color="#CC7C70",h.x=n.width/2-h.width/2,h.y=.12*n.height-1.5*h.height,n.addChild(h),ce.getInstance().getImageNativeFlag()){console.log("ASCSDK","原生插屏广告大图优先"),(c=new Laya.Label).font="Microsoft YaHei",c.text=e.desc,c.fontSize=30,c.color="#997C70",c.x=n.width/2-c.width/2,c.y=.255*n.height-c.height/2,n.addChild(c);var l=new Laya.Sprite;l.loadImage(String(e.Native_BigImage)),l.width=.8*n.width,l.height=.4*n.height,l.x=n.width/2-l.width/2,l.y=n.height/2+.085*n.height-l.height/2,n.addChild(l)}else if(ce.getInstance().getIconNativeFlag()){var c;console.log("ASCSDK","原生插屏广告ICON展示"),(c=new Laya.Label).font="Microsoft YaHei",c.text=e.desc,c.fontSize=30,c.color="#997C70",c.x=n.width/2-c.width/2,c.y=.205*n.height-c.height/2,n.addChild(c);var d=new Laya.Sprite;d.loadImage(String(e.Native_icon)),d.height=.55*n.height,d.width=.55*n.width,d.x=n.width/2-d.width/2,d.y=.55*n.height-d.height/2,n.addChild(d)}var g=new Laya.Sprite;g.loadImage(this.NIUIInfo.exit),g.x=n.width-g.width/2*n.width/914-.07*n.width,g.y=g.width/2*n.width/914+.07*n.width,g.zOrder=30010,g.width=g.width*n.width/914*.55,g.height=g.height*n.width/914*.55,g.mouseEnabled=!0,n.addChild(g),ce.getInstance().nativeAdShowInfo[1]=r,g.on("click",this,e=>{ve.getInstance().intersNowTime=0,ce.getInstance().nativeAdShowInfo[1]="",o(),e.stopPropagation()});var u=new Laya.Sprite;u.x=0,u.y=0,u.zOrder=30010,u.width=2*g.width,u.height=2*g.height,u.mouseEnabled=!0,g.addChild(u),ce.getInstance().nativeAdShowInfo[1]=r;let S=this;u.on("click",this,e=>{let t=A.getInstance().getCtrlData(),a=function(){S.intersTime=0,ve.getInstance().intersNowTime=0,ce.getInstance().nativeAdShowInfo[1]="",o(),ce.getInstance().reportNativeClick(r),e.stopPropagation()};if(t&&t.switch)if(S.intersTime++,-1!==t.times&&S.intersTime>=t.times)a();else{Math.random()<=t.ratio&&a()}})}showNativePrivacy(e=null,t=null){if("true"==A.getData("Privacy",!1)&&0==this.isPrivacy)return console.log("隐私政策已经展示,直接走同意回调"),void(e&&e());console.log("AD","展示用户隐私政策"),Laya.SoundManager.autoStopMusic=!0;let a={maskbg:null,layerBg:null,agree:null,refuse:null};var i=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/PrivacyRes/layerbg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/PrivacyRes/confirm.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/PrivacyRes/noConfirm.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/PrivacyRes/zhezhao.png"];Laya.loader.load(i,Laya.Handler.create(this,function(s){a.layerBg=i[0],a.agree=i[1],a.refuse=i[2],a.maskbg=i[3];var n=Laya.stage.width,o=Laya.stage.height,r=new Laya.Sprite;r.pos(n/2-1280,o/2-1280),r.scale(25.6,25.6),r.zOrder=1e5,r.alpha=1,Laya.stage.addChild(r),r.loadImage(a.maskbg),r.mouseEnabled=!0;var h=new Laya.Sprite;h.loadImage(a.layerBg),h.zOrder=200100,n<o?(h.width=n-50,h.height=1.1*h.width,h.pivotX=.5*h.width,h.pivotY=.5*h.height,h.x=n/2,h.y=o/2,Laya.stage.addChild(h)):(h.height=o-200,h.width=1.4*h.height,h.pivotX=.5*h.width,h.pivotY=.5*h.height,h.x=n/2,h.y=o/2,Laya.stage.addChild(h));var l=new Laya.Text;h.addChild(l),l.zOrder=200200,l.color="#ffffff",l.width=h.width,l.height=.2*h.height,l.pivotX=.5*l.width,l.pivotY=.5*l.height,l.x=.5*n,l.y=.5*o-.5*h.height,l.font="Microsoft YaHei",l.align="center",l.fontSize=28,l.overflow="visible",l.text="用户协议隐私政策",Laya.stage.addChild(l);var c=new Laya.Text;h.addChild(c),c.zOrder=200200,c.width=.8*h.width,c.height=.8*h.height,c.pivotX=.5*c.width,c.pivotY=.5*c.height,c.x=.5*n,c.y=.5*o,c.font="Microsoft YaHei",c.fontSize=18,c.wordWrap=!0,c.leading=10,c.overflow="scroll",c.text=this.privacyStr,c.on(Laya.Event.MOUSE_DOWN,this,()=>{this.isMouseDown=!0,this.lastPosY=Laya.stage.mouseY}),c.on(Laya.Event.MOUSE_MOVE,this,()=>{c.scrollY+=this.lastPosY-Laya.stage.mouseY,this.lastPosY=Laya.stage.mouseY}),c.on(Laya.Event.MOUSE_UP,this,()=>{this.isMouseDown=!1}),Laya.stage.addChild(c);var d=new Laya.Button;d.loadImage(a.agree),h.addChild(d),d.zOrder=200300,d.label="",d.width=170,d.height=58,d.pivotX=.5*d.width,d.pivotY=.5*d.height,d.x=h.x+.25*h.width,d.y=h.y+.6*h.height,d.on("click",this,()=>{A.saveData("Privacy",!0),Laya.SoundManager.autoStopMusic=!1,u(),e&&e()}),Laya.stage.addChild(d);var g=new Laya.Button;g.loadImage(a.refuse),h.addChild(g),g.zOrder=200300,g.label="",g.width=171,g.height=58,g.pivotX=.5*g.width,g.pivotY=.5*g.height,g.x=h.x-.25*h.width,g.y=d.y,g.on("click",this,()=>{switch(Laya.SoundManager.autoStopMusic=!1,A.getPlatform()){case w.GP_Vivo:case w.GP_Oppo:qg.exitApplication(null);break;case w.GP_Tiktok:tt.navigateToMiniProgram?tt.exitMiniProgram(null):tt.showModal({title:"提示",content:"当前客户端版本过低，无法使用该功能，请升级客户端或关闭后重启更新。"});break;default:console.error("调用退出小游戏接口")}t&&t()}),Laya.stage.addChild(g);let u=function(){Laya.stage.removeChild(r),Laya.stage.removeChild(h),Laya.stage.removeChild(l),Laya.stage.removeChild(c),Laya.stage.removeChild(d),Laya.stage.removeChild(g)}.bind(this)}))}showNativeCustomUI(){console.log("AD","showNativeCustomUI");var e=Laya.stage.width,t=Laya.stage.height;this.CustomLayerBg=new Laya.Sprite,this.CustomLayerBg.pos(e/2-1280,t/2-1280),this.CustomLayerBg.scale(25.6,25.6),this.CustomLayerBg.zOrder=1e5,this.CustomLayerBg.alpha=.8,Laya.stage.addChild(this.CustomLayerBg),this.CustomLayerBg.loadImage(this.CustomUIInfo.layerBg),this.CustomLayerBg.mouseEnabled=!0}hideNativeCustomUI(){Laya.stage.removeChild(this.CustomLayerBg)}showNativeBannerUI(e){if(this.nativeBanner)return void console.log("ASCSDK","已存在原生banner return");let t=e.adId;ce.getInstance().reportNativeShow(t),console.log("ASCSDK","showNativeBanner========================"),this.nativeBanner=new Laya.Sprite,this.nativeBanner.loadImage(this.NativeBannerUIInfo.bannerBg);var a=Laya.stage.width,i=Laya.stage.height;a<i?(this.nativeBanner.width=a,this.nativeBanner.height=.18*a):(this.nativeBanner.width=a/2,this.nativeBanner.height=.18*this.nativeBanner.width),this.nativeBanner.x=a/2-this.nativeBanner.width/2,this.nativeBanner.y=i-this.nativeBanner.height,this.nativeBanner.zOrder=99998,Laya.stage.addChild(this.nativeBanner),this.nativeBanner.on("click",this,function(){if(ce.getInstance().reportNativeClick(t),A.getPlatform()==w.GP_HW){let e=ne.getInstance();console.log("ASCSDK","原生banner关闭",e.NUM_BannerUpdateTime+"S后再次刷新"),c.hideNativeBannerUI(),e.updateBanner()}});var s=new Laya.Sprite;s.loadImage(this.NativeBannerUIInfo.bannerTip),s.height=.2*this.nativeBanner.height,s.width=s.height/.45,s.x=this.nativeBanner.width-s.width,s.y=0,this.nativeBanner.addChild(s);var n=new Laya.Sprite;if(A.getPlatform()==w.GP_HW&&(n.visible=!1),n.loadImage(this.NativeBannerUIInfo.bannerButton),n.width=.255*this.nativeBanner.width,n.height=.5*n.width,n.x=this.nativeBanner.width-.3125*this.nativeBanner.width,n.y=this.nativeBanner.height/2-n.height/2,this.nativeBanner.addChild(n),ce.getInstance().getImageNativeFlag()){var o=new Laya.Sprite;o.loadImage(e.Native_BigImage),o.height=this.nativeBanner.height,o.width=2*o.height,o.x=0,o.y=0,this.nativeBanner.addChild(o),(r=new Laya.Label).font="Microsoft YaHei",r.fontSize=25,r.color="#FF0000",r.align="left",r.valign="middle",r.wordWrap=!0,""==e.desc?r.text=e.title:r.text=e.desc,r.width=this.nativeBanner.width-o.width-n.width-s.width,r.height=this.nativeBanner.height,r.x=2.2*this.nativeBanner.height,r.y=0,this.nativeBanner.addChild(r)}else if(ce.getInstance().getIconNativeFlag()){var r,h=new Laya.Sprite;h.loadImage(e.Native_icon),h.width=.8*this.nativeBanner.height,h.height=.8*this.nativeBanner.height,h.x=.3*h.width,h.y=this.nativeBanner.height/2-h.height/2,this.nativeBanner.addChild(h),(r=new Laya.Label).font="Microsoft YaHei",r.fontSize=25,r.color="#FF0000",r.align="left",r.valign="middle",r.wordWrap=!0,""==e.desc?r.text=e.title:r.text=e.desc,r.width=this.nativeBanner.width-1.5*this.nativeBanner.height-(this.nativeBanner.width-n.x),r.height=this.nativeBanner.height,r.x=1.5*this.nativeBanner.height,r.y=0,this.nativeBanner.addChild(r)}var l=new Laya.Sprite;l.loadImage(this.NativeBannerUIInfo.bannerClose),l.width=.27*this.nativeBanner.height,l.height=.27*this.nativeBanner.height,l.zOrder=99999,this.nativeBanner.addChild(l),ce.getInstance().nativeAdShowInfo[0]=t;let c=this;l.on("click",this,e=>{let t=ne.getInstance();console.log("ASCSDK","原生banner关闭",t.NUM_BannerUpdateTime+"S后再次刷新"),ce.getInstance().nativeAdShowInfo[0]="",c.hideNativeBannerUI(),t.updateBanner(),e.stopPropagation()})}hideNativeBannerUI(){ce.getInstance().nativeAdShowInfo[0]="",this.nativeBanner&&(console.log("ASCSDK","hideNativeBannerUI==========================="),this.nativeBanner.removeSelf(),this.nativeBanner=null)}showNativeIconUI(e,t,a,i,s){console.log("ASCSDK","showNativeICON==========================="),this.nativeIcon=new Laya.Sprite,this.nativeIcon.loadImage(s.Native_icon),this.nativeIcon.zOrder=29999,Laya.stage.addChild(this.nativeIcon),this.nativeIcon.width=e,this.nativeIcon.height=t,this.nativeIcon.x=a,this.nativeIcon.y=i;var n=new Laya.Sprite;n.loadImage(this.ICONInfo.iconButton),n.width=e/3,n.height=n.width/70*34,n.x=e-n.width,n.y=0,this.nativeIcon.addChild(n);var o=new Laya.Sprite;o.loadImage(this.ICONInfo.iconClose),o.width=45,o.height=45,this.nativeIcon.addChild(o);var r=new Laya.Label;r.font="Microsoft YaHei",s.title.length<=5?r.text=s.title:r.text="",r.fontSize=30,r.color="#997C70",r.y=t,this.nativeIcon.addChild(r);let h=this;o.on("click",this,function(e){console.log("ASCSDK","手动关闭原生ICON"),h.nativeIcon.removeSelf(),e.stopPropagation()});let l=s.adId;this.nativeIcon.on("click",this,function(){console.log("ASCSDK","点击原生ICON"),ce.getInstance().reportNativeClick(l)})}hideNativeIconUI(){this.nativeIcon?(this.nativeIcon.removeSelf(),this.nativeIcon=null,console.log("ASCSDK","hideNativeIconUI===========================")):console.log("ASCSDK","不存在原生ICON")}showNativePatchUI(e,t,a,i,s,n,o){if(console.log("ASCSDK","showNativeImage==========================="),this.nativeImage=new Laya.Sprite,this.nativeImage.loadImage(String(o.Native_BigImage)),this.nativeImage.zOrder=29999,Laya.stage.addChild(this.nativeImage),this.nativeImage.width=a,this.nativeImage.height=i,this.nativeImage.x=s,this.nativeImage.y=n,t){let e=t;e.visible=!0,setTimeout(()=>{e.x=this.nativeImage.width/2-e.width/2,e.y=0},1),this.nativeImage.addChild(e)}var r=new Laya.Sprite;r.loadImage(String(this.ICONInfo.iconButton)),this.nativeImage.addChild(r),r.width=a/5,r.height=r.width/70*34,r.x=a-r.width,r.y=0;var h=new Laya.Sprite;h.loadImage(this.ICONInfo.iconClose),h.width=45,h.height=45,this.nativeImage.addChild(h);let l=this;h.on("click",this,function(e){console.log("ASCSDK","手动关闭原生大图"),l.nativeImage.removeSelf(),e.stopPropagation()});let c=o.adId;this.nativeImage.on("click",this,function(){console.log("ASCSDK","点击原生大图"),ce.getInstance().reportNativeClick(c)}),e&&(e.visible=!0,e.on("click",function(e){console.log("AD","点击查看广告"),ce.getInstance().reportNativeClick(c)}))}showNativeImageUI(e,t,a,i,s){console.log("ASCSDK","showNativeImage==========================="),this.nativeImage=new Laya.Sprite,this.nativeImage.loadImage(String(s.Native_BigImage)),this.nativeImage.zOrder=29999,Laya.stage.addChild(this.nativeImage),this.nativeImage.width=e,this.nativeImage.height=t,this.nativeImage.x=a,this.nativeImage.y=i;var n=new Laya.Sprite;n.loadImage(String(this.ICONInfo.iconButton)),this.nativeImage.addChild(n),n.width=e/5,n.height=n.width/70*34,n.x=e-n.width,n.y=0;var o=new Laya.Sprite;o.loadImage(this.ICONInfo.iconClose),o.width=45,o.height=45,this.nativeImage.addChild(o);let r=this;o.on("click",this,function(e){console.log("ASCSDK","手动关闭原生大图"),r.nativeImage.removeSelf(),e.stopPropagation()});let h=s.adId;this.nativeImage.on("click",this,function(){console.log("ASCSDK","点击原生大图"),ce.getInstance().reportNativeClick(h)})}hideNativeImageUI(){this.nativeImage?(this.nativeImage.removeSelf(),this.nativeImage=null,console.log("ASCSDK","hideNativeImageUI===========================")):console.log("ASCSDK","不存在原生大图 return")}hideNativePatch(){this.nativeImage?(this.nativeImage.removeSelf(),this.nativeImage=null,console.log("AD","hideNativePatchUI===========================")):console.log("AD","不存在原生大图 return")}showNavigateIcon(e,t,a,i){if(this.navigateBg)return void console.log("ASCSDK","已存在互推ICON return");console.log("ASCSDK","showNavigateIcon===========================");var s=this;this.navigateBg=new Laya.Sprite,this.navigateBg.width=e,this.navigateBg.height=t,this.navigateBg.x=a,this.navigateBg.y=i,this.navigateBg.on("click",this,function(){s.jumpToMiniGame(s.navigateInfom)}),Laya.stage.addChild(this.navigateBg),this.navigateBg.zOrder=29999;var n=new Laya.Sprite;n.width=.84*this.navigateBg.width,n.height=.84*this.navigateBg.height,this.navigateBg.addChild(n);var o=new Laya.Sprite;o.loadImage(this.navigateUITextures.moreGameTexture),o.width=.84*this.navigateBg.width,o.height=.19*this.navigateBg.height,o.x=0,o.y=.65*t,o.zOrder=20,n.addChild(o);var r=new Laya.Sprite;r.loadImage(this.navigateUITextures.maskTexture,Laya.Handler.create(this,function(){n.mask=r})),r.width=.84*e,r.height=.84*t,r.x=0,r.y=0;let h=0;var l=function(){if(s.navigateBg){var a=s.updateNavigateIcon();n.loadImage(a),n.scale(e/s.navigateBg.width*.84,t/s.navigateBg.height*.84)}};h=setInterval(l,3e4),l()}updateNavigateIcon(){console.log("ASCSDK","updateNavigateIcon===========================");for(var e=q.getInstance().navigateList,t=0,a=0;a<e.length;a++)e[a].sort>0&&(t+=e[a].sort);var i=Math.floor(Math.random()*t),s=0;let n=null,o=0;for(let t=0;t<e.length;t++)0!=e[t].sort&&(i>=s&&i<s+e[t].sort&&(n=e[t],o=t,console.log("ASCSDK","weight",i,e[t].pushGamePackage)),s+=e[t].sort);if(n)return this.navigateInfom=n,this.NavigateIconTextureList[o]}hideNavigateIcon(){this.navigateIconTimeInterval&&clearInterval(this.navigateIconTimeInterval),this.navigateBg?(console.log("ASCSDK","hideNavigateIcon==========================="),Laya.stage.removeChild(this.navigateBg),this.navigateBg=null):console.log("ASCSDK","不存在互推ICON return")}showNavigateGroup(e,t){if(this.navigateGroupBg)return void console.log("ASCSDK","存在互推列表 return");let a=q.getInstance();if(this.isLoadNavigateGroup){console.log("ASCSDK","showNavigateGroup===========================");var i=this;this.navigateGroupBg=new Laya.Sprite;var s=[];for(let e=0;e<a.navigateList.length;e++)s[e]=a.navigateList[e],s[e].index=e;var n=function(){for(var e=0,t=0;t<s.length;t++)e+=s[t].sort;var a=Math.floor(Math.random()*e),i=0;for(let e=0;e<s.length;e++){if(a>=i&&a<i+s[e].sort){var n=s[e];return s.splice(e,1),n}i+=s[e].sort}};if("vertical"==e){this.navigateGroupBg.pivotX=114,this.navigateGroupBg.pivotY=436.5;var o=1;"left"==t?(this.navigateGroupBg.x=-114,this.navigateGroupBg.scaleX=-1,o=-1):(this.navigateGroupBg.scaleX=1,this.navigateGroupBg.x=Laya.stage.width+114),this.navigateGroupBg.y=Laya.stage.height/2,Laya.stage.addChild(this.navigateGroupBg),this.navigateGroupBg.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/groupV.png"),this.navigateGroupBg.zOrder=3e4;let e=new Laya.Sprite;"left"==t?e.loadImage(this.navigateGroupUITextures.moreGameLeftTexture):e.loadImage(this.navigateGroupUITextures.moreGameRightTexture),e.pivotX=80,e.pivotY=50,e.x=-80,e.y=428.5,e.scaleX=o,this.navigateGroupBg.addChild(e),e.on("click",this,function(){if(i.groupMoving)return;i.groupMoving=!0;let t=0;var a=function(){i.navigateGroupBg.x+=-228*i.navigateGroupBg.scaleX/12,++t>=12&&(i.groupMoving=!1,Laya.timer.clear(this,a))};Laya.timer.frameLoop(1,this,a),e.visible=!1,s.visible=!0});let s=new Laya.Sprite;s.width=100,s.height=100,s.pivotX=50,s.pivotY=50,s.x=24,s.y=428.5,this.navigateGroupBg.addChild(s),(d=new Laya.Sprite).scaleX=1,d.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/left.png"),d.pivotX=8.5,d.pivotY=13,d.x=50,d.y=50,s.addChild(d),s.on("click",this,function(){if(console.log("ASCSDK","touchButtonClose"),i.groupMoving)return;i.groupMoving=!0;let t=0;var a=function(){i.navigateGroupBg.x+=228*i.navigateGroupBg.scaleX/12,++t>=12&&(i.groupMoving=!1,Laya.timer.clear(this,a),e.visible=!0,s.visible=!1)};Laya.timer.frameLoop(1,this,a)}),s.visible=!1;var r=new Laya.Sprite;this.navigateGroupBg.addChild(r),r.width=this.navigateGroupBg.width,r.height=this.navigateGroupBg.height,r.pivotX=r.width/2,r.pivotY=r.height/2,r.x=144,r.y=436.5,r.scaleX=this.navigateGroupBg.scaleX;var h=new Laya.Sprite;h.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/moreGameTitle.png"),h.pivotX=h.width/2,h.pivotY=h.height/2,h.x=114,h.y=36.5,r.addChild(h);for(var l=0;l<(a.navigateList.length>5?5:a.navigateList.length);l++){let e=n();(g=new Laya.Sprite).width=128,g.height=128,g.pivotX=g.width/2,g.pivotY=g.height/2,g.x=114,g.y=152+152*l,r.addChild(g);let t=new Laya.Sprite;t.loadImage(this.NavigateIconTextureList[e.index]),t.width=100,t.height=100,t.pivotX=50,t.pivotY=50,t.x=64,t.y=53,g.addChild(t);let a=new Laya.Sprite;a.loadImage(this.navigateGroupUITextures.maskTexture,Laya.Handler.create(this,function(){t.mask=a})),a.width=100,a.height=100,a.pivotX=50,a.pivotY=50,a.x=50,a.y=50,(u=new Laya.Label).font="Microsoft YaHei",u.text=e.pushGameName,u.fontSize=20,u.pivotX=u.width/2,u.pivotY=u.height/2,u.x=64,u.y=115,u.color="#000000",g.addChild(u),g.on("click",this,function(){i.jumpToMiniGame(e)})}}else{this.navigateGroupBg.pivotX=355,this.navigateGroupBg.pivotY=102.5;var c=1;Laya.stage.width<720&&(c=Laya.stage.width/720),this.navigateGroupBg.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/groupH.png");o=1;"left"==t?(this.navigateGroupBg.x=-355*c,this.navigateGroupBg.scaleX=-1*c,this.navigateGroupBg.scaleY=c,o=-1):(this.navigateGroupBg.scaleX=1*c,this.navigateGroupBg.x=Laya.stage.width+310*c,this.navigateGroupBg.scaleY=c,o=1),this.navigateGroupBg.y=Laya.stage.height/2,Laya.stage.addChild(this.navigateGroupBg),this.navigateGroupBg.zOrder=3e4;let e=new Laya.Sprite;"left"==t?e.loadImage(this.navigateGroupUITextures.moreGameLeftTexture):e.loadImage(this.navigateGroupUITextures.moreGameRightTexture),e.pivotX=80,e.pivotY=50,e.x=-80,e.scaleX=o,e.y=94.5,this.navigateGroupBg.addChild(e),e.on("click",this,function(){if(i.groupMoving)return;console.log("ASCSDK","touchButtonOpen"),i.groupMoving=!0;let t=0;var a=function(){i.navigateGroupBg.x+=-710*i.navigateGroupBg.scaleX/12,++t>=12&&(i.groupMoving=!1,Laya.timer.clear(this,a))};Laya.timer.frameLoop(1,this,a),e.visible=!1,s.visible=!0});let s=new Laya.Sprite;var d;this.navigateGroupBg.addChild(s),s.width=100,s.height=100,s.pivotX=50,s.pivotY=50,s.x=28*c,s.y=94.5,s.visible=!1,(d=new Laya.Sprite).loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateGroupRes/left.png"),d.pivotX=8.5,d.pivotY=13,d.x=50,d.y=50,s.addChild(d),s.on("click",this,function(){if(i.groupMoving)return;console.log("ASCSDK","touchButtonClose"),i.groupMoving=!0;let t=0;var a=function(){i.navigateGroupBg.x+=710*i.navigateGroupBg.scaleX/12,++t>=12&&(i.groupMoving=!1,Laya.timer.clear(this,a),e.visible=!0,s.visible=!1)};Laya.timer.frameLoop(1,this,a)}),(r=new Laya.Sprite).x=385,r.y=92.5,this.navigateGroupBg.addChild(r),r.width=this.navigateGroupBg.width,r.height=this.navigateGroupBg.height,r.pivotX=r.width/2,r.pivotY=r.height/2,r.scaleX=this.navigateGroupBg.scaleX;for(l=0;l<(a.navigateList.length>5?5:a.navigateList.length);l++){let e=n();var g;(g=new Laya.Sprite).width=128,g.height=128,g.pivotX=64,g.pivotY=64,g.x=90+128*l,g.y=107.5,r.addChild(g);let t=new Laya.Sprite;t.loadImage(this.NavigateIconTextureList[e.index]),t.width=100,t.height=100,t.pivotX=50,t.pivotY=50,t.x=64,t.y=53,g.addChild(t);let a=new Laya.Sprite;var u;a.loadImage(this.navigateGroupUITextures.maskTexture,Laya.Handler.create(this,function(){t.mask=a})),a.width=100,a.height=100,a.pivotX=50,a.pivotY=50,a.x=50,a.y=50,(u=new Laya.Label).font="Microsoft YaHei",u.text=e.pushGameName,u.fontSize=20,u.pivotX=u.width/2,u.pivotY=u.height/2,u.x=64,u.y=115,u.color="#000000",g.addChild(u),g.on("click",this,function(){i.jumpToMiniGame(e)})}}}else console.log("ASCSDK","互推列表未加载到 return")}hideNavigateGroup(){this.navigateGroupBg?(console.log("ASCSDK","hideNavigateGroup==========================="),this.navigateGroupBg.removeSelf(),this.navigateGroupBg=null):console.log("ASCSDK","互推列表不存在 return")}showNavigateSettle(e,t,a){if(ne.getInstance().hideBanner(),this.navigateSettleBg)return void console.log("ASCSDK","已存在结算互推 return");console.log("ASCSDK","showNavigateSettle===========================");let i=q.getInstance().navigateList;var s=Laya.stage.width,n=Laya.stage.height,o=[];for(let e=0;e<i.length;e++)o[e]=i[e],o[e].index=e;var r=function(){for(var e=0,t=0;t<o.length;t++)e+=o[t].sort;var a=Math.floor(Math.random()*e),i=0;for(let e=0;e<o.length;e++){if(a>=i&&a<i+o[e].sort){var s=o[e];return o.splice(e,1),s}i+=o[e].sort}};switch(e){case 1:if(i.length<6)return void console.log("ASCSDK","后台配置互推游戏小于6个");this.navigateSettleBg=new Laya.Sprite,Laya.stage.addChild(this.navigateSettleBg),this.navigateSettleBg.loadImage(this.navigateSettleUITextures.navigateSettle1Bg),this.navigateSettleBg.width=9*Laya.stage.width/10,this.navigateSettleBg.height=2*this.navigateSettleBg.width/3,this.navigateSettleBg.x=Laya.stage.width/2-this.navigateSettleBg.width/2,this.navigateSettleBg.y=Laya.stage.height-this.navigateSettleBg.height-a;for(let e=0;e<6;e++){let t=r(),a=new Laya.Sprite;this.navigateSettleBg.addChild(a),this.NavigateIconTextureList[t.index]&&a.loadImage(this.NavigateIconTextureList[t.index]),a.width=this.navigateSettleBg.width/4.5,a.height=a.width,a.x=this.navigateSettleBg.width/2-a.width/2+(e%3-1)*(4*a.width/3),a.y=this.navigateSettleBg.height/2-a.height/2+(e<3?3*-a.width/5:7*a.width/10);let i=new Laya.Sprite;a.addChild(i),i.loadImage(this.navigateSettleUITextures.iconNameBg),i.width=a.width,i.height=a.width/5,i.y=a.height+i.height/4;let s=new Laya.Label;i.addChild(s),s.width=i.width,s.height=i.height,s.x=0,s.y=0,s.fontSize=30,s.align="center",s.valign="middle",s.font="Microsoft YaHei",s.text=t.pushGameName.length>5?t.pushGameName.substring(0,5)+"...":t.pushGameName,a.on("click",this,function(){h.jumpToMiniGame(t)})}break;case 3:{if(i.length<5)return void console.log("ASCSDK","互推游戏小于5个");var h=this;this.navigateSettleBg=new Laya.Sprite,this.navigateSettleBg.x=0,this.navigateSettleBg.y=0,this.navigateSettleBg.zOrder=3e4,Laya.stage.addChild(this.navigateSettleBg),(I=new Laya.Image).skin=this.navigateSettleUITextures.navigateSettleGroup,Laya.stage.width<Laya.stage.height?(I.width=.904*Laya.stage.width,I.height=.317*I.width):(I.height=Laya.stage.height/5,I.width=I.height/.317),I.x=t-I.width/2,I.y=a-I.height/2,I.sizeGrid="30,30,30,30,0",h.navigateSettleBg.addChild(I);var l=new Laya.Image;l.skin=this.navigateSettleUITextures.navigateSettletitleBg,l.width=.972*I.width,l.height=.22*I.height,l.x=I.width/2-l.width/2,l.y=.018*I.height,l.sizeGrid="10,30,10,30,0";let e=new Laya.Label;e.font="Microsoft YaHei",e.text="更多精品游戏推荐",e.fontSize=30*(s<n?s/1080:n/1080),e.color="#FFFFFF",e.x=l.width/2-e.width/2,e.y=l.height/2-e.height/2,l.addChild(e),I.addChild(l);for(var c=I.width/5,d=0;d<5;d++){let e=r();var g=new Laya.Sprite;g.width=c,g.height=c,g.x=d*c,g.y=.018*I.height+l.height,console.log("button"+d,g.x,g.y),I.addChild(g);var u=new Laya.Sprite;u.loadImage(this.navigateSettleUITextures.iconWihte),u.width=.781*c+2,u.height=.781*c+2,u.x=c/2-u.width/2,u.y=c/2-u.width/2-.085*c,g.addChild(u);var S=new Laya.Sprite;S.loadImage(this.NavigateIconTextureList[e.index]),S.width=.781*c,S.height=.781*c,S.x=c/2-S.width/2,S.y=c/2-S.width/2-.085*c,S.zOrder=1e3,g.addChild(S);let t=new Laya.Sprite;t.loadImage(this.navigateSettleUITextures.mask,Laya.Handler.create(this,function(){S.mask=t})),t.width=.781*c,t.height=.781*c,t.x=0,t.y=0;var m=new Laya.Label;m.font="Microsoft YaHei",m.text=e.pushGameName,m.fontSize=25*(s<n?s/1080:n/1080),m.x=c/2-m.width/2,m.y=t.y+t.height/2+.546*c+m.height/2,m.color="#FFFFFF",g.addChild(m),g.on("click",this,function(){h.jumpToMiniGame(e)})}}break;case 4:{if(i.length<5)return void console.log("ASCSDK","OPPO 互推样式的游戏数量小于5个 return");var I;this.navigateSettleBg=new Laya.Sprite,this.navigateSettleBg.width=0,this.navigateSettleBg.height=0,this.navigateSettleBg.zOrder=3e4,Laya.stage.addChild(this.navigateSettleBg),(I=new Laya.Image).skin=this.navigateSettleUITextures.navigateBanner,Laya.stage.width<Laya.stage.height?(I.width=Laya.stage.width,I.height=13*I.width/35):(I.height=.4*Laya.stage.height,I.width=35*I.height/13),I.x=Laya.stage.width/2-I.width/2,I.y=Laya.stage.height-I.height-a,this.navigateSettleBg.addChild(I);let e=I.width/6.5;for(let t=0;t<5;t++){let a=r(),i=new Laya.Sprite;i.loadImage(this.NavigateIconTextureList[a.index]),i.width=e,i.height=e,i.x=I.width/25+I.width/5.25*t,i.y=I.height/2.8,I.addChild(i);let s=new Laya.Label;s.color="#000000",s.align="center",s.valign="middle",s.overflow="hidden",s.fontSize=30;let n=a.pushGameName;a.pushGameName.length>4&&(n=n.substring(0,4)+"..."),s.text=n,s.width=i.width,s.height=.4*i.height,s.x=0,s.y=i.height,i.addChild(s);let o=this;i.on("click",this,function(){o.jumpToMiniGame(a)})}}break;default:console.log("ASCSDK","不存在该种类型结算互推:"+e)}}hideNavigateSettle(){this.navigateSettleBg?(console.log("ASCSDK","hideNavigateSettle==========================="),this.navigateSettleBg.removeSelf(),this.navigateSettleBg=null):console.log("ASCSDK","不存在结算互推 return")}jumpToMiniGame(e){switch(A.getPlatform()){case w.GP_Oppo:console.log("ASCSDK","OPPO jumpToMiniGame==========================="),Q.getInstance().statistics(e),qg.navigateToMiniGame({pkgName:e.pushGamePackage,success:function(){},fail:function(e){console.log("ASCSDK",JSON.stringify(e))}});break;case w.GP_WX:wx.navigateToMiniProgram({appId:e.pushGamePackage,path:"?foo=bar",success(t){Q.getInstance().statistics(e),console.log("ASCSDK","WX 跳转成功")},fail(e){console.log("ASCSDK","WX 跳转失败："+JSON.stringify(e))}})}}}class re{constructor(){this.nativeAd=null,this.nativeInfo=null,this.nativeContent=null,this.isLoadIconNative=!1,this.isLoadImageNative=!1,this.tempID=""}static getInstance(){return re.instance||(re.instance=new re),re.instance}showNativeBanner(){oe.getInstance().showNativeBannerUI(this.nativeInfo)}updateNativeBanner(){oe.getInstance().hideNativeBannerUI(),oe.getInstance().showNativeBannerUI(this.nativeInfo)}hideNativeBaner(){oe.getInstance().hideNativeBannerUI()}createNativeAd(e){console.log("ASCSDK","OPPO 加载原生广告",e),this.nativeAd=qg.createNativeAd({posId:e}),this.nativeInfo={adId:null,title:"特别惊喜",desc:"点我一下可不可以啊",clickBtnTxt:null,Native_icon:null,Native_BigImage:null},this.nativeContent={adId:null,title:null,desc:null,Native_icon:null,Native_BigImage:null,NativeAdTip:"https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeIconRes/ICONAd.png",NativeClose:"https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeBannerRes/nativeBannerClose.png"};var t=this;this.nativeAd.onLoad(function(e){console.log("ASCSDK","OPPO 原生广告加载成功",JSON.stringify(e.adList));for(var a=0,i=0;i<e.adList.length;i++){if(""!=e.adList[i].icon.length&&e.adList[i].imgUrlList.length>0){console.log("ASCSDK","OPPO 同时存在原生ICON和大图"),a=i;break}if(i==e.adList.length-1&&(e.adList[i].icon.length>0||e.adList[i].imgUrlList.length>0)){console.log("ASCSDK","OPPO 只存在原生ICON或大图"),a=i;break}}t.nativeInfo.adId=String(e.adList[a].adId),t.nativeInfo.title=String(e.adList[a].title),t.nativeInfo.desc=String(e.adList[a].desc),t.nativeInfo.clickBtnTxt=String(e.adList[a].clickBtnTxt),t.nativeContent.adId=String(e.adList[a].adId),t.nativeContent.title=String(e.adList[a].title),t.nativeContent.desc=String(e.adList[a].desc),e.adList&&""!=e.adList[a].icon?(Laya.loader.load(String(e.adList[a].icon),Laya.Handler.create(this,function(){console.log("ASCSDK","OPPO 原生ICON加载成功"),t.nativeInfo.Native_icon=String(e.adList[a].icon),t.isLoadIconNative=!0})),t.nativeContent.Native_icon=String(e.adList[a].icon)):(t.nativeInfo.Native_icon=null,t.isLoadIconNative=!1),e.adList&&e.adList[a].imgUrlList.length>0?(Laya.loader.load(String(e.adList[a].imgUrlList[0]),Laya.Handler.create(this,function(){console.log("ASCSDK","OPPO 原生大图加载成功"),t.nativeInfo.Native_BigImage=String(e.adList[a].imgUrlList[0]),t.isLoadImageNative=!0})),t.nativeContent.Native_BigImage=String(e.adList[a].imgUrlList[0])):(t.nativeInfo.Native_BigImage=null,t.isLoadImageNative=!1)}),this.nativeAd.onError(e=>{console.log("ASCSDK","OPPO 原生广告加载失败："+JSON.stringify(e))}),this.nativeAd.load()}nativeUpdate(){this.nativeAd&&this.nativeAd.load()}getIconNativeFlag(){return this.isLoadIconNative}getImageNativeFlag(){return this.isLoadImageNative}showNativeInters(e){var t=this;if(e<=1)t.reportNativeShow(t.nativeInfo.adId);else for(var a=0;a<e;a++)setTimeout(()=>{t.reportNativeShow(t.nativeInfo.adId)},5e3*a);oe.getInstance().showNativeIntersUI(this.nativeInfo)}showNativeIcon(e,t,a,i){this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativeIconUI(e,t,a,i,this.nativeInfo)}showNativePatch(e,t,a,i,s,n){this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativePatchUI(e,t,a,i,s,n,this.nativeInfo)}showNativeImage(e,t,a,i){this.reportNativeShow(this.nativeInfo.adId),oe.getInstance().showNativeImageUI(e,t,a,i,this.nativeInfo)}getNativeInfo(){return this.nativeContent}reportNativeShow(e){this.tempID!=e?(this.tempID=e,console.log("ASCSDK","OPPO 原生广告上报展示","广告ID为:"+e),this.nativeAd.reportAdShow({adId:e})):console.log("ASCSDK","OPPO 该原生广告ID已上报展示")}reportNativeClick(e){console.log("ASCSDK","OPPO 上报原生广告点击","广告ID为:"+e),this.nativeAd.reportAdClick({adId:e})}}class he{constructor(){this.nativeIcon=null,this.nativeImage=null}static getInstance(){return he.instance||(he.instance=new he),he.instance}createNativeIcon(){}showNativeIcon(e,t,a,i){this.nativeIcon?console.log("ASCSDK","Test 已存在原生ICON return"):(console.log("ASCSDK","Test showNativeIcon===================="),this.nativeIcon=new Laya.Sprite,this.nativeIcon.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NavigateIconRes/iconBg.png"),this.nativeIcon.width=e,this.nativeIcon.height=t,this.nativeIcon.x=a,this.nativeIcon.y=i,this.nativeIcon.zOrder=29999,Laya.stage.addChild(this.nativeIcon))}hideNativeIcon(){this.nativeIcon?(console.log("ASCSDK","Test hideNativeICON=============="),this.nativeIcon.removeSelf(),this.nativeIcon=null):console.log("ASCSDK","Test 不存在原生ICON return")}showNativeImage(e,t,a,i){this.nativeImage?console.log("ASCSDK","Test 已存在原生大图 return"):(console.log("ASCSDK","Test showNativeImage=================="),this.nativeImage=new Laya.Sprite,this.nativeImage.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/TestRes/fakeNativeImage.png"),this.nativeImage.width=e,this.nativeImage.height=t,this.nativeImage.x=a,this.nativeImage.y=i,this.nativeImage.zOrder=29999,Laya.stage.addChild(this.nativeImage))}hideNativeImage(){this.nativeImage?(console.log("ASCSDK","Test hideNativeImage=============="),this.nativeImage.removeSelf(),this.nativeImage=null):console.log("ASCSDK","Test 不存在原生大图 return")}}class le{constructor(){this.NativeID="",this.nativeAd=null,this.isLoadIconNative=!1,this.iconCloseUpdate=null,this.iconX=0,this.iconY=0,this.updateICON=null}static getInstance(){return le.instance||(le.instance=new le),le.instance}createNativeAd(e){A.getInstance().isversionNewThanEngineVersion("2.11.1")?(this.NativeID=e,console.log("ASCSDK","WX 原生广告初始化",e),this.nativeAd=wx.createCustomAd({adUnitId:e,adIntervals:30,style:{left:this.iconX,top:this.iconY,fixed:!0}}),this.nativeAd.onLoad(()=>{console.log("ASCSDK","WX 原生ICON加载成功"),this.isLoadIconNative=!0}),this.nativeAd.onError(e=>{console.log("ASCSDK","WX 原生ICON加载失败:"+JSON.stringify(e)),this.isLoadIconNative=!1}),this.nativeAd.onClose(()=>{console.log("ASCSDK","WX 手动关闭原生ICON 30s后再次刷新"),this.iconCloseUpdate=setTimeout(()=>{this.nativeAd.createNativeAd(e),setTimeout(()=>{this.nativeAd.show()},500)},3e4)})):console.log("ASCSDK","WX 平台版本过低,不能创建原生广告")}getIconNativeFlag(){return this.isLoadIconNative}showNativeIcon(e,t){let a=this,i=Number(wx.getSystemInfoSync().windowWidth),s=Number(wx.getSystemInfoSync().windowHeight),n=t;t=Laya.stage.height-t,this.iconX=e*(i/Laya.stage.width),this.iconY=t*(s/Laya.stage.height),this.createNativeAd(this.NativeID),setTimeout(()=>{console.log("ASCSDK","WX showNativeIcon==============================="),this.nativeAd.show()},500),this.updateICON=setInterval(()=>{console.log("ASCSDK","WX 刷新原生ICON广告================"),a.nativeAd.destroy(),a.showNativeIcon(e,n)},3e4)}hideNativeIcon(){this.iconCloseUpdate&&(clearTimeout(this.iconCloseUpdate),this.iconCloseUpdate=null),this.updateICON&&(clearInterval(this.updateICON),this.updateICON=null),this.nativeAd?(console.log("ASCSDK","WX hideNativeIcon===============================');"),this.nativeAd.destroy()):console.log("ASCSDK","WX 不存在原生广告实例")}}class ce{constructor(){this.ID_NativeID="",this.SW_NativeMainSwitch=!1,this.IsOpenNative=!1,this.NUM_NativeIntersReportFrequency=1,this.NUM_NativeUpdateTime=30,this.onNativeIconShow=!1,this.onNativeImageShow=!1,this.oldNativeIconSize=null,this.nativeIconUpdate=null,this.nativeImageUpdate=null,this.nativeAdShowInfo=["",""]}static getInstance(){return ce.instance||(ce.instance=new ce),ce.instance}createNativeAd(){if(this.SW_NativeMainSwitch){switch(A.getPlatform()){case w.GP_Oppo:oe.getInstance().loadNativeInstersRes(),oe.getInstance().loadNativeBannerRes(),oe.getInstance().loadNativeIconRes(),re.getInstance().createNativeAd(this.ID_NativeID);break;case w.GP_Vivo:oe.getInstance().loadNativeInstersRes(),oe.getInstance().loadNativeBannerRes(),oe.getInstance().loadNativeIconRes(),$.getInstance().createNativeAd(this.ID_NativeID);break;case w.GP_WX:return void le.getInstance().createNativeAd(this.ID_NativeID);case w.GP_HW:oe.getInstance().loadNativeInstersRes(),oe.getInstance().loadNativeBannerRes()}this.updateNativeAd()}else console.log("ASCSDK","原生广告总开关没有开启")}getIconNativeFlag(){switch(A.getPlatform()){case w.GP_Oppo:return re.getInstance().getIconNativeFlag();case w.GP_Vivo:return $.getInstance().getIconNativeFlag();case w.GP_WX:return le.getInstance().getIconNativeFlag();case w.GP_Test:return!0;default:return!1}}isLoadNativeInsertRes(){return oe.getInstance().NIUIInfo.layerBg}showNativeIcon(e,t,a,i){if(A.getPlatform()!=w.GP_Test)if(this.SW_NativeMainSwitch)if(this.getIconNativeFlag())if(this.onNativeIconShow)console.log("ASCSDK","原生ICON正在展示中,请勿多次showNativeIcon return");else{switch(this.onNativeIconShow=!0,A.getPlatform()){case w.GP_Oppo:re.getInstance().showNativeIcon(e,t,a,i);break;case w.GP_Vivo:$.getInstance().showNativeIcon(e,t,a,i);break;case w.GP_WX:return void le.getInstance().showNativeIcon(a,i)}this.oldNativeIconSize={width:e,height:t,x:a,y:i},this.nativeIconUpdate=setTimeout(()=>{console.log("ASCSDK","原生ICON刷新======================"),this.hideNativeIcon(),this.showNativeIconAsOld()},1e3*this.NUM_NativeUpdateTime)}else console.log("ASCSDK","原生广告不存在ICON return");else console.log("ASCSDK","原生广告总开关没有开启");else he.getInstance().showNativeIcon(e,t,a,i)}hideNativeIcon(){if(A.getPlatform()!=w.GP_Test)switch(this.nativeIconUpdate&&clearTimeout(this.nativeIconUpdate),this.onNativeIconShow=!1,A.getPlatform()){case w.GP_Oppo:case w.GP_Vivo:oe.getInstance().hideNativeIconUI();break;case w.GP_WX:return void le.getInstance().hideNativeIcon()}else he.getInstance().hideNativeIcon()}showNativeIconAsOld(){this.showNativeIcon(this.oldNativeIconSize.width,this.oldNativeIconSize.height,this.oldNativeIconSize.x,this.oldNativeIconSize.y)}showNativePatch(e,t,a,i,s,n){if(A.getPlatform()!=w.GP_Test)if(this.SW_NativeMainSwitch)if(this.getImageNativeFlag())if(this.onNativeImageShow)console.log("AD","原生大图正在展示中,请勿多次showNativeImage return");else{switch(this.onNativeImageShow=!0,A.getPlatform()){case w.GP_Oppo:re.getInstance().showNativePatch(e,t,a,i,s,n);break;case w.GP_Vivo:$.getInstance().showNativePatch(e,t,a,i,s,n)}this.nativeImageUpdate=setTimeout(()=>{console.log("AD","原生大图刷新======================"),this.hideNativePatch(),this.showNativePatch(e,t,a,i,s,n)},1e3*this.NUM_NativeUpdateTime)}else console.log("AD","原生广告不存在大图 return");else console.log("AD","原生广告总开关没有开启");else he.getInstance().showNativeImage(a,i,s,n)}hideNativePatch(){if(A.getPlatform()!=w.GP_Test)switch(this.nativeImageUpdate&&clearTimeout(this.nativeImageUpdate),this.onNativeImageShow=!1,A.getPlatform()){case w.GP_Oppo:case w.GP_Vivo:oe.getInstance().hideNativePatch()}else he.getInstance().hideNativeImage()}getImageNativeFlag(){switch(A.getPlatform()){case w.GP_Oppo:return re.getInstance().getImageNativeFlag();case w.GP_Vivo:return $.getInstance().getImageNativeFlag();case w.GP_HW:return ie.getInstance().getImageNativeFlag();case w.GP_Test:return!0;default:return!1}}showNativeImage(e,t,a,i){if(A.getPlatform()!=w.GP_Test)if(this.SW_NativeMainSwitch)if(this.getImageNativeFlag())if(this.onNativeImageShow)console.log("ASCSDK","原生大图正在展示中,请勿多次showNativeImage return");else{switch(this.onNativeImageShow=!0,A.getPlatform()){case w.GP_Oppo:re.getInstance().showNativeImage(e,t,a,i);break;case w.GP_Vivo:$.getInstance().showNativeImage(e,t,a,i)}this.nativeImageUpdate=setTimeout(()=>{console.log("ASCSDK","原生大图刷新======================"),this.hideNativeImage(),this.showNativeImage(e,t,a,i)},1e3*this.NUM_NativeUpdateTime)}else console.log("ASCSDK","原生广告不存在大图 return");else console.log("ASCSDK","原生广告总开关没有开启");else he.getInstance().showNativeImage(e,t,a,i)}hideNativeImage(){if(A.getPlatform()!=w.GP_Test)switch(this.nativeImageUpdate&&clearTimeout(this.nativeImageUpdate),this.onNativeImageShow=!1,A.getPlatform()){case w.GP_Oppo:case w.GP_Vivo:oe.getInstance().hideNativeImageUI()}else he.getInstance().hideNativeImage()}showNativeInters(e){switch(A.getPlatform()){case w.GP_Oppo:console.log("ASCSDK","OPPO 暂不支持插屏");break;case w.GP_Vivo:$.getInstance().showNativeInters(this.NUM_NativeIntersReportFrequency,e);break;case w.GP_HW:ie.getInstance().showNativeInters(this.NUM_NativeIntersReportFrequency)}}updateNativeAd(){setInterval(()=>{switch(A.getPlatform()){case w.GP_Oppo:re.getInstance().nativeUpdate();break;case w.GP_Vivo:$.getInstance().nativeUpdate()}},1e3*this.NUM_NativeUpdateTime)}showNativeBanner(){switch(A.getPlatform()){case w.GP_Oppo:re.getInstance().showNativeBanner();break;case w.GP_Vivo:$.getInstance().showNativeBanner();break;case w.GP_HW:ie.getInstance().showNativeBanner()}}hideNativeBanner(){switch(A.getPlatform()){case w.GP_Oppo:re.getInstance().hideNativeBaner();break;case w.GP_Vivo:$.getInstance().hideNativeBaner();break;case w.GP_HW:ie.getInstance().hideNativeBaner()}}showNativePrivacy(e=null,t=null){oe.getInstance().showNativePrivacy(e,t)}getNativeInfo(){switch(A.getPlatform()){case w.GP_Oppo:return re.getInstance().getNativeInfo();case w.GP_Vivo:return $.getInstance().getNativeInfo();default:return{adId:"88888888",title:"测试标题",desc:"测试详情",Native_icon:"https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/TestRes/fakeNativeIcon.png",Native_BigImage:"https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/TestRes/fakeNativeImage.png",NativeAdTip:"https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeIconRes/ICONAd.png",NativeClose:"https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeBannerRes/nativeBannerClose.png"}}}reportNativeShow(e){switch(A.getPlatform()){case w.GP_Oppo:re.getInstance().reportNativeShow(e);break;case w.GP_Vivo:$.getInstance().reportNativeShow(e);break;case w.GP_HW:ie.getInstance().reportNativeShow(e)}}reportNativeClick(e){switch(A.getPlatform()){case w.GP_Oppo:re.getInstance().reportNativeClick(e);break;case w.GP_Vivo:$.getInstance().reportNativeClick(e);break;case w.GP_HW:ie.getInstance().reportNativeClick(e)}}onGameShow(){A.getPlatform()==w.GP_HW&&hbs.onShow(()=>{console.log("ASCSDK","HW 游戏回到前台,是否有原生广告展示中:",""!=this.nativeAdShowInfo[0]||""!=this.nativeAdShowInfo[1]),""!=this.nativeAdShowInfo[0]&&this.reportNativeShow(this.nativeAdShowInfo[0]),""!=this.nativeAdShowInfo[1]&&this.reportNativeShow(this.nativeAdShowInfo[1])})}}class de{constructor(){this.nativeIntersErrorTimes=0,this.NIUIInfo=null}static getInstance(){return de.instance||(de.instance=new de),de.instance}showInters(e){console.log("ASCSDK","Test showInters==========================="),this.NIUIInfo={layerBg:null,exit:null};var t=["https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeInsertRes/layerBg.png","https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/NativeInsertRes/nativeClose.png"];let a=this;Laya.loader.load(t,Laya.Handler.create(this,function(i){a.NIUIInfo.layerBg=t[0],a.NIUIInfo.exit=t[1],console.log("ASCSDK","Test showNativeInters===========================");var s=Laya.stage.width,n=Laya.stage.height,o=new Laya.Sprite;o.loadImage(a.NIUIInfo.layerBg),o.width=s,o.height=n,o.alpha=.8,o.zOrder=3e4,o.mouseEnabled=!0,Laya.stage.addChild(o);var r=new Laya.Label;r.x=s/2,r.y=n/2,r.text="这是一个测试插屏,请点击右上角关闭",r.color="#ff0000",r.fontSize=50,r.centerX=0,r.centerY=0,o.addChild(r);var h=new Laya.Sprite;h.loadImage(a.NIUIInfo.exit),h.x=3*s/4,h.y=2*s/5,h.zOrder=30010,h.mouseEnabled=!0,o.addChild(h),h.on("click",this,t=>{console.log("ASCSDK","关闭测试插屏"),Laya.stage.removeChild(o),e&&e()})}))}}class ge{constructor(){this.SW_OnIntersShow=!1,this.systemIntersAd=null,this.isLoadSystemInter=!1,this.sysLoadErrNum=0,this.closeBack=null}static getInstance(){return ge.instance||(ge.instance=new ge),ge.instance}createSystemInters(e){console.log("ASCSDK","VIVO 系统插屏广告初始化",e);let t=e;this.systemIntersAd=qg.createInterstitialAd({posId:e}),this.systemIntersAd.onLoad(()=>{console.log("ASCSDK","VIVO 系统插屏广告加载完成"),this.isLoadSystemInter=!0}),this.systemIntersAd.onError(e=>{console.log("ASCSDK","VIVO 系统插屏加载失败："+JSON.stringify(e)),this.isLoadSystemInter=!1,1008!=e.errCode&&(this.sysLoadErrNum++,console.log("ASCSDK","VIVO 系统插屏加载错误次数:"+this.sysLoadErrNum),this.sysLoadErrNum<5&&setTimeout(()=>{this.createSystemInters(t)},1e4))}),this.systemIntersAd.onClose(()=>{console.log("ASCSDK","VIVO 系统插屏广告关闭"),ve.getInstance().intersNowTime=0,this.isLoadSystemInter=!1,this.closeBack&&this.closeBack(),setTimeout(()=>{this.createSystemInters(t)},1e4)})}getSystemIntersFlag(){return this.isLoadSystemInter}showSystemInters(e){this.systemIntersAd?(console.log("ASCSDK","VIVO showSystemInters=================="),this.systemIntersAd.show().then(()=>{this.closeBack=e,console.log("ASCSDK","VIVO 系统插屏广告展示成功==================")}).catch(e=>{console.log("ASCSDK","VIVO 系统插屏展示错误:"+JSON.stringify(e)),ve.getInstance().intersNowTime=0})):console.log("ASCSDK","VIVO 未创建系统插屏广告")}}class ue{constructor(){this.SW_OnIntersShow=!1,this.systemIntersAd=null,this.isLoadSystemInter=!1}static getInstance(){return ue.instance||(ue.instance=new ue),ue.instance}getSystemIntersFlag(){return this.isLoadSystemInter}createSystemInters(e){console.log("ASCSDK","Tiktok 插屏广告初始化",e);let t=tt.getSystemInfoSync().appName;if("Toutiao"!=t&&("Douyin"!=t||A.getInstance().isversionNewThanEngineVersion("1.71")))return void console.log("ASCSDK","非抖音/今日头条平台 或抖音平台版本过低 return");this.systemIntersAd=tt.createInterstitialAd({adUnitId:e});let a=this;this.systemIntersAd.onLoad(()=>{console.log("ASCSDK","Tiktok 插屏广告加载完成"),this.isLoadSystemInter=!0}),this.systemIntersAd.onError(e=>{console.log("ASCSDK","Tiktok 插屏加载失败 ："+JSON.stringify(e)),this.systemIntersAd&&setTimeout(()=>{a.systemIntersAd&&a.systemIntersAd.load()},3e4)}),this.systemIntersAd.onClose(()=>{console.log("ASCSDK","Tiktok 关闭插屏,重新创建插屏广告"),a.systemIntersAd.destroy(),a.createSystemInters(ve.getInstance().ID_SystemIntersId),a.isLoadSystemInter=!1,a.systemIntersAd.load()}),this.systemIntersAd.load()}showSystemInters(){this.systemIntersAd?(console.log("ASCSDK","Tiktok 展示系统插屏=================="),this.systemIntersAd.show()):console.log("ASCSDK","Tiktok 系统插屏广告未初始化")}}class Se{constructor(){this.SW_OnIntersShow=!1,this.systemIntersAd=null,this.isLoadSystemInter=!1}static getInstance(){return Se.instance||(Se.instance=new Se),Se.instance}getSystemIntersFlag(){return this.isLoadSystemInter}createSystemInters(e){if(!A.getInstance().isversionNewThanEngineVersion("1.12.0"))return void console.log("ASCSDK","QQ 平台版本过低,创建插屏失败 return");console.log("ASCSDK","QQ 插屏广告初始化",e);let t=this;this.systemIntersAd=qq.createInterstitialAd({adUnitId:e}),this.systemIntersAd.onLoad(()=>{console.log("ASCSDK","QQ 插屏广告加载完成"),t.isLoadSystemInter=!0}),this.systemIntersAd.onError(e=>{console.log("ASCSDK","QQ 插屏广告加载失败："+JSON.stringify(e)),t.isLoadSystemInter=!1,t.systemIntersAd&&setTimeout(()=>{t.systemIntersAd&&t.systemIntersAd.load()},3e4)}),this.systemIntersAd.load()}showSystemInters(){this.systemIntersAd&&this.isLoadSystemInter?(console.log("ASCSDK","QQ 展示系统插屏=================="),this.systemIntersAd.show()):console.log("ASCSDK","QQ 系统插屏广告未加载")}}class me{constructor(){this.systemIntersAd=null,this.isLoadSystemInter=!1}static getInstance(){return me.instance||(me.instance=new me),me.instance}getSystemIntersFlag(){return this.isLoadSystemInter}createSystemInters(e){console.log("ASCSDK","WX 插屏广告初始化",e);let t=this;this.systemIntersAd=wx.createInterstitialAd({adUnitId:e}),this.systemIntersAd.onLoad(()=>{console.log("ASCSDK","WX 插屏广告加载完成"),t.isLoadSystemInter=!0}),this.systemIntersAd.onError(e=>{console.log("ASCSDK","WX 插屏广告加载失败："+JSON.stringify(e)),t.isLoadSystemInter=!1,t.systemIntersAd&&setTimeout(()=>{t.systemIntersAd&&t.systemIntersAd.load()},3e4)}),this.systemIntersAd.load()}showSystemInters(){this.systemIntersAd&&this.isLoadSystemInter?(console.log("ASCSDK","WX showSystemInters=================="),this.systemIntersAd.show(),ve.getInstance().intersNowTime=0):console.log("ASCSDK","WX 系统插屏广告未加载")}}class Ie{constructor(){this.systemIntersAd=null,this.isLoadSystemInter=!1}static getInstance(){return Ie.instance||(Ie.instance=new Ie),Ie.instance}getSystemIntersFlag(){return this.isLoadSystemInter}createSystemInters(e){console.log("ASCSDK","XM 插屏广告初始化",e);let t=this;this.systemIntersAd=qg.createInterstitialAd({adUnitId:e}),this.systemIntersAd.onLoad(()=>{console.log("ASCSDK","XM 插屏广告加载完成"),t.isLoadSystemInter=!0}),this.systemIntersAd.onError(e=>{console.log("ASCSDK","XM 插屏广告加载失败："+JSON.stringify(e)),t.isLoadSystemInter=!1,t.systemIntersAd&&setTimeout(()=>{t.systemIntersAd&&t.systemIntersAd.load()},3e4)}),this.systemIntersAd.onClose(()=>{console.log("ASCSDK","XM 系统插屏广告关闭"),ve.getInstance().intersNowTime=0,this.isLoadSystemInter=!1,setTimeout(()=>{this.createSystemInters(e)},1e4)})}showSystemInters(){this.systemIntersAd&&this.isLoadSystemInter?(console.log("ASCSDK","XM showSystemInters=================="),this.systemIntersAd.show()):console.log("ASCSDK","XM 系统插屏广告未加载")}}class ve{constructor(){this.ID_SystemIntersId="",this.SW_IsAllInterOpen=!1,this.SW_SystemIntersSwitch=!1,this.SW_NativeIntersSwitch=!1,this.SW_IntersBaseControlSwitch=!1,this.NUM_NativeIntersPercent=0,this.NUM_IntersIntervalNum=0,this.NUM_IntersIntervalTime=0,this.NUM_IntersDelayTime=0,this.NUM_IntersDelayPercent=0,this.NUM_IntersStartNum=0,this.intersShowTime=0,this.intersNowInterval=0,this.intersNowTime=0,this.deskTimes=0}static getInstance(){return ve.instance||(ve.instance=new ve),ve.instance}runIntersInterval(){this.NUM_IntersIntervalTime>0&&setInterval(()=>{this.intersNowTime++},1e3)}getIntersFlag(){switch(A.getPlatform()){case w.GP_Oppo:return!(!O.getInstance().SW_DesktopSwitch||!O.getInstance().SW_IntersToDesktop||0==O.getInstance().NUM_DeskAutoMostTimes||0==O.getInstance().NUM_IntersAddDesktopNumber)||(console.log("AD","桌面开关未开启或次数未设置"),!1);case w.GP_Test:return!0;default:return this.SW_SystemIntersSwitch||this.SW_NativeIntersSwitch?this.getSystemIntersFlag()||ce.getInstance().getIconNativeFlag()||ce.getInstance().getImageNativeFlag()||O.getInstance().NUM_IntersAddDesktopNumber>0||A.getPlatform()==w.GP_HW:void console.log("AD","插屏开关未开启")}}createSystemInters(){if(this.SW_SystemIntersSwitch)switch(A.getPlatform()){case w.GP_Oppo:console.log("AD","OPPO 已关闭插屏广告");break;case w.GP_Vivo:ge.getInstance().createSystemInters(this.ID_SystemIntersId);break;case w.GP_Tiktok:ue.getInstance().createSystemInters(this.ID_SystemIntersId);break;case w.GP_QQ:Se.getInstance().createSystemInters(this.ID_SystemIntersId);break;case w.GP_WX:me.getInstance().createSystemInters(this.ID_SystemIntersId);break;case w.GP_XM:Ie.getInstance().createSystemInters(this.ID_SystemIntersId)}else console.log("AD","系统插屏开关未开启")}getSystemIntersFlag(){switch(A.getPlatform()){case w.GP_Vivo:return ge.getInstance().getSystemIntersFlag();case w.GP_Tiktok:return ue.getInstance().getSystemIntersFlag();case w.GP_QQ:return Se.getInstance().getSystemIntersFlag();case w.GP_WX:return me.getInstance().getSystemIntersFlag();case w.GP_XM:return Ie.getInstance().getSystemIntersFlag();default:return!1}}showInters(e){switch(A.getPlatform()){case w.GP_Oppo:return this.intersShowTime++,void(this.intersShowTime==O.getInstance().NUM_IntersAddDesktopNumber&&this.deskTimes<O.getInstance().NUM_DeskAutoMostTimes?O.getInstance().getDeskTopFlag(e=>{e&&(this.deskTimes++,this.intersShowTime=0,console.log("AD","插屏变添加桌面"),O.getInstance().addDeskTop(e=>{}))}):console.log("AD","插屏变添加桌面次数未达到或自动弹添加桌面次数已达上限或已成功添加桌面"));case w.GP_Test:return void de.getInstance().showInters(e);default:if(!this.SW_SystemIntersSwitch&&!this.SW_NativeIntersSwitch)return void console.log("AD","插屏开关未开启")}var t=this;if(this.intersShowTime++,O.getInstance().SW_IntersToDesktop&&this.intersShowTime<=O.getInstance().NUM_IntersAddDesktopNumber&&(console.log("AD","第"+O.getInstance().NUM_IntersAddDesktopNumber+"次插屏变添加桌面","当前第"+this.intersShowTime+"个"),this.intersShowTime==O.getInstance().NUM_IntersAddDesktopNumber))O.getInstance().getDeskTopFlag(e=>{e&&(console.log("AD","插屏变添加桌面"),O.getInstance().addDeskTop(e=>{}))});else{if(this.SW_IntersBaseControlSwitch){if(this.intersShowTime<this.NUM_IntersStartNum)return void console.log("AD","插屏开始次数未达到",this.intersShowTime,"目标次数",this.NUM_IntersStartNum);if(this.intersNowInterval<this.NUM_IntersIntervalNum)return console.log("AD","插屏间隔次数未达到",this.intersNowInterval,"目标次数",this.NUM_IntersIntervalNum),void this.intersNowInterval++;if(this.intersNowTime<this.NUM_IntersIntervalTime){console.log("AD","插屏间隔时间未达到",this.intersNowTime,"目标时间",this.NUM_IntersIntervalTime);t=this;return void(O.getInstance().SW_DesktopSwitch&&this.deskTimes<O.getInstance().NUM_DeskAutoMostTimes&&O.getInstance().getDeskTopFlag(function(e){e&&(t.deskTimes++,O.getInstance().addDeskTop(function(){console.log("AD","插屏间隔弹桌面")}))}))}}this.intersNowInterval=0,this.SW_NativeIntersSwitch&&ce.getInstance().IsOpenNative?(console.log("AD","打开了原生插屏"),(ce.getInstance().getIconNativeFlag()||ce.getInstance().getImageNativeFlag())&&ce.getInstance().isLoadNativeInsertRes()?(console.log("AD","原生插屏可以展示"),this.showNativeInters(e)):(oe.getInstance().NIUIInfo.layerBg?console.log("AD","原生插屏没有加载到"):(console.log("AD","原生插屏UI资源没有加载到"),oe.getInstance().loadNativeInstersRes()),H.getInstance().getNativeCustomFlag()?(console.log("AD","改为展示原生自渲染"),this.showNativeCustom(e)):this.getSystemIntersFlag()&&(console.log("AD","改为展示系统插屏"),this.showSystemInters(e)))):(console.log("AD","打开了系统插屏，先展示原生模板"),H.getInstance().getNativeCustomFlag()?(console.log("AD","改为展示原生模板"),this.showNativeCustom(e)):this.getSystemIntersFlag()&&(console.log("AD","改为展示系统插屏"),this.showSystemInters(e)))}}showSystemInters(e){if(this.NUM_IntersDelayTime>0)if(Math.floor(100*Math.random())<this.NUM_IntersDelayPercent)console.log("AD","插屏延迟时间(ms):"+this.NUM_IntersDelayTime),setTimeout(()=>{switch(A.getPlatform()){case w.GP_Oppo:console.log("AD","OPPO 已关闭插屏广告");break;case w.GP_Vivo:ge.getInstance().showSystemInters(e);break;case w.GP_Tiktok:ue.getInstance().showSystemInters();break;case w.GP_QQ:Se.getInstance().showSystemInters();break;case w.GP_WX:me.getInstance().showSystemInters();break;case w.GP_XM:Ie.getInstance().showSystemInters()}},this.NUM_IntersDelayTime);else switch(A.getPlatform()){case w.GP_Oppo:console.log("AD","OPPO 已关闭插屏广告");break;case w.GP_Vivo:ge.getInstance().showSystemInters(e);break;case w.GP_Tiktok:ue.getInstance().showSystemInters();break;case w.GP_QQ:Se.getInstance().showSystemInters();break;case w.GP_WX:me.getInstance().showSystemInters();break;case w.GP_XM:Ie.getInstance().showSystemInters()}else switch(A.getPlatform()){case w.GP_Oppo:console.log("AD","OPPO 已关闭插屏广告");break;case w.GP_Vivo:ge.getInstance().showSystemInters(e);break;case w.GP_Tiktok:ue.getInstance().showSystemInters();break;case w.GP_QQ:Se.getInstance().showSystemInters();break;case w.GP_WX:me.getInstance().showSystemInters();break;case w.GP_XM:Ie.getInstance().showSystemInters()}}showNativeInters(e){this.NUM_IntersDelayTime>0?Math.floor(100*Math.random())<this.NUM_IntersDelayPercent?(console.log("AD","插屏延迟时间(ms):"+this.NUM_IntersDelayTime),setTimeout(()=>{ce.getInstance().showNativeInters(e)},this.NUM_IntersDelayTime)):ce.getInstance().showNativeInters(e):ce.getInstance().showNativeInters(e)}showNativeCustom(e){this.NUM_IntersDelayTime>0?Math.floor(100*Math.random())<this.NUM_IntersDelayPercent?(console.log("AD","插屏延迟时间(ms):"+this.NUM_IntersDelayTime),setTimeout(()=>{H.getInstance().showNativeCustom(e)},this.NUM_IntersDelayTime)):H.getInstance().showNativeCustom(e):H.getInstance().showNativeCustom(e)}}class pe{constructor(){this.videoPath=null,this.shareVideoCallback=null,this.isAutoStop=!1,this.gameRecorder=null,this.moreGameButton=null,this.isShowMoreGames=!1,this.nativeIcon=null,this.moreGamesBanner=null}static getInstance(){return pe.instance||(pe.instance=new pe),pe.instance}share(e){switch(A.getPlatform()){case w.GP_Tiktok:tt.shareAppMessage({templateId:e,query:"",success(){console.log("ASCSDK","Tiktok 分享成功")},fail(e){console.log("ASCSDK","Tiktok 分享失败")}})}}startGameVideo(e){switch(A.getPlatform()){case w.GP_Tiktok:this.videoPath=null,e||(e=10),this.gameRecorder=tt.getGameRecorderManager(),this.gameRecorder.onStart(e=>{console.log("ASCSDK","Tiktok 开始录屏")}),this.gameRecorder.onStop(e=>{console.log("ASCSDK","Tiktok 录屏结束",e.videoPath),this.videoPath=e.videoPath,this.shareVideoCallback?(this.shareVideoCallback(this.videoPath),this.shareVideoCallback=null):this.isAutoStop=!0}),this.gameRecorder.onError(e=>{console.log("ASCSDK","Tiktok 录屏错误:"+JSON.stringify(e))}),this.gameRecorder.start({duration:e});break;case w.GP_KS:if(this.videoPath=null,this.gameRecorder=kwaigame.createMediaRecorder(),null===this.gameRecorder)return void console.log("ASCSDK","当前版本App不支持录屏");this.gameRecorder.onStart(e=>{console.log("ASCSDK","KS 录屏开始")}),this.gameRecorder.onStop(e=>{console.log("ASCSDK","KS 录屏结束",JSON.stringify(e)),this.videoPath=e.videoID,this.shareVideoCallback(this.videoPath)}),this.gameRecorder.onError(e=>{console.log("ASCSDK","发生录屏错误",JSON.stringify(e))}),this.gameRecorder.start()}}pauseGameVideo(){switch(A.getPlatform()){case w.GP_Tiktok:console.log("ASCSDK","Tiktok 暂停录屏"),this.gameRecorder&&this.gameRecorder.pause();break;case w.GP_KS:console.log("ASCSDK","KS 暂停录屏=================="),this.gameRecorder&&this.gameRecorder.pause()}}resumeGameVideo(){switch(A.getPlatform()){case w.GP_Tiktok:console.log("ASCSDK","Tiktok 继续录屏"),this.gameRecorder&&this.gameRecorder.resume();break;case w.GP_KS:console.log("ASCSDK","KS 继续录屏=================="),this.gameRecorder&&this.gameRecorder.resume()}}stopGameVideo(e){switch(A.getPlatform()){case w.GP_Tiktok:if(this.shareVideoCallback=e,console.log("ASCSDK","Tiktok stopGameVideo======================="),this.isAutoStop)return this.shareVideoCallback(this.videoPath),this.shareVideoCallback=null,void(this.isAutoStop=!1);this.gameRecorder&&this.gameRecorder.stop();break;case w.GP_KS:this.shareVideoCallback=e,console.log("ASCSDK","KS stopGameVideo=================="),this.gameRecorder&&this.gameRecorder.stop();break;case w.GP_Test:e("0")}}shareVideo(e,t,a,i,s){switch(console.log("ASCSDK","Tiktok 分享录屏",i),A.getPlatform()){case w.GP_Tiktok:if(!i)return;tt.shareAppMessage({channel:"video",title:e,desc:t,extra:{videoPath:i,videoTopics:a,hashtag_list:a},success(){console.log("ASCSDK","Tiktok 分享视频成功"),s(!0)},fail(e){console.log("ASCSDK","Tiktok 分享视频失败:"+JSON.stringify(e)),s(!1)}});break;case w.GP_Test:console.log("ASCSDK","Test 分享视频成功"),s(!0);break;case w.GP_KS:this.gameRecorder&&this.gameRecorder.publishVideo({mouldId:e,video:i,callback:e=>{if(null!=e&&null!=e)return console.log("ASCSDK","分享录屏失败: "+JSON.stringify(e)),-10014==e.code&&console.log("ASCSDK","录屏时间过短"),void s(!1);console.log("ASCSDK","分享录屏成功"),s(!0)}})}}recordClip(e,t){switch(A.getPlatform()){case w.GP_Tiktok:this.gameRecorder&&this.gameRecorder.recordClip({timeRange:[e,t],success(e){console.log("ASCSDK","Tiktok 裁剪唯一索引",e.index)}})}}clipVideo(e,t){switch(A.getPlatform()){case w.GP_Tiktok:this.gameRecorder&&this.gameRecorder.clipVideo({path:e,success(e){console.log("ASCSDK","Tiktok 录屏地址",e.videoPath),t(!0,e.videoPath)},fail(a){console.error("剪辑失败",a),t(!1,e)}})}}showMoreGames(e,t,a,i,s){switch(A.getPlatform()){case w.GP_Tiktok:{if("android"!=tt.getSystemInfoSync().platform)return void console.log("ASCSDK","非安卓手机,不能展示更多游戏按钮 return");if(!A.getInstance().isversionNewThanEngineVersion("1.23.0"))return void console.log("ASCSDK","平台版本过低,不能展示更多游戏按钮,当前版本:"+tt.getSystemInfoSync().SDKVersion);if(this.isShowMoreGames)return void console.log("ASCSDK","正在展示更多游戏按钮 return");this.isShowMoreGames=!0,console.log("ASCSDK","showMoreGames=====================");let n=Number(tt.getSystemInfoSync().windowWidth),o=Number(tt.getSystemInfoSync().windowHeight);t*=n/Laya.stage.width,a*=o/Laya.stage.height,i*=n/Laya.stage.width,s*=o/Laya.stage.height,this.moreGameButton=tt.createMoreGamesButton({type:"image",image:e,style:{left:i,top:s,width:t,height:a,lineHeight:40,backgroundColor:"#ff0000",textColor:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4,borderWidth:0,borderColor:"#ff0000"},appLaunchOptions:[{appId:"ttXXXXXX",query:"foo=bar&baz=qux",extraData:{}}],onNavigateToMiniGameBox(e){console.log("跳转到小游戏盒子",e)}}),this.moreGameButton.onTap(()=>{console.log("ASCSDK","点击更多游戏")})}break;case w.GP_Test:if(this.nativeIcon)return void console.log("ASCSDK","已存在测试更多游戏自定义按钮 return");console.log("ASCSDK","Test showMoreGames====================="),this.nativeIcon=new Laya.Sprite,this.nativeIcon.loadImage(e),this.nativeIcon.width=t,this.nativeIcon.height=a,this.nativeIcon.x=i,this.nativeIcon.y=s,this.nativeIcon.zOrder=29999,Laya.stage.addChild(this.nativeIcon)}}hideMoreGames(){switch(A.getPlatform()){case w.GP_Test:if(!this.nativeIcon)return void console.log("ASCSDK","Test 不存在更多游戏 return");console.log("ASCSDK","Test hideMoreGames====================="),this.nativeIcon.removeSelf(),this.nativeIcon=null;break;case w.GP_Tiktok:if(!this.moreGameButton)return void console.log("ASCSDK","Tiktok 不存在更多游戏 return");console.log("ASCSDK","hideMoreGames====================="),this.isShowMoreGames=!1,this.moreGameButton.destroy(),this.moreGameButton=null}}showMoreGamesModal(){switch(A.getPlatform()){case w.GP_Tiktok:if("android"!=tt.getSystemInfoSync().platform)return void console.log("ASCSDK","非安卓手机,请隐藏更多游戏按钮 return");if(!A.getInstance().isversionNewThanEngineVersion("1.33.0"))return void console.log("ASCSDK","平台版本过低,无法跳入游戏中心,当前版本:"+tt.getSystemInfoSync().SDKVersion);console.log("ASCSDK","showMoreGamesModal====================="),tt.showMoreGamesModal({appLaunchOptions:[{appId:"ttXXXXXX",query:"foo=bar&baz=qux",extraData:{}}],success(e){console.log("success",e.errMsg)},fail(e){console.log("fail",e.errMsg)}});break;case w.GP_Test:console.log("ASCSDK","showMoreGamesModal=====测试点击更多游戏")}}showFavoriteGuide(e,t,a){switch(A.getPlatform()){case w.GP_Tiktok:tt.showFavoriteGuide({type:e,content:t,position:a,success(e){console.log("ASCSDK","引导组件展示成功")},fail(e){console.log("ASCSDK","引导组件展示失败:"+JSON.stringify(e))}})}}showMoreGamesBanner(){switch(A.getPlatform()){case w.GP_Test:console.log("ASCSDK","Test showMoreGamesBanner==============="),this.moreGamesBanner=new Laya.Sprite,this.moreGamesBanner.loadImage("https://youaihudong.oss-cn-shenzhen.aliyuncs.com/SDK/SDKImage_1_0/TestRes/TestMoreGamesBanner.png"),this.moreGamesBanner.width=900,this.moreGamesBanner.height=312,this.moreGamesBanner.x=Laya.stage.width/2-this.moreGamesBanner.width/2,this.moreGamesBanner.y=Laya.stage.height-this.moreGamesBanner.height,this.moreGamesBanner.zOrder=3e4,Laya.stage.addChild(this.moreGamesBanner);break;case w.GP_Tiktok:if("android"!=tt.getSystemInfoSync().platform)return void console.log("ASCSDK","非安卓手机,不能展示更多游戏横幅");if(!A.getInstance().isversionNewThanEngineVersion("1.67.0"))return void console.log("ASCSDK","平台版本过低,不能展示更多游戏横幅,当前版本:"+tt.getSystemInfoSync().SDKVersion);console.log("ASCSDK","Tiktok showMoreGamesBanner==============="),this.moreGamesBanner=tt.createMoreGamesBanner({style:{left:0,top:0,width:150,height:40,verticalAlign:"bottom",horizontalAlign:"center"},appLaunchOptions:[{appId:"ttXXXXXX",query:"foo=bar&baz=qux",extraData:{}}]}),this.moreGamesBanner.onError(e=>{console.log("ASCSDK","Tiktok 更多游戏横幅出错:",JSON.stringify(e))}),this.moreGamesBanner.show()}}hideMoreGamesBanner(){switch(A.getPlatform()){case w.GP_Test:console.log("ASCSDK","Test hideMoreGamesBanner==============="),this.moreGamesBanner&&(this.moreGamesBanner.removeSelf(),this.moreGamesBanner=null);break;case w.GP_Tiktok:console.log("ASCSDK","Tiktok hideMoreGamesBanner==============="),this.moreGamesBanner&&this.moreGamesBanner.hide()}}}class ye{static getInstacne(){return ye.instance||(ye.instance=new ye),ye.instance}CreateShortcut(e,t,a,i){qg.createShortcutButton||console.log("ASCAD","创建桌面图标 暂不支持桌面图标创建！"),console.log("ASCAD","开始创建桌面图标"),this.shortcut=qg.createShortcutButton({type:"image",image:e,style:{left:t,top:a,width:100,height:100,color:i}});this.shortcut.onTap(function(e){console.log("ASCAD","创建桌面图标结果："+e.msg)}),this.shortcut.onError(s=>{console.log("AD","VIVO 桌面快捷方式加载失败："+JSON.stringify(s)),this.shortcutErrNum++,console.log("AD","VIVO 桌面快捷方式加载错误次数："+this.shortcutErrNum),this.shortcutErrNum<5&&setTimeout(()=>{this.CreateShortcut(e,t,a,i)},3e4)})}GetShortcutFlag(){return this.shortcut}ShowShortcut(){this.shortcut?(console.log("AD","VIVO showShortcut"),this.shortcut.show().then(()=>{console.log("AD","VIVO 展示桌面图标")}).catch(e=>{console.log("AD","VIVO 展示桌面图标展示错误："+JSON.stringify(e))})):console.log("AD","VIVO 未创建桌面图标")}HideShortcut(){this.shortcut?(console.log("AD","VIVO hideShortcut==========="),this.shortcut.hide()):console.log("AD","VIVO 未创建桌面图标")}}class we{constructor(){this.SW_ShortcutSwitch=!0}static getInstacne(){return we.instance||(we.instance=new we),we.instance}CreateShortcut(e,t,a,i){switch(this.SW_ShortcutSwitch||console.log("ASCAD","未开启桌面图标！"),console.log("ASCAD","ShortcutController 创建桌面图标"),A.getPlatform()){case w.GP_Vivo:ye.getInstacne().CreateShortcut(e,t,a,i);break;default:console.log("AD","暂时没有开启桌面图标")}}ShowShortcut(){switch(A.getPlatform()){case w.GP_Vivo:ye.getInstacne().ShowShortcut();break;default:console.log("AD","暂时没有开启桌面图标")}}HideShortcut(){switch(A.getPlatform()){case w.GP_Vivo:ye.getInstacne().HideShortcut();break;default:console.log("AD","暂时没有开启桌面图标")}}getShortcutFlag(){switch(A.getPlatform()){case w.GP_Vivo:ye.getInstacne().GetShortcutFlag();break;case w.GP_Test:return!1}}checkShortcutLoadSucc(){this.loadShortcutCheck&&clearTimeout(this.loadShortcutCheck),this.SW_ShortcutSwitch&&this.getShortcutFlag()?this.ShowShortcut():(console.log("AD","VIVO 创建桌面图标没有准备好"),this.loadShortcutCheck=setTimeout(function(){this.checkShortcutLoadSucc()}.bind(this),5e3))}}class Ce{constructor(){this.hasBeenInit=!1,this.channelArray=["OPPO","VIVO","Tiktok","QQ","Test","WX","KS","HW","XM","BL"]}static getInstance(){return Ce.instance||(Ce.instance=new Ce),Ce.instance}initAd(e){console.log("ASCSDK","initAd"),console.log("ASCSDK","当前SDKVersion："+p.SDKVersion),console.log("ASCSDK","当前渠道："+this.channelArray[A.getPlatform()]),this.hasBeenInit?console.log("ASCSDK","重复初始化initAd return================"):(this.hasBeenInit=!0,ce.getInstance().onGameShow(),Q.getInstance().GetNetSDKConfig(()=>{1==oe.getInstance().isPrivacy||"false"==A.getData("Privacy","false")?Q.getInstance().GetNetPrivacyConfig(e):e()}))}showBanner(){console.log("ASCSDK","showBanner"),ne.getInstance().showBanner()}hideBanner(){console.log("ASCSDK","hideBanner"),ne.getInstance().hideBanner()}getIntersFlag(){return console.log("ASCSDK","getIntersFlag:"+ve.getInstance().getIntersFlag()),ve.getInstance().getIntersFlag()}showInters(e){console.log("ASCSDK","showInters"),ve.getInstance().showInters(e)}getVideoFlag(){return console.log("ASCSDK","getVideoFlag:"+G.getInstance().getVideoFlag()),G.getInstance().getVideoFlag()}showVideo(e){console.log("ASCSDK","showVideo"),G.getInstance().showVideo(e)}getNativeIconFlag(){return console.log("ASCSDK","getNativeIconFlag:"+ce.getInstance().getIconNativeFlag()),ce.getInstance().getIconNativeFlag()}showNativePatch(e,t,a,i,s,n){console.log("AD","showNativePatch"),ce.getInstance().showNativePatch(e,t,a,i,s,n)}hideNativePatch(){console.log("AD","hideNativePatch"),ce.getInstance().hideNativePatch()}showNativeIcon(e,t,a,i){console.log("ASCSDK","showNativeICON"),ce.getInstance().showNativeIcon(e,t,a,i)}hideNativeIcon(){console.log("ASCSDK","hideNativeIcon"),ce.getInstance().hideNativeIcon()}showNativePrivacy(e=null,t=null){console.log("ASCSDK","showNativePrivacy"),ce.getInstance().showNativePrivacy(e,t)}getImageNativeFlag(){return console.log("ASCSDK","getImageNativeFlag:"+ce.getInstance().getImageNativeFlag()),ce.getInstance().getImageNativeFlag()}showNativeImage(e,t,a,i){console.log("ASCSDK","showNativeImage"),ce.getInstance().showNativeImage(e,t,a,i)}hideNativeImage(){console.log("ASCSDK","hideNativeImage"),ce.getInstance().hideNativeImage()}getNativeInfo(){return console.log("ASCSDK","getNativeInfo"),console.log(JSON.stringify(ce.getInstance().getNativeInfo())),ce.getInstance().getNativeInfo()}reportNative(e){console.log("ASCSDK","reportNativeShow"),ce.getInstance().reportNativeShow(e)}nativeClick(e){console.log("ASCSDK","reportNativeClick"),ce.getInstance().reportNativeClick(e)}getNavigateIconFlag(){return console.log("ASCSDK","getNavigateIconFlag:"+q.getInstance().getNavigateIconFlag()),q.getInstance().getNavigateIconFlag()}showNavigateIcon(e,t,a,i){console.log("ASCSDK","showNavigateIcon"),q.getInstance().showNavigateIcon(e,t,a,i)}hideNavigateIcon(){console.log("ASCSDK","hideNavigateIcon"),q.getInstance().hideNavigateIcon()}getNavigateGroupFlag(){return console.log("ASCSDK","getNavigateGroupFlag:"+q.getInstance().getNavigateGroupFlag()),q.getInstance().getNavigateGroupFlag()}showNavigateGroup(e,t){console.log("ASCSDK","showNavigateGroup"),q.getInstance().showNavigateGroup(e,t)}hideNavigateGroup(){console.log("ASCSDK","hideNavigateGroup"),q.getInstance().hideNavigateGroup()}getNavigateSettleFlag(){return console.log("ASCSDK","getNavigateSettleFlag:"+q.getInstance().getNavigateSettleFlag()),q.getInstance().getNavigateSettleFlag()}showNavigateSettle(e,t,a){console.log("ASCSDK","showNavigateSettle"),q.getInstance().showNavigateSettle(e,t,a)}hideNavigateSettle(){console.log("ASCSDK","hideNavigateSettle"),q.getInstance().hideNavigateSettle()}getNavigateBoxBannerFlag(){return console.log("ASCSDK","getNavigateBoxBannerFlag:"+q.getInstance().getNavigateBoxBannerFlag()),q.getInstance().getNavigateBoxBannerFlag()}showNavigateBoxBanner(){console.log("ASCSDK","showNavigateBoxBanner"),q.getInstance().showNavigateBoxBanner()}hideNavigateBoxBanner(){console.log("ASCSDK","hideNavigateBoxBanner"),q.getInstance().hideNavigateBoxBanner()}getNavigateBoxPortalFlag(){return console.log("ASCSDK","getNavigateBoxPortalFlag:"+q.getInstance().getNavigateBoxPortalFlag()),q.getInstance().getNavigateBoxPortalFlag()}showNavigateBoxPortal(){console.log("ASCSDK","showNavigateBoxPortal"),q.getInstance().showNavigateBoxPortal()}setGroup(e){}hasDesktopFunc(){return console.log("ASCSDK","hasDesktopFunc"),O.getInstance().hasDesktopFunc()}getDeskTopFlag(e){return console.log("ASCSDK","getDeskTopFlag"),O.getInstance().getDeskTopFlag(e)}addDeskTop(e){console.log("ASCSDK","addDeskTop"),O.getInstance().addDeskTop(e)}createShortcut(e,t,a,i){we.getInstacne().CreateShortcut(e,t,a,i)}hideShortcut(){we.getInstacne().HideShortcut()}showToast(e,t){console.log("ASCSDK","showToast"),O.getInstance().showToast(e,t)}phoneVibrate(e){console.log("ASCSDK","phoneVibrate",e),O.getInstance().phoneVibrate(e)}reportMonitor(){console.log("ASCSDK","reportMonitor"),O.getInstance().reportMonitor()}reportAnalytics(e,t){console.log("ASCSDK","reportAnalytics"),O.getInstance().reportAnalytics(e,t)}share(e){console.log("ASCSDK","share",e),pe.getInstance().share(e)}startGameVideo(e){console.log("ASCSDK","startGameVideo",e),pe.getInstance().startGameVideo(e)}pauseGameVideo(){console.log("ASCSDK","pauseGameVideo"),pe.getInstance().pauseGameVideo()}resumeGameVideo(){console.log("ASCSDK","resumeGameVideo"),pe.getInstance().resumeGameVideo()}stopGameVideo(e){console.log("ASCSDK","stopGameVideo"),pe.getInstance().stopGameVideo(e)}shareVideo(e,t,a,i,s){console.log("ASCSDK","shareVideo"),pe.getInstance().shareVideo(e,t,a,i,s)}recordClip(e,t){console.log("ASCSDK","recordClip"),pe.getInstance().recordClip(e,t)}clipVideo(e,t){console.log("ASCSDK","clipVideo"),pe.getInstance().clipVideo(e,t)}showMoreGames(e,t,a,i,s){console.log("ASCSDK","showMoreGames"),pe.getInstance().showMoreGames(e,t,a,i,s)}hideMoreGames(){console.log("ASCSDK","hideMoreGames"),pe.getInstance().hideMoreGames()}showMoreGamesModal(){console.log("ASCSDK","showMoreGamesModal"),pe.getInstance().showMoreGamesModal()}showMoreGamesBanner(){console.log("ASCSDK","showMoreGamesBanner"),pe.getInstance().showMoreGamesBanner()}hideMoreGamesBanner(){console.log("ASCSDK","hideMoreGamesBanner"),pe.getInstance().hideMoreGamesBanner()}showFavoriteGuide(e,t,a){console.log("ASCSDK","showFavoriteGuide"),pe.getInstance().showFavoriteGuide(e,t,a)}getUserData(e){console.log("ASCSDK","getUserData"),Q.getInstance().getUserData(e)}getUserInfo(e){console.log("ASCSDK","getUserInfo"),Q.getInstance().getUserInfo(e)}mustLogin(e){console.log("ASCSDK","mustLogin"),Q.getInstance().mustLogin(e)}getBoxFlag(e){return console.log("AD","getBoxFlag:"+K.getInstance().getBoxFlag(e)),K.getInstance().getBoxFlag(e)}showAppBox(e){console.log("AD","showAppBox"),K.getInstance().showAppBox(e)}hideAppBox(e){console.log("AD","hideAppBox"),K.getInstance().hideAppBox(e)}getBlockFlag(){return console.log("ASCSDK","getBlockFlag:"+W.getInstance().getBlockFlag()),W.getInstance().getBlockFlag()}showBlock(e,t,a,i){console.log("ASCSDK","showBlock"),W.getInstance().showBlock(e,t,a,i)}hideBlock(){console.log("ASCSDK","hideBlock"),W.getInstance().hideBlock()}}class Ae{static getInstacne(){return Ae.instance||(Ae.instance=new Ae),Ae.instance}InitAd(e=null){this._adv=Ce.getInstance(),this._adv.initAd(this._onADVInited.bind(this,e)),navigator.onLine||this._adv.showToast("当前无网络，请联网后重新尝试")}_onADVInited(e=null){this.ShowNativePrivacy(()=>{e&&e()})}ShowBanner(){this._adv.showBanner()}HideBanner(){this._adv.hideBanner()}ShowInter(e=!0,t=null){(0!=e||ve.getInstance().SW_IsAllInterOpen)&&(this._adv.hideBanner(),this._adv.showInters(t))}ViewChange(e){e&&(this.ShowInter(),this.HideBanner())}ShowRewardVideo(e,t,a){this._adv&&(this._adv.getVideoFlag()?(Laya.SoundManager.setMusicVolume(0),Laya.SoundManager.setSoundVolume(0),this._videoADVLogicCallback={callback:e,params:t,context:a},this._adv.showVideo(this._onVideoClose.bind(this))):this._adv.showToast("暂无视频"))}_onVideoClose(e){if(this._videoADVLogicCallback){Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1);try{let t=this._videoADVLogicCallback.callback,a=this._videoADVLogicCallback.params,i=this._videoADVLogicCallback.context;t&&t.call(i,a,e)}catch(e){console.error(e)}finally{this._videoADVLogicCallback=void 0}}}NativePatch(e,t,a,i,s,n){this._adv.getImageNativeFlag()&&(this._adv.showNativePatch(e,t,a.width,a.height,i.x,i.y),s.apply(n))}HideNativePatch(){this._adv.hideNativePatch()}CreateShortcut(e,t,a,i=p.ossUrl+"/SdkConfig/addDesk.png"){this._adv.createShortcut(i,e,t,a)}HideShortcut(){this._adv.hideShortcut()}ShowAppBox(e){this._adv.showAppBox(e)}HideAppBox(e){this._adv.hideAppBox(e)}StartGameVideo(e){this._adv.startGameVideo(e)}StopGameVideo(){let e=this;this._adv.stopGameVideo(t=>{e._videoPath=t})}ShareVideo(e,t,a,i){this._adv.shareVideo(e,t,a,this._videoPath,i)}ShowToast(e){this._adv.showToast(e)}PhoneVibrate(e){this._adv.phoneVibrate(e)}ShowNativePrivacy(e=null,t=null){this._adv.showNativePrivacy(e,t)}}const _e=new class{constructor(){this.sdk=null,this._ptype=I.None}init(e){Ae.getInstacne().InitAd()}get isQT(){return this._ptype==I.QT}get isZS(){return this._ptype==I.ZS}};class fe extends u{constructor(){super(),this._oppo=null,this._nativeData=null,this._adcanshow=!1,this._oppo=Laya.Browser.window.qg,this.version=c.version,this.cfg=c}init(e){this._oppo.onShow&&this._oppo.onShow(e=>{}),this._oppo.onHide&&this._oppo.onHide(()=>{}),Laya.timer.once(6e4,this,()=>{this._adcanshow=!0})}getLaunchOptionsSync(){return this._oppo.getLaunchOptionsSync()}getSystemInfoSync(){return this._oppo.getSystemInfoSync()}playVibrative(e=!0){e?this._oppo.vibrateShort():this._oppo.vibrateLong()}getRightMenuRectInfo(){return void 0===this._oppo.getMenuButtonBoundingClientRect?u.prototype.getRightMenuRectInfo.call(this):this._oppo.getMenuButtonBoundingClientRect()}getappId(){return this.cfg.appid}get isUseZS(){return this.cfg.isUseZS}getopenId(e){let t=this;this.login((a,i)=>{if(a){if(i.token){let a=new Laya.HttpRequest;a.http.timeout=1e4,a.once(Laya.Event.COMPLETE,this,a=>{t.openId=a.data.user_id,e&&e(!0,t.openId)}),a.once(Laya.Event.ERROR,this,t=>{e&&e(!1)});let s={appid:t.cfg.appid,code:i.token};a.send(t.cfg.serviceUrl,JSON.stringify(s),"post","json",["content-type","application/json"])}}else e&&e(!1)}),this.initAds()}login(e=null){this._oppo.login({success:t=>{e&&e(!0,t)},fail:t=>{e&&e(!1)},complete:e=>{}})}navigateToMiniProgram(e,t=null,a=null,i=null){this._oppo.navigateToMiniGame({pkgName:e.link_pkgname,path:e.link_path,extraData:e.extraData,success:function(e){t&&t(e)},fail:function(e){a&&a(e)},complete:function(e){i&&i(e)}})}reportMonitor(){console.log("MyOPPOAD:report"),this._oppo.reportMonitor("game_scene",0)}installShortcut(e,t,a){if(void 0===this._oppo.hasShortcutInstalled||void 0===this._oppo.installShortcut)return;let i=this;this._oppo.hasShortcutInstalled({success:function(s){0==s?(console.log("MyOPPOAD:hasShortcutInstalled not exisits"),i._oppo.installShortcut({success:function(){console.log("MyOPPOAD:installShortcut success"),e&&e(!0)},fail:function(e){console.log("MyOPPOAD:installShortcut fail"),t&&t()},complete:function(){a&&a()}})):(console.log("MyOPPOAD:hasShortcutInstalled exisits"),e&&e(!1))},fail:function(e){console.log("MyOPPOAD:hasShortcutInstalled fail"),t&&t()},complete:function(){}})}initAds(){console.log("MyOPPOAD:initAds begin"),this.preloadVedioAds(),this.createBanner(),this.createNative(),console.log("MyOPPOAD:initAds end")}createVideoAds(){if(void 0===this._oppo.createRewardedVideoAd)return;let e=this.getAdsData(r.VIDEO);if(!e)return;let t=e.adsIndex,a=c.VideoId[t%c.VideoId.length],i=this._oppo.createRewardedVideoAd({adUnitId:a});i.onLoad(()=>{console.log("MyOPPOAD:video onload"),e.isLoaded=!0}),i.onError(t=>{console.log("MyOPPOAD:video error=>",JSON.stringify(t)),e.isLoaded=!1}),i.onClose(t=>{t&&t.isEnded||void 0===t?e.close(!0):e.close(!1),e.neespreLoad&&this.preloadVedioAds()}),e.adInstance=i}preloadVedioAds(){console.log("MyOPPOAD:preloadVedioAds begin");let e=this.getAdsData(r.VIDEO);if(e.adInstance||this.createVideoAds(),!e.isLoaded&&e.adInstance){let t=e.adInstance.load();t&&c.usePromise&&t.then(function(){console.log("MyOPPOAD:load vedio success"),e.isLoaded=!0}.bind(this)).catch(function(t){console.log("MyOPPOAD:video fail=>",JSON.stringify(t)),e.isLoaded=!1}.bind(this))}console.log("MyOPPOAD:preloadVedioAds end")}showVideo(e){if(!s)return void u.prototype.showVideo.call(this,e);let t=e.adInstance;if(t){if(c.usePromise){return void t.show().then(()=>{console.log("MyOPPOAD:video show success"),e.show(!0)}).catch(()=>{console.log("MyOPPOAD:video show fail"),e.show(!1),e.neespreLoad&&this.preloadVedioAds()})}if(e.isLoaded)return e.show(!0),void t.show();e.show(!1),e.neespreLoad&&this.preloadVedioAds()}else e.show(!1),e.neespreLoad?this.preloadVedioAds():this.createVideoAds()}createInstalAds(){if(void 0===this._oppo.createInterstitialAd)return void console.log("MyOPPOAD:createInterstitialAd api not exists");let e=this.getAdsData(r.INTERSTITIAL);if(!e)return;let t=e.adsIndex,a=this.cfg.InterstitialId[t%this.cfg.InterstitialId.length],i=this._oppo.createInterstitialAd({adUnitId:a});i.onError(t=>{console.log("MyOPPOAD: InterstitialAd err",JSON.stringify(t)),e.isLoaded=!1}),i.onLoad(()=>{console.log("MyOPPOAD:   InterstitialAd onLoad"),e.isLoaded=!0}),i.onClose(t=>{console.log("MyOPPOAD: InterstitialAd close=>",JSON.stringify(t)),e.close(!0),this.cfg.destroyInstl&&(e.adInstance.destroy(),e.adInstance=null),e.neespreLoad&&this.preloadInstalAds()}),e.adInstance=i}preloadInstalAds(){console.log("MyOPPOAD:preloadInstalAds begin");let e=this.getAdsData(r.INTERSTITIAL);if(e.adInstance){if(!e.isLoaded&&e.adInstance){let t=e.adInstance.load();t&&this.cfg.usePromise&&t.then(()=>{console.log("MyOPPOAD:InterstitialAd load success"),e.isLoaded=!0}).catch(t=>{console.log("MyOPPOAD:InterstitialAd load fail",t),e.isLoaded=!1})}console.log("MyOPPOAD:preloadInstalAds end")}else this.createInstalAds()}showInstal(e){let t=e.adInstance;if(t){if(this.cfg.usePromise){return console.log("MyOPPOAD:showInstal promis"),void t.show().then(()=>{console.log("MyOPPOAD:showInstal success"),e.show(!0)}).catch(()=>{console.log("MyOPPOAD:showInstal fail"),e.show(!1),e.neespreLoad&&this.preloadInstalAds()})}console.log("MyOPPOAD:showInstal"),e.isLoaded?(e.adInstance.show(),e.show(!0)):(e.show(!1),e.neespreLoad&&this.preloadInstalAds())}else e.show(!1),e.neespreLoad?this.preloadInstalAds():this.createInstalAds()}createBanner(e){console.log("MyOPPOAD:createBanner begin");let t=this.getSystemInfoSync(),a=t.screenWidth,i=t.screenHeight,s=this.getAdsData(r.BANNER);s.adInstance&&(s.adInstance.destroy(),s.adInstance=null),e=e||{};for(let t in c.style)e[t]=c.style[t];console.log("MyOPPOAD:Banner style",e);let n=e.width;n<=1&&(n*=a);let o=e.height,h=e.mp||1,l=s.adsIndex,d=c.bannerIds[l%c.bannerIds.length],g=1==h?i-o:2==h?0:e.top,u=e.isCenter?a/2-n/2:e.left,S=this._oppo.createBannerAd({adUnitId:d,adIntervals:c.adIntervals,style:{left:u,top:g,width:n,height:o}});s.style.height=o,s.style.width=n,s.style.left=u,s.style.top=g,s.style.realHeight=o,s.style.realWidth=n,S.onResize(t=>{console.log(t);var n=t.height,o=t.width;S.style.top=1==h?i-n:2==h?0:e.top,S.style.left=e.isCenter?a/2-o/2:e.left,s.style.realWidth=o,s.style.realHeight=n,s.style.left=S.style.left,s.style.top=S.style.top}),S.onLoad(()=>{console.log("MyOPPOAD:banner onload"),s.isLoaded=!0,s.loadCount=0}),S.onError(e=>{console.log("MyOPPOAD:banner error=>",JSON.stringify(e)),s.isLoaded=!1,this.reLoadBanner()}),s.adInstance=S,S&&S.hide(),console.log("MyOPPOAD:createBanner end")}reLoadBanner(){let e=this.getAdsData(r.BANNER);e.loadCount<c.error_count&&(e.adsIndex++,e.adInstance&&(e.adInstance.hide(),e.adInstance.destroy(),e.adInstance=null),this.createBanner(),this.showBanner()),e.loadCount++}showBanner(e){}hideBanner(e=!0,t){let a=this.getAdsData(r.BANNER);a.adInstance&&(a.adInstance.hide(),a.adInstance.destroy(),a.adInstance=null,a.loadCount=0,a.neespreLoad&&this.createBanner(t))}hide_banner(){let e=this.getAdsData(r.BANNER);e.adInstance&&e.adInstance.hide()}bannerMoveBy(e=80,t=0){let a=this.getAdsData(r.BANNER);a.adInstance&&(a.adInstance.style.top+=e,a.adInstance.style.left+=t)}bannerMoveTo(e=0,t=0){let a=this.getAdsData(r.BANNER);a.adInstance&&(a.adInstance.style.top=e,a.adInstance.style.left=t)}loadNativeData(e,t,a){if(console.log("MyOPPOAD:loadNativeData begin"),!e)return;e.adInstance&&(e.adInstance.destroy&&e.adInstance.destroy(),e.adInstance=null),console.log("MyOPPOAD:loadNativeData adUnitId",t);let i=this._oppo.createNativeAd({adUnitId:t});e.adInstance=i,i.load(),i.onLoad(t=>{console.log("MyOPPOAD:getNativeAd->onLoad",JSON.stringify(t)),e.adData=t.adList,a(t.adList)}),i.onError(e=>{console.log("MyOPPOAD:getNativeAd->onError",JSON.stringify(e)),a(null)}),console.log("MyOPPOAD:loadNativeData end")}getNativeAdId(e=0){return this.cfg.nativeIds[e]}getNativeAd(e,t=1){if(void 0===this._oppo.createNativeAd)return;let a=this.getNativeAdId(t);if(!a)return void e(null);console.log("MyOPPOAD:loadNativeData posId",a);let i=this._oppo.createNativeAd({posId:a});i.load(),i.onLoad(t=>{console.log("MyOPPOAD:getNativeAd->onLoad",JSON.stringify(t)),e(t.adList)}),i.onError(t=>{console.log("MyOPPOAD:getNativeAd->onError",JSON.stringify(t)),e(null)})}defaultNativeData(){return{adId:"0a41b6f9-bcda-4671-bee1-5daac81b67e7",clickBtnTxt:"立即下载",creativeType:3,desc:"看《烈火军校》小说",iconUrlList:["https://cdopic0.heytapimage.com/img/202004/28/b03983e69df362375e830b37fa124732.png"],icon:"https://cdopic0.heytapimage.com/img/202004/28/b03983e69df362375e830b37fa124732.png",interactionType:3,logoUrl:"https://adsfs.heytapimage.com/union/adlogo/o_1512387525231.png",title:"爱奇艺免费阅读",imgUrlList:[]}}createNative(e=0,t=r.NATIVE_INSTIL){console.log("MyOPPOAD:createNative begin");let a=this.getAdsData(t);console.log("MyOPPOAD:ads",a);let i=this.cfg.nativeIds.length;e>=i||(console.log("MyOPPOAD:ads.adsIndex, id_len",a.adsIndex,i),this.loadNativeData(a,c.nativeIds[a.adsIndex%i],a=>{null==a&&this.createNative(e++,t)}),console.log("MyOPPOAD:createNative _nativeData",JSON.stringify(this._nativeData)),console.log("MyOPPOAD:createNative end"))}getNativeData(){}reportAdClick(e,t=r.NATIVE_INSTIL){console.log("MyOPPOAD:reportAdClickdata",JSON.stringify(e));let a=this.getAdsData(t);a.adInstance?(console.log("MyOPPOAD:reportAdClick",JSON.stringify(e)),a.adInstance.reportAdClick({adId:e.adId}),a.adData=null,this.createNative()):console.log("MyOPPOAD:reportAdClick--ads.adInstance is null")}reportAdClickex(e,t=r.NATIVE_INSTIL){console.log("MyOPPOAD:reportAdClickdata",JSON.stringify(e));let a=this.getAdsData(t);a.adInstance?(console.log("MyOPPOAD:reportAdClick",JSON.stringify(e)),a.adInstance.reportAdClick({adId:e.adId})):console.log("MyOPPOAD:reportAdClick--ads.adInstance is null")}reportAdShow(e,t=r.NATIVE_INSTIL){console.log("MyOPPOAD:reportAdShowdata",JSON.stringify(e));let a=this.getAdsData(t);a.adInstance?(console.log("MyOPPOAD:reportAdShow",JSON.stringify(e)),a.adInstance.reportAdShow({adId:e.adId})):console.log("MyOPPOAD:reportAdShow--ads.adInstance is null")}showNativeAds(e){e.adInstance&&e.adData?e.show(!0,e.adData):(e.show(!1),this.createNative(0,e.adType))}}const Ne=new class{constructor(){this.sdk=null,this._ptype=o.None}init(e){console.log("platform.ts--init()");var t=A.getPlatform();t==w.GP_Test?(this.sdk=new u,this._ptype=o.None):t==w.GP_Oppo?(this.sdk=new fe,this._ptype=o.OP):t==w.GP_Vivo?(this.sdk=new m,this._ptype=o.VV):t==w.GP_Tiktok&&(this.sdk=new S,this._ptype=o.TT)}get isWX(){return this._ptype==o.WX}get isQQ(){return this._ptype==o.QQ}get isVV(){return this._ptype==o.VV}get isOP(){return this._ptype==o.OP}get isTT(){return this._ptype==o.TT}get isBD(){return this._ptype==o.BD}isSDK(e){return this._ptype==e}isNotSdk(e){return this._ptype!=e}};const Le=new class{constructor(){this.desginEvent=null,this.canvasEvent=null,this.designSize=new Laya.Size(720,1280),this.frameSize=new Laya.Size(640,1134),this.visibleSize=new Laya.Size(720,1280)}init(e){this.designSize=new Laya.Size(Laya.stage.designWidth,Laya.stage.designHeight),this.frameSize=new Laya.Size(Laya.Browser.clientWidth,Laya.Browser.clientHeight),this.visibleSize=new Laya.Size(Laya.stage.width,Laya.stage.height)}getFixScale(){return{x:this.frameSize.width/this.visibleSize.width,y:this.frameSize.height/this.visibleSize.height}}screenToDesign(e,t){let a=this.getFixScale();return{x:e/a.x,y:t/a.y}}designToScreen(e,t){let a=this.getFixScale();return{x:e*a.x,y:t*a.y}}sizeToDesign(e,t){let a=this.getFixScale();return{width:e/a.x,height:t/a.y}}sizeToScreen(e,t){let a=this.getFixScale();return{width:e*a.x,height:t*a.y}}getHeight(e){return e*this.frameSize.height/this.frameSize.width}getWidth(e){return e*this.frameSize.width/this.frameSize.height}largeScreen(){return Laya.Browser.clientWidth/Laya.Browser.clientHeight<=1170/2532}bigScreen(){return Laya.Browser.clientWidth/Laya.Browser.clientHeight<375/667}};class De extends e.commonUI.MoreGameDialogUI{constructor(){super(),this.listdata=[],this.time=0,this.height=Laya.stage.height,this.list.renderHandler=new Laya.Handler(this,this.renderrr),this.list.mouseHandler=new Laya.Handler(this,this.itemhander),this.isPopupCenter=!1,this.PlatformUIInit()}onEnable(){this.closeBtn.once(Laya.Event.CLICK,this,this.close),this.closeBtn2.once(Laya.Event.CLICK,this,this.close),this.listdata=_e.sdk.getAdList("defaultData",30),this.list.array=this.listdata,this.tweenList(this.list,!1,0),this.btnMove(),this.onEnableADControl()}onOpened(e){e&&(this.closebanner=e.isCloseBanner)}renderrr(e,t){let a=this.listdata[t];if(a){e.getChildByName("icon").skin=a.link_img||a.app_icon,e.getChildByName("nameTxt")&&(e.getChildByName("nameTxt").text=a.link_name||a.app_title)}}itemhander(e,t){if(e.type==Laya.Event.CLICK){let e=this.listdata[t];Ne.isWX?_e.sdk.navigateToMiniProgram(e,v.more,()=>{},()=>{}):_e.sdk.navigateToMiniProgram(e,v.more)}}btnMove(){this.closeBtn.visible=!0}onDisable(){this.closebanner?Ne.isQQ?Ne.sdk.hide_banner():Ne.sdk.hideBanner():Ne.isOP&&Ne.sdk.showBanner()}tweenList(e,t,a=0){let i=e,s=i.array.length,n=i.repeatX,o=i.repeatY,r=n*o;if(s<=r)return;let h=r;if(t&&s%o!=0){h=r-(o-s%o)}else if(!t&&s%n!=0){h=r-(n-s%n)}let l=s-h;i.tweenTo(l-a,1500*(l-a),Laya.Handler.create(this,()=>{i.tweenTo(0,1500*l,Laya.Handler.create(this,()=>{this.tweenList(e,!1,0)}))}))}onEnableADControl(){Ne.isOP&&Ne.sdk.hide_banner()}PlatformUIInit(){Le.largeScreen()&&(this.gpsImg.y+=120)}}class Be extends e.commonUI.NativeAdDialogUI{constructor(){super(),this.popupEffect=null,this.height=Laya.stage.height,this.icon.on(Laya.Event.CLICK,this,this.nativeAdClick),this.closeBtn.on(Laya.Event.CLICK,this,this.closeClick),this.continueBtn.on(Laya.Event.CLICK,this,this.closeClick),this.goBtn.on(Laya.Event.CLICK,this,this.goClick),this.isPopupCenter=!1,this.zOrder=128,Le.largeScreen()&&(this.spLayertop.y+=120),Ne.isOP||Ne.isVV&&(this.icon.width=640,this.icon.height=320,this.icon.x=40,this.icon.y=340,this.titleTxt.width=640,this.titleTxt.height=40,this.titleTxt.x=40,this.titleTxt.y=688,this.titleTxt.fontSize=40,this.adBg.width=712,this.adBg.height=527,this.adBg.x=4,this.adBg.y=239,this.adBg.skin="common/vivo_01.png",this.closeBtn.x=51,this.closeBtn.y=352,this.closeBtn.width=40,this.closeBtn.height=40,this.closeBtn.skin="common/vivo_03.png",this.goBtn.x=188,this.goBtn.y=883,this.goBtn.width=344,this.goBtn.height=174,this.goBtn.label="",this.continueBtn.visible=!1,this.ImgADTip.visible=!0,this.ImgADTip.x=618,this.ImgADTip.y=343,this.realTitleTxt.visible=!0,this.realTitleTxt.x=40,this.realTitleTxt.y=265)}onEnable(){Ne.isOP}onOpened(e){if(this.nativeData=Ne.sdk.getNativeData(),this.nativeData){let e="";this.nativeData.imgUrlList&&this.nativeData.imgUrlList.length>0?e=this.nativeData.imgUrlList[0]:this.nativeData.iconUrlList&&this.nativeData.iconUrlList.length>0?e=this.nativeData.iconUrlList[0]:this.nativeData.icon&&(e=this.nativeData.icon),this.icon.skin=e,console.log("MyOPPOAD:icon url = ",this.icon.skin),this.titleTxt.text=this.nativeData.desc,console.log("MyOPPOAD:titleTxt.text = ",this.nativeData.desc),this.realTitleTxt.text=this.nativeData.title,console.log("MyOPPOAD:NativeAdDialog.ts--nativeAdShow"),Ne.sdk.reportAdShow(this.nativeData)}e?(this.titleImg.visible=!0,this.titleImg.skin=e.iswin?"main/end-01.png":"main/end-02.png"):this.titleImg.visible=!1,Ne.isOP&&Ne.sdk.hide_banner()}nativeAdClick(){this.nativeData&&(console.log("MyOPPOAD:NativeAdDialog.ts--nativeAdClick"),Ne.sdk.reportAdClick(this.nativeData)),console.log("MyOPPOAD:nativeAdClick",this.nativeData.adId),this.closeClick()}closeClick(){this.close()}goClick(){this.closeClick()}onDisable(){Laya.stage.event("NATIVE_AD_CLOSE")}}class be extends Laya.EventDispatcher{constructor(){super()}static get Ins(){return this._instance||(this._instance=new be),this._instance}}be.EVENT_SHOW_NATIVE="EVENT_SHOW_NATIVE",be.EVENT_TEMP_JIESUAN="EVENT_TEMP_JIESUAN";class ke{constructor(){this._data={},this._localName="game-storage",this._isLoginSecondDay=!1}static getJson(e){let t=Laya.LocalStorage.getItem(e);return t&&0!=t.length?JSON.parse(t):{}}static getItem(e){let t=Laya.LocalStorage.getItem(e);return t&&0!=t.length?t:null}static getInt(e){let t=Laya.LocalStorage.getItem(e);return t&&0!=t.length?parseInt(t):0}static getFloat(e){let t=Laya.LocalStorage.getItem(e);return t&&0!=t.length?parseFloat(t):0}static setItem(e,t){Laya.LocalStorage.setItem(e,t)}static setJson(e,t){let a=JSON.stringify(t);Laya.LocalStorage.setItem(e,a)}init(e){(e=e||{}).name=e.name||this._localName,this._localName=e.name,this._data=ke.getJson(this._localName)}save(){ke.setJson(this._localName,this._data)}clear(){this._data={}}get(e,t=0){return void 0===this._data[e]&&(this._data[e]=t,this.save()),this._data[e]}set(e,t){this._data[e]=t,this.save()}use(e,t){let a=this.get(e,0);return a+t>=0?(a+=t,this.set(e,a),a):-1}isUse(e,t){return this.get(e,0)>=t}login(){let e=this._data.login||{loginTime:0,loginCount:0,loginTodayCount:0,loginDay:0,interval:0},t=(new Date).getTime();this.dayDiff(new Date(e.loginTime),new Date(t))>0&&(e.loginTodayCount=0,e.loginDay++,this._isLoginSecondDay=!0),e.loginTodayCount++,e.loginCount++,e.interval=t-e.loginTime,e.loginTime=t,this._data.login=e}dayDiff(e,t){var a=e.getMonth()+1,i=e.getDate(),s=e.getFullYear(),n=t.getMonth()+1,o=t.getDate(),r=t.getFullYear(),h=(Date.parse(n+"/"+o+"/"+r)-Date.parse(a+"/"+i+"/"+s))/864e5;return h<0?-1:parseInt(h.toString())}}const Te={name:"game-userdata"},Pe={game:"res/Unity/LayaScene_GameScene/Conventional/GameScene.ls"},xe={GameMain:"gameUI/GameMain.scene",GameStartView:"gameUI/GameStartView.scene",LoadSceneView:"gameUI/LoadSceneView.scene",ResultView:"gameUI/ResultView.scene",screenAd:"commonUI/zs/FullAd.scene",fullAd:"commonUI/zs/FullAd_1.scene",floatAd:"commonUI/zs/FloatAd.scene",UseDialog:"commonUI/TryUseDialog.scene",ShowOffView:"gameUI/ShowOffView.scene",UnlockView:"commonUI/UnlockNewDialog.scene",NativeAd:"commonUI/NativeAdDialog.scene",QQBox:"commonUI/UIAdwardBox.scene",QQEnergy:"commonUI/UIAdwardEnergy.scene",MoneyGet:"commonUI/zs/MoneyGet.scene"},Ge={bgm:"res/image/sound/bgm.mp3",success:"res/image/sound/success.mp3",fail:"res/image/sound/fail.mp3"},Oe={EVENT_SHOW_EXPORTGAME:"EVENT_SHOW_EXPORTGAME",EVENT_BG_TO_GAME:"EVENT_BG_TO_GAME",EVENT_GAME_TO_BG:"EVENT_GAME_TO_BG"};class Ue extends ke{constructor(){super()}static get inst(){return null==this._instance&&(this._instance=new Ue),this._instance}getData(){this.clear(),this.init(Te),this.login(),this.initDatas(),this.save()}initDatas(){this._data.gold=this._data.gold||0,this._data.level=this._data.level||1,this._data.skins=this._data.skins||"1",this._data.useSkin=this._data.useSkin||"1",this._data.singTime=this._data.singTime||0}get level(){return this._data.level}setLevel(e){e?this._data.level=e:this._data.level++,this.save()}setGold(e){let t=this._data.gold+e;return t>=0&&(this._data.gold=t,this.save()),t}get gold(){return this._data.gold}get useSkin(){return this._data.useSkin}changeSkin(e){return this._data.useSkin!=e&&(this._data.useSkin=e,this.save(),!0)}unlockSkin(e){return!this.isUnlockSkin(e)&&(this._data.skins?this._data.skins+="|"+e:this._data.skins=e,this.save(),!0)}isUnlockSkin(e){if(this._data.skins){let t=this._data.skins.split("|");for(let a=0;a<t.length;a++)if(t[a]==e)return!0}return!1}getUnlockSkins(){let e=[];for(let t=1;t<=9;t++)this.isUnlockSkin(t+"")||e.push(t);return e}get singTime(){return this._data.singTime}setSingTime(e){this._data.singTime=e||Date.now(),this.save()}}Ue._instance=null;class Me extends Laya.Script{constructor(){super(),be.Ins.on("changeGold",this,this.updateUI)}onEnable(){this.updateUI()}updateUI(){this.owner.getChildByName("txt").text=Ue.inst.gold}onDisable(){}onDestroy(){be.Ins.off("changeGold",this,this.updateUI)}}var Ke;!function(e){e[e.Sound_Volume=0]="Sound_Volume",e[e.Music_Volume=1]="Music_Volume",e[e.Sound_Mute=2]="Sound_Mute",e[e.Music_Mute=3]="Music_Mute",e[e.Mute=4]="Mute",e[e.Vibrator=5]="Vibrator"}(Ke||(Ke={}));class Ve extends ke{constructor(){super(),this._audio={soundVolume:1,musicVolume:1,musicMute:1,soundMute:1,mute:1,vibrator:1},this._localName="game-audio";let e=Ve.getJson(this._localName);for(let t in e)this._audio[t]=e[t];this.save()}save(){Ve.setJson(this._localName,this._audio)}set soundVolume(e){this._audio.soundVolume=e,this.save()}get soundVolume(){return this._audio.soundVolume}set musicVolume(e){this._audio.musicVolume=e,this.save()}get musicVolume(){return this._audio.musicVolume}set soundMute(e){this._audio.soundMute=e,this.save()}get soundMute(){return this._audio.soundMute}set musicMute(e){this._audio.musicMute=e,this.save()}get musicMute(){return this._audio.musicMute}set mute(e){this._audio.mute=e,this.save()}get mute(){return this._audio.mute}set vibrator(e){this._audio.vibrator=e,this.save()}get vibrator(){return this._audio.vibrator}}class Ee{constructor(){this._audioData=null,this._musicChannel=null,this._musicUrl=null,this._audioData=new Ve}static get inst(){return null==this._instance&&(this._instance=new Ee),this._instance}update(e,t=1){e==Ke.Sound_Volume?(this._audioData.soundVolume=t,Laya.SoundManager.musicVolume=t):e==Ke.Music_Volume?(this._audioData.soundVolume=t,Laya.SoundManager.soundVolume=t):e==Ke.Music_Mute?(this._audioData.musicMute=0==this._audioData.musicMute?1:0,Laya.SoundManager.musicMuted=1==this._audioData.musicMute):e==Ke.Sound_Mute?(this._audioData.soundMute=0==this._audioData.soundMute?1:0,Laya.SoundManager.soundMuted=1==this._audioData.soundMute):e==Ke.Mute?(this._audioData.mute=0==this._audioData.mute?1:0,0==this._audioData.mute?Laya.SoundManager.stopMusic():this.playMusic(this._musicUrl)):e==Ke.Vibrator&&(this._audioData.vibrator=0==this._audioData.vibrator?1:0)}getState(e){return e==Ke.Sound_Volume?this._audioData.soundVolume:e==Ke.Music_Volume?this._audioData.musicVolume:e==Ke.Music_Mute?this._audioData.musicMute:e==Ke.Sound_Mute?this._audioData.soundMute:e==Ke.Mute?this._audioData.mute:e==Ke.Vibrator?this._audioData.vibrator:void 0}playSound(e,t,a,i){this._audioData.mute&&this._audioData.soundMute?Laya.SoundManager.playSound(e,t,a,null,i):a&&a.runWith(null)}playMusic(e,t,a,i){this._musicUrl=e,this._audioData.mute&&this._audioData.soundMute&&(this._musicUrl=e,this._musicChannel=Laya.SoundManager.playMusic(e,0))}stopMusic(){this._audioData.mute&&this._audioData.soundMute&&(this._musicChannel?this._musicChannel.pause():Laya.SoundManager.stopMusic())}resumeMusic(){this._audioData.mute&&this._audioData.soundMute&&(this._musicChannel?this._musicChannel.resume():this._musicUrl&&Laya.SoundManager.playMusic(this._musicUrl))}playVibrator(e=!0){this._audioData.vibrator&&Ne.sdk.playVibrative(e)}}Ee._instance=null;class Re extends e.commonUI.SettingDialogUI{constructor(){super(),this.musicBtn.on(Laya.Event.CLICK,this,this.clickHanlder,[1]),this.rockBtn.on(Laya.Event.CLICK,this,this.clickHanlder,[2]),this.isPopupCenter=!1}clickHanlder(e){1==e?Ee.inst.update(Ke.Mute):2==e&&Ee.inst.update(Ke.Vibrator),this.updateUI()}onEnable(){this.closeBtn.once(Laya.Event.CLICK,this,this.close),this.updateUI(),Ae.getInstacne().ShowInter(!1)}updateUI(){this.labVer.text="版本号："+p.ver,this.musicBtn.skin=1==Ee.inst.getState(Ke.Mute)?"common/other-05.png":"common/other-06.png",this.rockBtn.skin=1==Ee.inst.getState(Ke.Vibrator)?"common/other-05.png":"common/other-06.png"}onDisable(){Ae.getInstacne().ShowBanner()}}class We{constructor(){}showMsgTip(e,t=null,a=null,i=null,s=null,n=100){let o=t||Laya.stage,r=null==a?o.width/2:a,h=null==i?o.height/2:i,l=Laya.Pool.getItemByCreateFun("tiptxt",this.createTxt);l.x=r,l.y=h,this.initFont(l,s),l.text=e,o.addChild(l),Laya.Tween.clearTween(l),Laya.Tween.to(l,{y:h-n},1e3,null,Laya.Handler.create(this,this.oncomplete,[l]))}oncomplete(e){e.removeSelf(),Laya.Pool.recover("tiptxt",e)}initFont(e,t){e.fontSize=30,e.color="#ffffff",e.strokeColor="#ff0000",t&&(t.color&&(e.color=t.color),t.fontSize&&(e.fontSize=t.fontSize),t.strokeColor&&(e.strokeColor=t.strokeColor),t.font&&(e.font=t.font),t.width&&(e.width=t.width),null!=t.stroke&&(e.stroke=t.stroke))}createTxt(){let e=new Laya.Label;return e.anchorX=e.anchorY=.5,e.bold=!0,e.width=300,e.height=100,e.wordWrap=!0,e.align="center",e.stroke=3,e}static get Ins(){return this._ins||(this._ins=new We),this._ins}}class Fe{constructor(){}static caluMoveVector(e,t,a=!1,i,s=!1){i||(i=new Laya.Vector3),i.x=0,i.y=0,i.z=0;var n=a?e:e*Math.PI/180,o=Math.sin(n)*t,r=Math.cos(n)*t;return s&&(o*=-1,r*=-1),i.x=o,i.z=r,i}static radiansYTo(e,t,a=!1){var i=5*Math.cos(t),s=5*Math.sin(t);a&&(i*=-1,s*=-1),Fe.roleLookAtPoint.x=e.transform.position.x+i,Fe.roleLookAtPoint.z=e.transform.position.z+s,this.roleLookAtPoint.y=e.transform.position.y,e.transform.lookAt(this.roleLookAtPoint,Fe.upVector3,!1)}static rotationYto(e,t,a,i){var s=e.transform.localRotationEulerY;if(!(s>=-t)){var n=-t*a*i/60;e.transform.localRotationEulerY=e.transform.localRotationEulerY+n}}static showTips(e,t=!0,a=200){Laya.stage.getChildByName("XnhdTips")&&(console.log("XnhdTips  "),Laya.stage.getChildByName("XnhdTips").destroy());let i=Laya.stage.getChildByName("XnhdTips");i?Laya.Tween.clearAll(i):i=new Laya.Label,i.width=800,i.color="#ffffff",t&&(i.bgColor="#000000"),i.strokeColor="#120bcf",i.fontSize=35,i.stroke=3,i.bold=!0,i.align="center",i.padding="20,35,20,35",i.wordWrap=!0,i.text=e,i.cacheAs="bitmap",i.centerX=0,i.centerY=0,i.alpha=.9,i.name="XnhdTips",Laya.stage.addChild(i),i.zOrder=1e3,Laya.Tween.to(i,{alpha:0},1e3,null,Laya.Handler.create(this,()=>{i.destroy()}),a)}static playAnimations(e,t,a=1){if(e){var i=e.getComponent(Laya.Animator);i&&(i.play(t,0,0),i.speed=a>1?.6:1)}}static playIntervalAni(e,t,a,i){var s=e.getComponent(Laya.Animator);s&&!Fe.bGameWin&&(this.state1.name=t,this.state1.clipStart=a/220,this.state1.clipEnd=i/220,this.state1.clip=s.getDefaultState().clip,this.state1.clip.islooping=!1,s.addState(this.state1),s.play(this.state1.name))}static playParticle(e,t,a,i=null){if(null!=e){var s=e.getChildAt(a);s&&s.particleSystem&&(t?(Fe.bParticling=!0,s.particleSystem.play(),i&&(s.transform.position=i)):(Fe.bParticling=!1,s.particleSystem.stop()))}}static PlaySound(e){var t="res/music/"+e;Laya.SoundManager.playSound(t)}static vibration(){navigator.vibrate&&navigator.vibrate(100)}static dayDiff(e,t){var a=e.getMonth()+1,i=e.getDate(),s=e.getFullYear(),n=t.getMonth()+1,o=t.getDate(),r=t.getFullYear(),h=(Date.parse(n+"/"+o+"/"+r)-Date.parse(a+"/"+i+"/"+s))/864e5;return h<0?-1:parseInt(h.toString())}static getUseLevel(){return Fe.nTryUseCount<8?40-Fe.nTryUseCount+1:Math.floor(15*Math.random())+25}static findFinger(e){for(var t=!1,a=0;a<Fe.nDrawLen;a++){Fe._curData.DrawAt[a]!=e||(t=!0)}return t}static GetCacheData(){let e=Laya.LocalStorage.getJSON("bPassed");e&&(Fe.bPassed=e);let t=Laya.LocalStorage.getItem("nCurSelect");t&&(Fe.nCurUsing=Number(t));let a=Laya.LocalStorage.getJSON("ShopTools");a&&(Fe.shopTools=a);let i=Laya.LocalStorage.getJSON("ShopSelect");i&&(Fe.shopSelect=i);var s=Laya.LocalStorage.getItem("CurScene");s&&!Fe.bPassed&&(Fe.nCurScene=Number(s));var n=Laya.LocalStorage.getItem("ShowScene");n?Fe.nShowScene=Number(n):Fe.nCurScene<=Fe.nTotalScene&&(Fe.nShowScene=Fe.nCurScene);let o=Laya.LocalStorage.getJSON("UnlockData");o&&(Fe.tUnlockData=o),Laya.LocalStorage.getItem("TempDay")&&(this._tempDay=parseInt(Laya.LocalStorage.getItem("TempDay")));let r=(new Date).getDay();if(this._tempDay!=r)this._tempDay=r,Fe.nTryUseCount=1,Laya.LocalStorage.removeItem("TryCount"),Laya.LocalStorage.setItem("TempDay",r.toString());else{let e=Laya.LocalStorage.getJSON("TryCount");e&&(Fe.nTryUseCount=e)}}}Fe.nCurScene=1,Fe.nTotalScene=40,Fe.nShowScene=1,Fe.nTryuseScene=1,Fe.nSteps=1,Fe.nGameState=1,Fe.nStateSteps=1,Fe.nStateLen=1,Fe.bStart=!1,Fe.bGameWin=!1,Fe.nTotalCoins=1e3,Fe.bDeath=!1,Fe.bMouseMoving=!1,Fe.effectNode=null,Fe.smallBubble=null,Fe.handTool=null,Fe.hand2=null,Fe.bParticling=!1,Fe.bPlayingAni=!1,Fe._curData=null,Fe.bTextMove=!1,Fe.bTryUse=!1,Fe.nCurUsing=0,Fe.nLookSelect=0,Fe.nSelectDraw=1,Fe.nSelectPaper=1,Fe.nSelectBeauty=1,Fe.nSweared=0,Fe.nCurFinger=1,Fe.bShowSlider=!1,Fe.bClickReset=!1,Fe.shopSelect={1:0,2:0,3:0,4:0},Fe.shopTools={1:[1,0,0,0,0,0],2:[1,0,0,0,0,0],3:[1,0,0,0,0,0],4:[1,0,0,0,0,0]},Fe.paySteps=[],Fe.bBtnClicked=!1,Fe.bPassed=!1,Fe.nChangeLen=0,Fe.nDrawLen=0,Fe.state1=new Laya.AnimatorState,Fe.taskScore=0,Fe.curTool=null,Fe.sNailShape=0,Fe.nTryUseCount=1,Fe.bTry=!1,Fe.nShopTab=1,Fe.bDrawed=!1,Fe.bPlayerMove=!0,Fe.tUnlockData={2:[1,1,1,1,1,1,1,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0],6:[0,0,0,0,0]},Fe.bAdtoEnd=!1,Fe.roleLookAtPoint=new Laya.Vector3(0,0,0),Fe.upVector3=new Laya.Vector3(0,1,0),Fe._tempDay=-1;class He extends Laya.Script3D{constructor(){super(...arguments),this._gameScene=je.getInstance(),this.scene=null,this._curIndex=0,this._t2=0}onEnable(){}onTriggerEnter(e){var t=e.owner.name;if(Fe.bStart&&Fe.bMouseMoving&&"NailPart_1"==t&&!e.owner.bHit){Laya.timer.currTimer;this.onHitNail(e),this._t2=Laya.timer.currTimer}}onHitNail(e){var t=e.owner;e.owner.bHit=!0,t&&(Ee.inst.playVibrator(),this._curIndex++,Fe.playParticle(Fe.curTool,!0,1,t.transform.position),t.destroy(),this._gameScene.updateProgress(17.2),this._curIndex>=20&&(this._curIndex=0,Fe.bMouseMoving=!1,Laya.timer.once(300,this,function(){Fe.nSteps++,this._gameScene.onCuting()})))}onTriggerExit(e){}onRestartGame(){Fe.bStart=!1}onCollisionEnter(e){console.log("进入触发 onCollision name === ",e.other.owner.name)}}class Xe{}Xe.nScraper=1,Xe.nPolisher=2,Xe.nIce=3,Xe.nSoap=4,Xe.nSpout1=5,Xe.nRazor=6,Xe.nScissor=7,Xe.nSpout=8,Xe.nNail=9,Xe.nHand=10,Xe.acneScale=.02,Xe.DescData={1:"赶紧滑动铲子刮理脚皮吧!",2:"快清除脚上脏污吧!",3:"脚丫发炎了，快用冰块给消炎",4:"用肥皂给脚丫清洗吧!",5:"把泡泡冲洗干净，又是一双漂亮的脚丫啦",6:"脚上长毛了，快把他刮掉",7:"脚上长蘑菇了，快用剪刀把他剪掉!",8:"小蘑菇也要冲洗掉哦!",9:"脚指甲太长啦，快剪掉吧!",10:"脚底长痘痘啦，快把他挤掉"},Xe.ManAni={Sit:"Sit",idle:"idle",Wave:"Wave",Down:"Down",Lie:"Lie"},Xe.ToolType={1:[1,1,1,1,2,2],2:[1,1,1,1,2,2],3:[1,1,1,1,2,2],4:[1,1,1,1,2,2]},Xe.State_Cut=1,Xe.State_Swear=2,Xe.State_Mill=3,Xe.State_Draw=4,Xe.State_Draw2=5,Xe.state_Beautify=6,Xe.State_Finish=7,Xe.AniFrames={0:[0],1:[220,40,130],2:[220,40,130],3:[130,40],4:[130,40]},Xe.CameraDraw=[0,12,15,-45,0],Xe.CameraFinish=[0,5,13,-15,0],Xe.ColorVec3={0:new Laya.Vector4(1,128/255,160/255,1),1:new Laya.Vector4(230/255,220/255,115/255,1),2:new Laya.Vector4(.8,.8,.8,1),3:new Laya.Vector4(1,.4,.4,1),4:new Laya.Vector4(164/255,178/255,134/255,1),5:new Laya.Vector4(115/255,124/255,.6,1),6:new Laya.Vector4(128/255,128/255,128/255,1),7:new Laya.Vector4(1,159/255,64/255,1),8:new Laya.Vector4(1,128/255,160/255,1),9:new Laya.Vector4(.4,.4,.8,1),10:new Laya.Vector4(230/255,230/255,230/255,1),11:new Laya.Vector4(174/255,230/255,230/255,1),12:new Laya.Vector4(173/255,230/255,187/255,1)},Xe.PaperColor={1:new Laya.Vector4(1,.6,179/255,1),2:new Laya.Vector4(217/255,203/255,54/255,1),3:new Laya.Vector4(229/255,229/255,229/255,1),4:new Laya.Vector4(1,.2,.2,1),5:new Laya.Vector4(164/255,178/255,134/255,1),6:new Laya.Vector4(.2,64/255,.4,1),7:new Laya.Vector4(26/255,26/255,26/255,1)},Xe.PlaneColor={0:new Laya.Vector4(1,128/255,191/255,1),1:new Laya.Vector4(128/255,192/255,225/255,1),2:new Laya.Vector4(1,128/255,128/255,1),3:new Laya.Vector4(230/255,172/255,115/255,1)},Xe.HandColor={0:new Laya.Vector4(1,1,1,1),1:new Laya.Vector4(230/255,223/255,184/255,1),2:new Laya.Vector4(128/255,64/255,64/255,1),3:new Laya.Vector4(1,1,1,1),4:new Laya.Vector4(230/255,227/255,207/255,1),5:new Laya.Vector4(.6,115/255,115/255,1)},Xe.DrawPixs={1:17400,2:16e3,3:2e4,4:15e3,5:2e4,6:25e3,7:25e3,8:13e3,9:16e3,10:24e3},Xe.Sound={button:"Button.mp3",qitiao:"qitiao.mp3",luodi:"luodi.mp3",diejiaerren:"diejiaerren.mp3",diejiasanren:"diejiasanren.mp3",diejiayiren:"diejiayiren.mp3",over:"over.mp3",victory:"victory.mp3"};class ze{constructor(){this.items={}}has(e){return this.items.hasOwnProperty(e)}set(e,t){this.items[e]=t}delete(e){return this.has(e)&&delete this.items[e],!1}get(e){return this.items[e]}values(){let e=[];for(let t in this.items)this.has(t)&&e.push(this.items[t]);return e}}class Qe{constructor(e,t){this.min=e,this.max=t}}class Je{constructor(e,t){this._gameScene=je.getInstance(),this._imgTempTexture=[],this.curMode=[],this.curMode2=[],this.nTextures=0,this._levelNode=null,this.fingerNode=null,this.nail=null,this._nTotalPix=0,this.bCut=!1,this.bChanged=!1,this._drawLen=1,this._alphaA=.3,this._nFinishY=200,this._tempT=0,this._imgW=512,this._imgH=512,this._nTemp=.8,this._prvePos=new Laya.Vector2(0,0),this._checkW=0,this._checkH=0,this._modW=289,this._modH=289,this.scene3d=e,this._levelNode=t;let a=this._levelNode.getChildByName("nail");this.fingerNode=a.getChildAt(Fe.sNailShape),this._drawLen=Fe._curData.DrawAt.length,this.updateMode(),this.getTargetPixs()}updateMode(){this.tt=null,this._nTotalPix=0,this._nFinishY=200;let e=Fe._curData.DrawAt[Fe.nCurFinger-1];2==e&&(this._nFinishY=178),this._imgTempTexture[0]&&(this._imgTempTexture[0]=null),this._imgTempTexture[1]&&(this._imgTempTexture[1]=null);let t=null;var a="res/image/start_"+Fe.nCurFinger+".png";let i=Laya.loader.getRes(a);this.tt=new Laya.Texture(i);let s=this.tt.getPixels(0,0,this._imgW,this._imgH);this._curPixelsArray=null,this._curPixelsArray=new Uint8Array(s);var n=new Laya.Texture2D(this._imgW,this._imgH,Laya.Texture2D.FORMAT_R8G8B8A8,!1,!0);n.setSubPixels(0,0,512,512,this._curPixelsArray),this.curMode[Fe.nCurFinger-1]=this.fingerNode.getChildAt(e),t=this.curMode[Fe.nCurFinger-1].skinnedMeshRenderer.material,this._imgTempTexture[0]=n,t.albedoTexture=this._imgTempTexture[0];let o=null;var r="res/image/NailSticker2_"+(Fe.nLookSelect+1)+".png";let h=Laya.loader.getRes(r);this.tt2=new Laya.Texture(h);let l=this.tt2.getPixels(0,0,this._imgW,this._imgH),c=this._levelNode.getChildByName("Sticker");var d=new Laya.Texture2D(this._imgW,this._imgH,Laya.Texture2D.FORMAT_R8G8B8A8,!1,!0);d.setSubPixels(0,0,512,512,l),this.curMode2[Fe.nCurFinger-1]=c.getChildAt(e/2-1),o=this.curMode2[Fe.nCurFinger-1].meshRenderer.material,this._imgTempTexture[1]=d,o.albedoTexture=this._imgTempTexture[1],this._modW=Math.floor(512),this._modH=Math.floor(512),this._checkW=Math.floor((this._imgW-this._modW)/2),this._checkH=Math.floor((this._imgH-this._modH)/2)}getTargetPixs(){this.purposePixs=null;var e="res/image/NailSticker_"+(Fe.nLookSelect+1)+".png";let t=Laya.loader.getRes(e),a=new Laya.Texture(t);this.purposePixs=a.getPixels(0,0,this._imgW,this._imgH),this.purposePixs2=null;var i=Fe._curData.targetPng;let s=Laya.loader.getRes(i),n=new Laya.Texture(s);this.purposePixs2=n.getPixels(0,0,this._imgW,this._imgH);let o=0;for(var r=0;r<this.purposePixs2.length;r+=4)this.purposePixs2[r+3]>0&&o++;console.log("目标色值purpose lenght = ",e,o)}onMouseMove2(e,t){if(!Fe.bStart&&!Fe.bDrawed)return;let a=Fe.curTool.transform.position;e/=500,t<0||(t=.002,this.bCut&&Ee.inst.playVibrator(),a.x=e,a.y=t,Laya.timer.callLater(this,this.callLaterFun,[a]))}callLaterFun(e){if(Fe.bDrawed)return;Fe.curTool.transform.localPositionZ+=e.y;Fe.curTool.transform.localPositionZ;this.onHitRay()}onHitRay(){let e=Fe.curTool.transform.position;if(Fe.bDrawed)return;let t=e;if(t.z<.28)return;let a=2e3*Math.abs(t.z-.28),i=(this._modW,this._modH);if(a>this._nFinishY&&!Fe.bDrawed)return void this.checkDraw();let s,n,o=a,r=i/2;if(s=256,n=t.y<0?Math.floor(r+o*this._nTemp):Math.floor(3*o-40),256==this._prvePos.x&&this._prvePos.y==n)return;let h=new Laya.Vector2(256,n);if(this._prvePos.x=256,this._prvePos.y=n,256>=this._modW)return;let l=new Laya.Vector2(146,n),c=new Laya.Vector2(366,n+12);this.Painting(h,l,c),this._gameScene.updateProgress(344/48)}changeTexture(e){let t=this.fingerNode.getChildAt(e);if(t){let e=t.skinnedMeshRenderer.material;var a="res/image/NailSticker_"+Fe.nSelectPaper+".png",i=[{url:a,type:Laya.Loader.TEXTURE2D}];Laya.loader.create(i,Laya.Handler.create(this,function(){let t=Laya.loader.getRes(a);if(e.albedoTexture=t,Fe._curData.targetIndex){var i=Fe._curData.targetIndex;e.albedoColor=Xe.PaperColor[i]}}),Laya.Handler.create(this,function(e){},null,!1))}}changeOtherT(){let e=Fe._curData.DrawAt[Fe.nSelectPaper-1];for(var t=1;t<6;t++){Fe._curData.ChangeState[t-1]==Xe.State_Draw2&&2*t!=e&&0==Fe.findFinger(2*t)&&this.changeTexture(2*t)}}Checking(e){let t=new ze,a=e.x,i=e.y,s=new Laya.Vector2(2e3,2e3),n=new Laya.Vector2(0,0);for(var o=0;o<2*Math.PI;o+=1/160){var r=Math.floor(80*Math.sin(o)+a),h=Math.floor(80*Math.cos(o)+i);r<s.x?s.x=r:h<s.y&&(s.y=h),r>n.x?n.x=r:h>n.y&&(n.y=h);let e=t.get(r);e?(e.min>h&&(e.min=h),e.max<h&&(e.max=h)):t.set(r,new Qe(h,h))}this.Painting(e,s,n)}Painting(e,t,a){t.x<0&&(t.x=0),t.y<0&&(t.y=0),a.x>this._modW&&(a.x=this._modW),a.y>this._modH&&(a.y=this._modH);let i=a.x-t.x,s=a.y-t.y;if(i<=0||s<=0)return;let n=new Uint8Array(i*s*4),o=0,r=new Uint8Array(i*s*4),h=this._imgW,l=this._curPixelsArray;this.purposePixs;this.bCut=!1;for(let e=t.y;e<a.y;e++)for(let i=t.x;i<a.x;i++){let t=Math.floor(i+this._checkW),a=Math.floor(e+this._checkH),s=4*(t+a*h);var c=4*(t+a*h),d=4*(t+a*h)+1,g=4*(t+a*h)+2,u=4*(t+a*h)+3;this.purposePixs[u]>0?(n[o]=this.purposePixs2[s],n[o+1]=this.purposePixs2[s+1],n[o+2]=this.purposePixs2[s+2],n[o+3]=this.purposePixs2[s+3],o+=4):(r[o]=this.purposePixs2[s],r[o+1]=this.purposePixs2[s+1],r[o+2]=this.purposePixs2[s+2],r[o+3]=this.purposePixs2[s+3],n[o++]=l[c],n[o++]=l[d],n[o++]=l[g],n[o++]=l[u])}t.x+=this._checkW,t.y+=this._checkH,this._imgTempTexture[0].setSubPixels(t.x,t.y,i,s,n),this._imgTempTexture[1].setSubPixels(t.x,t.y,i,s,r)}nextGame(){for(var e=0;e<this._drawLen;e++)this._imgTempTexture[e]&&(this._imgTempTexture[e].destroy(),this._imgTempTexture[e]=null)}checkDraw(){this.nTextures=0,Fe.bGameWin=!0,Fe.nSteps++,Fe.bMouseMoving=!1,Fe.bPlayingAni=!1,Fe.bDrawed=!0,this._gameScene.onPaperDrawing()}}class qe{constructor(){}sceneOpen(e,t=!1,a,i,s){this._currentURL!=e&&(this._currentURL=e,Laya.Scene.open(e,t,a,i,s))}sceneClose(e){Laya.Scene.close(e),this._currentURL==e&&(this._currentURL="")}showDialogByClass(e){let t=new e;return Laya.stage.addChild(t),t}removeSp(e,t=!1){e&&(e.parent&&e.parent.removeChild(e),t&&(e=null))}static get Ins(){return this._ins||(this._ins=new qe),this._ins}}class Ye{constructor(e,t){this._gameScene=je.getInstance(),this.curMode=[],this.nTextures=0,this._levelNode=null,this.fingerNode=null,this.nail=null,this._nTotalPix=0,this.bCut=!1,this.bChanged=!1,this._alphaA=.3,this.nCurFinger=0,this._tempT=0,this._imgW=512,this._imgH=512,this._nTemp=.8,this._pencent=.1,this._prvePos=new Laya.Vector2(0,0),this._checkW=0,this._checkH=0,this._modW=289,this._modH=289,this.scene3d=e,this._levelNode=t;let a=this._levelNode.getChildByName("nail");this.fingerNode=a.getChildAt(Fe.sNailShape),this.updateMode(),this.getTargetPixs()}updateMode(){this._nTotalPix=0,this._markArray=new ze,this._curPixelsArray=null,this._imgTempTexture&&(this._imgTempTexture=null);let e=null;var t="res/image/start_"+Fe.nCurFinger+".png";let a=Laya.loader.getRes(t);this.tt=new Laya.Texture(a);let i=this.tt.getPixels(0,0,this._imgW,this._imgH);this._curPixelsArray=i,this._curPixelsArray=new Uint8Array(i);var s=new Laya.Texture2D(this._imgW,this._imgH,Laya.Texture2D.FORMAT_R8G8B8A8,!1,!0);s.setPixels(this._curPixelsArray);let n=Fe._curData.DrawAt[Fe.nCurFinger-1];console.log(" updateMode  atIndex  === ",n),this.curMode[Fe.nCurFinger-1]=this.fingerNode.getChildAt(n),e=this.curMode[Fe.nCurFinger-1].skinnedMeshRenderer.material,this._imgTempTexture=s,e.albedoTexture=this._imgTempTexture,this._modW=Math.floor(512),this._modH=Math.floor(512),this._checkW=Math.floor((this._imgW-this._modW)/2),this._checkH=Math.floor((this._imgH-this._modH)/2)}getTargetPixs(){this.purposePixs=null;var e="res/image/NailPicture_"+(Fe.nLookSelect+1)+".png";let t=Laya.loader.getRes(e),a=new Laya.Texture(t);this.purposePixs=a.getPixels(0,0,this._imgW,this._imgH);let i="Twinkle"+Fe._curData.DrawAt[Fe.nCurFinger-1]/2,s=this.fingerNode.getChildByName(i).skinnedMeshRenderer.material;s.albedoTexture=t,s.albedoColorA=.15}onMouseMove2(e,t){if(!Fe.bStart&&!Fe.bDrawed)return;let a=Fe.curTool.transform.position;e/=4e3,t/=4e3,this.bCut&&Ee.inst.playVibrator(),a.x=e,a.y=t,Laya.timer.callLater(this,this.callLaterFun,[a])}callLaterFun(e){Fe.curTool.transform.localPositionX+=e.x,Fe.curTool.transform.localPositionZ+=e.y,this.onHitRay()}onHitRay(){if(Fe.bDrawed)return;let e=Fe.curTool.transform.position;if(e.x+=.02,e.z+=.07,e.x<.05||e.x>.086||e.z<.335||e.z>.425)return;let t=1e3*Math.abs(e.x-.053),a=900*Math.abs(e.z-.325),i=this._modW,s=this._modH;if(a=a,(t=t)>i||a>s)return;let n,o,r=t,h=a;n=n=Math.floor(170+5*r),o=Math.floor(5*h);let l=new Laya.Vector2(n,o);if(this._prvePos.x=n,this._prvePos.y=o,n>=this._modW||n<=0)return;let c=new Laya.Vector2(n-20,o-20),d=new Laya.Vector2(n+20,o+20);this.Painting(l,c,d);let g=Xe.DrawPixs[Fe.nLookSelect+1];1.1*this.nTextures>g*this._pencent&&(this._pencent+=.1,this._gameScene.updateProgress(34.4))}Checking(e){let t=e.x,a=e.y,i=new Laya.Vector2(2e3,2e3),s=new Laya.Vector2(0,0);for(var n=0;n<2*Math.PI;n+=.025){var o=Math.floor(20*Math.sin(n)+t),r=Math.floor(20*Math.cos(n)+a);o<i.x?i.x=o:r<i.y&&(i.y=r),o>s.x?s.x=o:r>s.y&&(s.y=r)}this.Painting(e,i,s)}changeTexture(e){let t=this.fingerNode.getChildAt(e);if(t){let e=t.skinnedMeshRenderer.material;var a="res/image/NailPicture_"+Fe.nSelectDraw+".png",i=[{url:a,type:Laya.Loader.TEXTURE2D}];Laya.loader.create(i,Laya.Handler.create(this,function(){let t=Laya.loader.getRes(a);e.albedoTexture=t}),Laya.Handler.create(this,function(e){},null,!1))}}Painting(e,t,a){t.x<0&&(t.x=0),t.y<0&&(t.y=0),a.x>this._modW&&(a.x=this._modW),a.y>this._modH&&(a.y=this._modH);let i=a.x-t.x,s=a.y-t.y;if(i<=0||s<=0)return;let n=new Uint8Array(i*s*4),o=0,r=this._imgW,h=this._curPixelsArray,l=this.purposePixs;this.bCut=!1;for(let i=t.y;i<a.y;i++)for(let s=t.x;s<a.x;s++){if(!Fe.bMouseMoving)return;let t=Math.floor(s+this._checkW),a=Math.floor(i+this._checkH),S=4*(t+a*r);var c=4*(t+a*r),d=4*(t+a*r)+1,g=4*(t+a*r)+2,u=4*(t+a*r)+3;let m=this._markArray.get(s+"-"+i);if(l[u]>0&&!m){n[o]=h[S],n[o+1]=h[S+1],n[o+2]=h[S+2],n[o+3]=h[S+3],(e.x-s)*(e.x-s)+(e.y-i)*(e.y-i)<400&&(this.bCut=!0,n[o]=l[S],n[o+1]=l[S+1],n[o+2]=l[S+2],n[o+3]=l[S+3],Math.abs(l[S]-h[S])<20&&Math.abs(l[S+1]-h[S+1])<20&&Math.abs(l[S+2]-h[S+2])<20&&(m||(this._markArray.set(s+"-"+i,!0),this.checkDraw())),h[S]=n[o],h[S+1]=n[o+1],h[S+2]=n[o+2],h[S+3]=n[o+3]),o+=4}else n[o++]=h[c],n[o++]=h[d],n[o++]=h[g],n[o++]=h[u]}t.x+=this._checkW,t.y+=this._checkH,this._imgTempTexture.setSubPixels(t.x,t.y,i,s,n)}nextGame(){for(var e=0;e<Fe.nDrawLen;e++)this._imgTempTexture[e]&&(this._imgTempTexture[e].destroy(),this._imgTempTexture[e]=null)}checkDraw(){if(this.nTextures++,1.1*this.nTextures>=Xe.DrawPixs[(Fe.nLookSelect+1).toString()]&&(this.nTextures=0,Fe.nSteps++,Fe.bMouseMoving=!1,Fe.bDrawed=!0,this._pencent=.1,Fe.nGameState==Xe.State_Draw)){let e=Fe._curData.DrawAt[Fe.nCurFinger-1];this.changeTexture(e),this._gameScene.onDrawing()}}changeOtherT(){Fe._curData.DrawAt[Fe.nSelectDraw-1];for(var e=1;e<6;e++){Fe._curData.ChangeState[e-1]==Xe.State_Draw&&0==Fe.findFinger(2*e)&&this.changeTexture(2*e)}}}class je{constructor(){this._scene=null,this.JsonPath="res/level/leveldata.json",this._JsonData=null,this._endCamera=null,this.Level_lh=null,this.mainLayer=null,this.drawPaper=null,this.drawColor=null,this._Arm=null,this.bRestart=!1,this.state1=new Laya.AnimatorState,this.state2=new Laya.AnimatorState,this.camareNode=null,this.cutNode=null,this.swearNode=null,this.millNode=null,this.drawNode=null,this.slider=null,this.node1=null,this.node2=null,this.nailPart=null,this.curNail=null,this.curNailAll=null,this.hand=null,this.endPart=null,this.mainNode=null,this.gameNode=null,this.wommen=null,this.clothes1=null,this.index=0,this._Intervals=0,this.curZhuangshi=null,this.zsAll=null}static getInstance(){return this._instance||(this._instance=new je)}static get instance(){return null==je._instance&&(je._instance=new je),je._instance}static create(){null==je._instance&&(je._instance=new je)}initScene(e=!1){Fe.GetCacheData(),e?(this.reStartGame(),this.loadGameState()):Laya.Scene.open("gameUI/LoadSceneView.scene")}onLoadedJosn(){var e;e=Laya.Loader.getRes(this.JsonPath),this._JsonData=e,Fe._curData=e["L"+Fe.nCurScene.toString()],Fe.nGameState=Fe._curData.GameState[Fe.nStateSteps-1],Fe.nStateLen=Fe._curData.GameState.length,Fe._curData.DrawAt&&(Fe.nDrawLen=Fe._curData.DrawAt.length),Fe.sNailShape=Fe._curData.Shape-1}onLoadedComplete(e){this._scene=e,this.onLoadedJosn(),Laya.Scene.open(xe.GameStartView),this.mainNode=this._scene.getChildByName("zhucaidan"),this.mainNode.getChildByName("Main Camera").farPlane=100,this.gameNode=this._scene.getChildByName("Game"),this.gameNode.active=!1;Laya.loader.create("res/Unity/LayaScene_PlayerMode/Conventional/player.lh",Laya.Handler.create(this,this.loadPlayer)),this.camareNode=this.gameNode.getChildByName("CameraAll"),this.endPart=this.camareNode.getChildByName("Particle"),this._camera1=this.camareNode.getChildByName("Main Camera"),this._camera1.enableHDR=!1,this.hand=this.gameNode.getChildByName("Hand"),this.camareNode.getChildByName("Slide001").active=!1,this.receiveShadows()}loadPlayer(e){e&&(this._playerNode=e,this.mainNode.addChild(e),this.playWommenAni(!0),this.loadGameState())}playWommenAni(e){this.wommen&&(this.wommen.active=!1),this.clothes1&&(this.clothes1.active=!1);let t=Math.floor(3*Math.random())+1;if(this.wommen=this._playerNode.getChildByName("Woman00"+t.toString()),this.clothes1=this._playerNode.getChildByName("Clothes00"+t.toString()),!e)return this.wommen.active=!1,void(this.clothes1.active=!1);this.wommen.active=!0,this.clothes1.active=!0,Fe.playAnimations(this.wommen,"In"),Fe.playAnimations(this.clothes1,"In"),Laya.timer.once(3e3,this,function(){this.wommen&&(Fe.playAnimations(this.wommen,"idle"),Fe.playAnimations(this.clothes1,"idle"))}),this.hand.getChildByName("Hand").skinnedMeshRenderer.material.albedoColor=Xe.HandColor[t-1],this.hand.getChildByName("Nail").skinnedMeshRenderer.material.albedoColor=Xe.HandColor[t-1+3]}loadGameState(){Fe.nSteps=1,Fe.nGameState=Fe._curData.GameState[Fe.nStateSteps-1];var e="res/Unity/LayaScene_LevelMode/Conventional/LvNode"+Fe.nGameState.toString()+".lh";Fe.nGameState>3&&(e="res/Unity/LayaScene_LevelMode/Conventional/LvNode4.lh"),Laya.loader.create(e,Laya.Handler.create(this,this.onStateLoaded))}onStateLoaded(e){if(Fe.nGameState==Xe.State_Cut)this.cutNode&&(this.cutNode.destroy(),this.cutNode=null),this.cutNode=e.clone(),this.cutNode.active=!0,this.nailPart=this.cutNode.getChildByName("NailPart"),this._scene.addChild(this.cutNode),Fe.bTry?(this.initMainLayer(),Fe.bTry=!1,this.onCuting()):this.onCuting();else if(Fe.nGameState==Xe.State_Swear)this.swearNode&&(this.swearNode.destroy(),this.swearNode=null),this.swearNode=e.clone(),this.node1=this.swearNode.getChildByName("GameObject"),this._scene.addChild(this.swearNode),this.mainLayer?this.onSwearing():Fe.bTry&&(this.initMainLayer(),Fe.bTry=!1);else if(Fe.nGameState==Xe.State_Mill)this.millNode&&(this.millNode.destroy(),this.millNode=null),this.millNode=e.clone(),this.millNode.active=!0,Fe.sNailShape>0?this.curNail=this.millNode.getChildAt(Fe.sNailShape-1):this.curNail=this.millNode.getChildAt(Fe.sNailShape),this.curNail.active=!0,this._scene.addChild(this.millNode),this.onMilling();else if(Fe.nGameState>=Xe.State_Draw){this.drawNode=e.clone(),this._scene.addChild(this.drawNode);if(Laya.loader.create("res/Unity/LayaScene_GameScene/LayaScene_ShipinMode/Conventional/zhuangshiAll.lh",Laya.Handler.create(this,this.onLoadZhuangshi)),1==Fe.nCurFinger){let e=this.drawNode.getChildByName("nail");this.curNailAll=e.getChildAt(Fe.sNailShape)}Fe.nGameState==Xe.State_Draw?this.onDrawing():Fe.nGameState==Xe.State_Draw2?this.onPaperDrawing():Fe.nGameState==Xe.state_Beautify&&this.onBeautify()}}receiveShadows(){var e=this.gameNode.getChildByName("Light").getChildByName("Directional Light");e.shadow=!0,e.shadowDistance=1.2,e.shadowResolution=2048,e.shadowPCFType=1,e.shadowPSSMCount=1,this.gameNode.getChildByName("Plane").meshRenderer.receiveShadow=!0,this.hand.getChildByName("Hand").skinnedMeshRenderer.castShadow=!0}changePlaneColor(){let e=this.gameNode.getChildByName("Plane").meshRenderer.material,t=Math.floor(4*Math.random());e.albedoColor=Xe.PlaneColor[t]}updateAni(){if(Fe.bMouseMoving&&Fe.nGameState==Xe.State_Swear)if(this.index<=90){let e="Nail"+(this.index-1),t=this.node1.getChildByName(e);t&&(t.active=!1);let a="Nail"+this.index,i=this.node1.getChildByName(a);i&&(i.active=!0),this.index++,this.updateProgress(344/91),this.onShocking()}else this.index=0,Laya.timer.clear(this,this.updateAni),Fe.nSteps++,this.onSwearing();else Fe.bMouseMoving&&Fe.nGameState==Xe.State_Mill?this.index<60?(this.index+=1,6==Fe.nSteps?this.playAniByFrames1(this.curNail,"millNailR",130,this.index,Xe.AniFrames[Fe.sNailShape][0]):4==Fe.nSteps&&this.playAniByFrames1(this.curNail,"millNailL",40,this.index,Xe.AniFrames[Fe.sNailShape][0]),this.updateProgress(344/120),this.onShocking()):(this.index=0,Laya.timer.clear(this,this.updateAni),Fe.nSteps++,this.onMilling()):Fe.nGameState==Xe.State_Draw2&&Fe.bPlayingAni&&(Fe.curTool.transform.localPositionZ+=.001,this.drawPaper.onHitRay())}onShocking(){Laya.timer.currTimer-this._Intervals>=30&&(Ee.inst.playVibrator(),this._Intervals=Laya.timer.currTimer)}onTouchDown(){if(Fe.nGameState!=Xe.State_Draw2||Fe.bPlayingAni||3!=Fe.nSteps)if(Fe.nGameState==Xe.State_Cut||Fe.nGameState==Xe.State_Swear||Fe.nGameState==Xe.State_Draw)Fe.bShowSlider||(Fe.bShowSlider=!0,this.showSlider(!1));else if(Fe.nGameState==Xe.State_Mill){if(!Fe.bParticling&&this.curNail){let e=this.curNail.getChildByName("Knife001");Fe.bParticling=!0,Fe.playParticle(e,!0,1),Fe.playParticle(e,!0,2)}this.mainLayer&&3==Fe.nSteps&&this.mainLayer.hideHandUI(),3==Fe.nSteps&&Fe.nSteps++}else Fe.nGameState==Xe.state_Beautify&&3==Fe.nSteps&&(Fe.nSteps++,this.onBeautify());else Fe.bPlayingAni=!0,Fe.playAnimations(Fe.curTool,"Apply1")}onMouseUp(){if(Fe.nGameState==Xe.State_Mill&&Fe.bParticling){if(this.curNail){let e=this.curNail.getChildByName("Knife001");Fe.playParticle(e,!1,1),Fe.playParticle(e,!1,2)}Fe.bParticling=!1}else Fe.nGameState==Xe.State_Draw2&&Fe.bPlayingAni&&(Fe.playAnimations(Fe.curTool,"Apply2"),Fe.bPlayingAni=!1)}playAniByFrames(e,t,a,i,s){var n=e.getComponent(Laya.Animator);n&&!Fe.bGameWin&&(this.state1.name=t+i,this.state1.clipStart=(a+i)/s,this.state1.clipEnd=(a+i+.5)/s,this.state1.clip=n.getDefaultState().clip,this.state1.clip.islooping=!1,n.addState(this.state1),n.play(this.state1.name),Fe.bMouseMoving)}playAniByFrames1(e,t,a,i,s){var n=e.getComponent(Laya.Animator);n&&!Fe.bGameWin&&(this.state2.name=t+i,this.state2.clipStart=(a+i)/s,this.state2.clipEnd=(a+i+.5)/s,this.state2.clip=n.getDefaultState().clip,this.state2.clip.islooping=!1,n.addState(this.state2),n.play(this.state2.name))}reStartGame(){Fe._curData=null,Fe.bTryUse?Fe._curData=this._JsonData["L"+Fe.nTryuseScene.toString()]:(Fe._curData=this._JsonData["L"+Fe.nCurScene.toString()],Laya.Scene.open(xe.GameStartView)),Fe.nStateLen=Fe._curData.GameState.length,Fe._curData.DrawAt&&(Fe.nDrawLen=Fe._curData.DrawAt.length),Fe.sNailShape=Fe._curData.Shape-1}reSetCamera(){}initMainLayer(){this.mainLayer&&(this.mainLayer.destroy(),this.mainLayer=null),null==this.mainLayer&&Laya.Scene.open("gameUI/MainLayer.json",!1,null,Laya.Handler.create(this,e=>{this.mainLayer=e,this.gameBegin()}))}updateLvPoint(e=!0){this.mainLayer&&(this.mainLayer.updateLvPoint(e),e||this.mainLayer.showRetButton(!1))}updateProgress(e){this.mainLayer&&this.mainLayer.updateProgress(e)}setProgress(e){this.mainLayer&&this.mainLayer.setProgress(e)}gameBegin(){this.bRestart=!1,Fe.bStart=!0,this.mainNode.active=!1,this.gameNode.active=!0,Fe.nGameState==Xe.State_Cut?this.showSlider(!0):Fe.nGameState==Xe.State_Swear&&this.onSwearing(!1),this.changePlaneColor(),Fe.bTryUse?Ne.sdk.startLevel(Fe.nTryuseScene+1e3):Ne.sdk.startLevel(Fe.nShowScene),Laya.timer.once(1200,this,function(){Fe.bPlayerMove=!1})}changeSwearTexture(){var e="res/image/NailColour_"+(Fe.nLookSelect+1)+".png",t=[{url:e,type:Laya.Loader.TEXTURE2D}];Laya.loader.create(t,Laya.Handler.create(this,function(){let t=this.swearNode.getChildByName("Container"),a=t.getChildByName("Container001"),i=t.getChildByName("Container002"),s=Laya.loader.getRes(e);this.node1.getChildAt(0).meshRenderer.sharedMaterial.albedoTexture=s;let n=a.meshRenderer.material;a.meshRenderer.materials[1].albedoColor=Xe.ColorVec3[Fe.nLookSelect],n.albedoTexture=s,a.meshRenderer.castShadow=!0;let o=i.meshRenderer.material;i.meshRenderer.materials[1].albedoColor=Xe.ColorVec3[Fe.nLookSelect],o.albedoTexture=s,i.meshRenderer.castShadow=!0,Fe.nSteps++,this.onSwearing()}),Laya.Handler.create(this,function(e){},null,!1))}changeToolT(e,t){if(e){var a=Fe.shopSelect[t.toString()],i="res/image/"+t+"_"+(a+1)+".png",s=[{url:i,type:Laya.Loader.TEXTURE2D}];Laya.loader.create(s,Laya.Handler.create(this,function(){let a=e.meshRenderer.material,s=Laya.loader.getRes(i);if(a.albedoTexture=s,1==t){e.getChildAt(0).meshRenderer.material.albedoTexture=s}}),Laya.Handler.create(this,function(e){},null,!1))}}tryUseCallF(){Fe.bTryUse?(this.removeNode(),this.initScene(!0)):this.initMainLayer()}onCuting(){Fe.curTool=this.cutNode.getChildByName("tool"),Fe.curTool.active=!0;let e=Fe.curTool.getChildAt(0);1==Fe.nSteps?(this.nailPart.active=!0,e.meshRenderer.castShadow=!0,e.addComponent(He),Fe.playAnimations(this.hand,"idle"),Fe.playParticle(Fe.curTool,!1,1),this.changeToolT(e,1)):2==Fe.nSteps&&(Fe.playAnimations(e,"Out"),Laya.timer.once(500,this,function(){Fe.bStart&&1!=Fe.nSteps&&(Fe.curTool.active=!1,this.checkFinish(),this.cutNode&&(this.cutNode.destroy(),this.cutNode=null),this.slider.active=!1,Fe.bShowSlider=!1,this.updateLvPoint())}))}onSwearing(e=!0){let t=this.swearNode.getChildByName("Container"),a=t.getChildByName("Container001"),i=t.getChildByName("Container002"),s=this.swearNode.getChildByName("Ruler");if(1==Fe.nSteps)s.meshRenderer.castShadow=!0,this.changeToolT(s,2),this.mainLayer.RefreshList(),e?(s.active=!0,Fe.playAnimations(s,"In"),Laya.timer.once(1e3,this,function(){this.showMainList()})):(Laya.timer.once(200,this,function(){s.active=!0,Fe.playAnimations(s,"In")}),Laya.timer.once(1e3,this,function(){this.showMainList()}));else if(2==Fe.nSteps)t&&(t.active=!0),Laya.timer.once(1e3,this,function(){Fe.bStart&&(a&&(a.active=!1),i&&(i.active=!0),this.onShocking())}),Laya.timer.once(2e3,this,function(){this.onShocking()}),Laya.timer.once(3e3,this,function(){if(Fe.bStart&&Fe.nGameState==Xe.State_Swear){t.getChildByName("Brush").active=!1,t.getChildByName("NailBall").active=!1,Fe.nSteps++,this.onSwearing()}});else if(3==Fe.nSteps){Fe.curTool&&(Fe.curTool.destroy(),Fe.curTool=null),this.showSlider(!0),Fe.curTool=this.swearNode.getChildByName("Brush"),Fe.curTool.active=!0,Fe.curTool.getChildByName("Brush001").meshRenderer.castShadow=!0,this.node1.active=!0,Laya.timer.loop(20,this,this.updateAni)}else if(4==Fe.nSteps){this.mainLayer&&this.mainLayer.updateTask(!1),this.showSlider(!1);let e=Fe.curTool.getChildByName("Brush001");Fe.playAnimations(e,"Out"),Laya.timer.once(1e3,this,function(){if(!Fe.bStart||1==Fe.nGameState)return;Fe.curTool.active=!1;let e=this.swearNode.getChildByName("Container"),t=this.swearNode.getChildByName("Ruler");Fe.playAnimations(e,"Out"),Fe.playAnimations(t,"Out"),Fe.nLookSelect=0,Fe.bShowSlider=!1;let a=this.swearNode.getChildByName("NailShow");this.curNailAll=a.getChildAt(0),Laya.timer.once(1e3,this,function(){Fe.bStart&&(e.active=!1,t.active=!1,this.checkFinish())})})}}showMainList(){this.mainLayer&&(this.mainLayer.showList(!0),this.mainLayer.updateTask(!0))}checkFinish(){Fe.nSteps=1,Fe.bStart&&(Fe.nStateSteps++,Fe.nStateSteps>Fe.nStateLen?(this.endPart.active=!0,Laya.timer.once(3e3,this,this.showEndOff)):Ne.isWX?this.mainLayer&&this.mainLayer.showCompleteBtn(!0):this.loadGameState())}onMilling(){if(1==Fe.nSteps){this.node1.active=!1;let e=this.curNail.getChildByName("Knife001"),t=e.getChildByName("Knife002");t.meshRenderer.castShadow=!0,this.changeToolT(t,3),this.curNail.active=!0,Fe.playParticle(e,!1,1),Fe.playParticle(e,!1,2),Fe.playIntervalAni(this.curNail,"nailIdle",0,5),Laya.timer.once(500,this,function(){Fe.nSteps++,this.onMilling()}),this.updateLvPoint()}else if(2==Fe.nSteps)Fe.playAnimations(this.curNail,"In"),3==Fe.sNailShape&&Fe.playAnimations(this.camareNode,"mozhijia"),Laya.timer.once(1e3,this,function(){Fe.bStart&&(Fe.nSteps++,this.mainLayer.handUIMove(),this.onMilling())});else if(3==Fe.nSteps)Laya.timer.loop(25,this,this.updateAni);else if(5==Fe.nSteps)Fe.sNailShape<3?(Fe.playIntervalAni(this.curNail,"LtoR",100,130),Fe.playAnimations(this.camareNode,"mozhijia"),Fe.nSteps++,Laya.timer.once(1e3,this,function(){Fe.bStart&&Laya.timer.loop(25,this,this.updateAni)})):(Fe.nSteps=7,this.onMilling());else if(7==Fe.nSteps){Fe.playIntervalAni(this.curNail,"Out",190,220),Fe.playAnimations(this.camareNode,"mozhijiaBack");let e=this.millNode.getChildByName("NailShow");this.curNailAll=e.getChildAt(Fe.sNailShape),Laya.timer.once(1e3,this,function(){this.checkFinish()})}}changeAni(){this.curNail&&(this.curNail.active=!1),this.curNailAll.active=!0,this.node1.active=!1,Fe.playAnimations(this.camareNode,"ShowAll"),Fe.playAnimations(this.hand,"ShowAll"),Fe.playAnimations(this.curNailAll,"ShowAll");let e=this.drawNode.getChildByName("HandPoint");Fe.playAnimations(e,"ShowAll"),Laya.timer.once(1e3,this,function(){Fe.playAnimations(this.camareNode,"Show");let t="Show"+Fe._curData.DrawAt[Fe.nCurFinger-1]/2;Fe.playAnimations(this.hand,t),Fe.playAnimations(this.curNailAll,t),Fe.playAnimations(e,t)})}switchFingeAni(){Fe.playAnimations(this.camareNode,"ShowBack");let e="ShowBack"+Fe._curData.DrawAt[Fe.nCurFinger-2]/2;Fe.playAnimations(this.hand,e),Fe.playAnimations(this.curNailAll,e);let t=this.drawNode.getChildByName("HandPoint");Fe.playAnimations(t,e),Laya.timer.once(1e3,this,function(){let e="Show"+Fe._curData.DrawAt[Fe.nCurFinger-1]/2;Fe.playAnimations(this.hand,e),Fe.playAnimations(this.curNailAll,e),Fe.playAnimations(t,e),Fe.playAnimations(this.camareNode,"Show")})}changeDrawT(){Fe.bDrawed=!1;var e="res/image/NailPicture_"+(Fe.nLookSelect+1)+".png",t=[{url:"res/image/start_"+Fe.nCurFinger+".png",type:Laya.Loader.TEXTURE2D},{url:e,type:Laya.Loader.TEXTURE2D}];Laya.loader.create(t,Laya.Handler.create(this,function(){null==this.drawColor?this.drawColor=new Ye(this._scene,this.drawNode):(this.drawColor.updateMode(),this.drawColor.getTargetPixs())}),Laya.Handler.create(this,function(e){},null,!1)),Fe.curTool&&(Fe.curTool=null),Fe.curTool=this.drawNode.getChildByName("Pen"),Fe.curTool.active=!0,this.showSlider(!0)}onDrawing(){let e=this.drawNode.getChildByName("Pen"),t=e.getChildByName("Pen001");1==Fe.nSteps?(Fe.nCurFinger>1?this.switchFingeAni():this.changeAni(),this.updateLvPoint(),this.setProgress(0),t.meshRenderer.castShadow=!0,this.mainLayer&&(this.mainLayer.RefreshList(),Laya.timer.once(2e3,this,function(){this.showMainList()}))):2==Fe.nSteps?(Fe.bPlayingAni=!1,Fe.playAnimations(e,"Out"),Fe.nSteps++,this.onDrawing(),Laya.timer.once(1e3,this,function(){e&&(e.active=!1)})):3==Fe.nSteps&&(this.stepsOver(),Fe.nCurFinger>Fe.nDrawLen?(this.endPart.active=!0,Laya.timer.once(3e3,this,this.showEndOff),this.checkChange()):this.checkFingerState())}changePaperT(){var e="res/image/start_"+Fe.nCurFinger+".png",t="res/image/NailSticker_"+(Fe.nLookSelect+1)+".png",a="res/image/NailSticker2_"+(Fe.nLookSelect+1)+".png",i=Fe._curData.targetPng,s=[{url:e,type:Laya.Loader.TEXTURE2D},{url:t,type:Laya.Loader.TEXTURE2D},{url:i,type:Laya.Loader.TEXTURE2D},{url:a,type:Laya.Loader.TEXTURE2D}];Laya.loader.create(s,Laya.Handler.create(this,function(){null==this.drawPaper?this.drawPaper=new Je(this._scene,this.drawNode):(this.drawPaper.updateMode(),this.drawPaper.getTargetPixs()),Fe.nSteps++,this.onPaperDrawing()}),Laya.Handler.create(this,function(e){},null,!1))}onPaperDrawing(){let e=Fe._curData.DrawAt[Fe.nCurFinger-1],t=this.drawNode.getChildByName("Sticker"),a=t.getChildAt(e/2-1);this.drawNode.getChildByName("Pen").active=!1,1==Fe.nSteps?(a.active=!1,Fe.nCurFinger>1?this.switchFingeAni():this.changeAni(),this.updateLvPoint(),this.setProgress(0),this.mainLayer&&(this.mainLayer.RefreshList(),Laya.timer.once(2e3,this,function(){this.showMainList()})),console.log("onPaperDrawing  GameState == ",Fe.nGameState)):2==Fe.nSteps?(a.active=!1,Fe.curTool&&(Fe.curTool=null),Fe.curTool=this.drawNode.getChildByName("BottleNode"),a.active=!0,this.curNailAll.active=!0,Fe.playAnimations(t,"In"),Laya.timer.once(800,this,function(){Fe.curTool&&(Fe.curTool.active=!0),Fe.playAnimations(Fe.curTool,"In"),Fe.nSteps++}),Laya.timer.once(1500,this,function(){Fe.bStart&&this.mainLayer&&this.mainLayer.handSlip(!0),Fe.bDrawed=!1})):4==Fe.nSteps&&(this.setProgress(344),Fe.bPlayingAni=!1,Fe.playAnimations(t,"Out"),Fe.playAnimations(Fe.curTool,"Out"),Laya.timer.once(1e3,this,function(){Fe.curTool&&(Fe.curTool.transform.localPositionZ=.2817621,Fe.curTool.active=!1,a.active=!1)}),this.stepsOver(),Laya.timer.clear(this,this.updateAni),Fe.nCurFinger>Fe.nDrawLen?(this.endPart.active=!0,Laya.timer.once(2500,this,this.showEndOff),this.checkChange()):this.checkFingerState())}stepsOver(){Fe.nCurFinger++,Fe.nLookSelect=0,Fe.nSteps=1,Fe.bGameWin=!1,this.setProgress(344),this.mainLayer.updateTask(!1),this.mainLayer.handSlip(!1),this.mainLayer.handSlip1(!1)}onBeautify(){let e=this.drawNode.getChildByName("HandPoint"),t=Fe._curData.DrawAt[Fe.nCurFinger-1];1==Fe.nSteps?(Fe.nCurFinger>1?this.switchFingeAni():this.changeAni(),this.updateLvPoint(),this.setProgress(0),this.mainLayer&&(this.mainLayer.RefreshList(),Laya.timer.once(2e3,this,function(){this.showMainList()}))):2==Fe.nSteps?(this.curZhuangshi.active=!0,Fe.playAnimations(this.zsAll,"idle"),Laya.timer.once(300,this,function(){Fe.bStart&&this.mainLayer&&(Fe.nSteps++,this.mainLayer.handSlip1(!0))})):4==Fe.nSteps?(Fe.playAnimations(this.zsAll,"Move"),this.showSlider(!1),Laya.timer.once(670,this,function(){if(!Fe.bStart)return;this.curZhuangshi.active=!1;let a=e.getChildAt(t/2-1),i=this.zsAll.getChildAt(Fe.nLookSelect).clone();i.active=!0,a.addChild(i),Fe.nSteps++,this.onBeautify()})):5==Fe.nSteps&&(this.stepsOver(),Fe.nCurFinger>Fe.nDrawLen?(this.endPart.active=!0,this.checkChange(),Laya.timer.once(2300,this,this.showEndOff)):this.checkFingerState())}checkChange(){Fe._curData.ChangeState&&(this.drawColor&&this.drawColor.changeOtherT(),this.drawPaper&&this.drawPaper.changeOtherT(),this.zsAll&&this.changeOtherBeauty())}changeBeauty(){this.curZhuangshi&&(this.curZhuangshi.destroy(),this.curZhuangshi=null);this.drawNode.getChildByName("HandPoint");let e=this.zsAll.getChildAt(Fe.nLookSelect);this.curZhuangshi=e.clone(),this.zsAll.addChild(this.curZhuangshi),Fe.nSteps++,this.onBeautify()}changeOtherBeauty(){let e=this.drawNode.getChildByName("HandPoint");for(var t=1;t<6;t++){if(Fe._curData.ChangeState[t-1]==Xe.state_Beautify&&0==Fe.findFinger(2*t)){let a=e.getChildAt(t-1),i=this.zsAll.getChildAt(Fe.nSelectBeauty-1).clone();i.active=!0,a.addChild(i)}}}onLoadZhuangshi(e){this.zsAll&&(this.zsAll.destroy(),this.zsAll=null),this.zsAll=e,this.drawNode.addChild(this.zsAll)}checkFingerState(){Fe.nSteps=1,Fe.nStateSteps++,Fe.nGameState=Fe._curData.GameState[Fe.nStateSteps-1],console.log("checkFingerState  nStateSteps = "+Fe.nStateSteps+"  玩法nGameState = ",Fe.nGameState),Fe.nGameState==Xe.State_Draw?this.onDrawing():Fe.nGameState==Xe.State_Draw2?this.onPaperDrawing():Fe.nGameState==Xe.state_Beautify&&this.onBeautify()}showEndOff(){if(!Fe.bStart||1==Fe.nGameState)return;if(this.gameNode.getChildByName("Light").transform.localRotationEulerX+=90,this.curNailAll.active=!0,Fe.playAnimations(this.curNailAll,"Finish"),Fe.playAnimations(this.hand,"Finish"),Fe.playAnimations(this.hand,"Finish"),this.drawNode){let e=this.drawNode.getChildByName("HandPoint");Fe.playAnimations(e,"Finish")}let e=this.gameNode.getChildByName("DrawEnd");e.active=!0,this._endCamera=e.getChildByName("Camera"),Fe.curTool&&(Fe.curTool.destroy(),Fe.curTool=null),Ne.isTT&&Ne.sdk.stopRecording(),this.updateLvPoint(!1),this.mainLayer.setZSADVisible(!1),qe.Ins.sceneOpen(xe.ShowOffView,!1)}showEndEffect(e){let t=this.gameNode.getChildByName("DrawEnd").getChildByName("Particle");t&&(t.active=e)}showSlider(e){if(e){this.slider&&(this.slider.destroy(),this.slider=null),Fe.bShowSlider=!1;let t=this.camareNode.getChildByName("Slide001");this.slider=t.clone(),this.camareNode.addChild(this.slider),this.slider.active=e}else this.slider&&(this.slider.active=e)}GameFinish(e=2e3){Fe.bStart=!1,Fe.taskScore=0==Fe.taskScore?10:Fe.taskScore,Fe.bGameWin=!0,Fe.nSteps=1,Fe.bMouseMoving=!1,this.mainLayer&&(this.mainLayer.destroy(),this.mainLayer=null),Fe.bAdtoEnd||this.removeNode(),Laya.timer.once(e,this,function(){qe.Ins.sceneOpen(xe.ResultView,!1,{gameresult:!0})})}onCloseFullAd(e){qe.Ins.sceneOpen(xe.ResultView,!1,{gameresult:Fe.bGameWin})}nextGame(e){if(e?Fe.bTryUse?Ne.sdk.endLevel(Fe.nTryuseScene+1e3,"complete"):Ne.sdk.endLevel(Fe.nShowScene,"complete"):Fe.bTryUse?Ne.sdk.endLevel(Fe.nTryuseScene+1e3,"fail"):Ne.sdk.endLevel(Fe.nShowScene,"fail"),e&&!Fe.bTryUse&&(Fe.bPassed?(Fe.nShowScene++,Fe.nCurScene=Math.floor(Math.random()*Fe.nTotalScene)+1):(Fe.nCurScene++,Fe.nShowScene=Fe.nCurScene,Fe.nCurScene>Fe.nTotalScene&&(Fe.nCurScene=Math.floor(Math.random()*Fe.nTotalScene)+1,Fe.bPassed=!0,Laya.LocalStorage.setJSON("bPassed",!0)),Laya.LocalStorage.setItem("CurScene",Fe.nCurScene.toString())),Laya.LocalStorage.setItem("ShowScene",Fe.nShowScene.toString())),this.gameNode){this.gameNode.getChildByName("DrawEnd").active=!1}this.gameNode.getChildByName("Light").transform.localRotationEulerX=0,this.playWommenAni(!0),this.endPart.active=!1,Fe.bParticling=!1,Laya.timer.clear(this,this.updateAni),this.index=0,this._Intervals=0,Fe.bStart=!1,Fe.bGameWin=!1,Fe.nSteps=1,Fe.nStateLen=1,Fe.bMouseMoving=!1,Fe.bPlayingAni=!1,this.bRestart=!0,Fe.nStateSteps=1,Fe.nLookSelect=0,Fe.nSweared=0,Fe.taskScore=0,Fe.nCurFinger=1,Fe.bShowSlider=!1,Fe.bTryUse=!1,Fe.bTry=!1,Fe.nShopTab=1,Fe.bPlayerMove=!0,this.drawPaper=null,this.drawColor=null,Fe.nSelectBeauty=1,Fe.nSelectDraw=1,Fe.nSelectPaper=1,Fe.bAdtoEnd=!1,Laya.timer.clearAll(this),Fe.curTool&&(Fe.curTool.destroy(),Fe.curTool=null),this.slider&&(this.slider.destroy(),this.slider=null),this.initScene(this.bRestart)}removeNode(){this.playWommenAni(!1),this.gameNode.active=!1,this.mainNode.active=!0,Fe.playAnimations(this.camareNode,"idle"),Fe.playAnimations(this.hand,"idle"),this.cutNode&&(this.cutNode.destroy(),this.cutNode=null),this.swearNode&&(this.swearNode.destroy(),this.swearNode=null),this.millNode&&(this.millNode.destroy(),this.millNode=null),this.drawNode&&(this.drawNode.destroy(),this.drawNode=null),this.curNailAll&&(this.curNailAll.destroy(),this.curNailAll=null),this.zsAll&&(this.zsAll.destroy(),this.zsAll=null)}get tooltoPosX(){return Fe.curTool.transform.localPositionX}set tooltoPosX(e){Fe.curTool.transform.localPositionX=e}}je._instance=null;class Ze extends e.commonUI.TryUseDialogUI{constructor(){super(),this._gameScene=je.getInstance(),this.isGateSelect=!0,this.gate=0,this.videoBtn.on(Laya.Event.CLICK,this,this.videoClick),this.selectImg.on(Laya.Event.CLICK,this,this.selectClick),this.passBtn.on(Laya.Event.CLICK,this,this.closeClick),this.Btn_OPClose.on(Laya.Event.CLICK,this,this.closeClick),this.Img_Native.on(Laya.Event.CLICK,this,this.nativeAdClick),this.Btn_ViewAD.on(Laya.Event.CLICK,this,this.nativeAdClick),this.Btn_Close_Native.on(Laya.Event.CLICK,this,this.closenative),this.height=Laya.stage.height,Le.largeScreen()&&(this.spLayertop.y+=120)}onEnable(){this.gate=Math.floor(40*Math.random()),this.showItem(),Ae.getInstacne().ShowInter(!1)}onEnableUIInit(){}onEnableADControl(){Ne.isTT?(this.Img_Native.visible=!1,this.videoBtn.visible=!0,this.Btn_OPClose.visible=!1,this.selectImg.visible=!1,this.unlockcontrol=!1,this.changeSelectGateSt()):Ne.isQQ?(Ne.sdk.destroyBlockAd(),this.Btn_OPClose.visible=!1,this.Img_Native.visible=!1,this.passBtn.visible=!1,this.timer.once(2e3,this,()=>{this.passBtn.visible=!0})):Ne.isOP?(this.Btn_OPClose.visible=!1,this.Img_Native.visible=!1,this.selectImg.visible=!1,this.nativeData=Ne.sdk.getNativeData()):(console.log("MyOPPOAD:no  zs_native_tryuse_show"),this.Img_Native.visible=!1,Le.largeScreen()&&(this.downBtns.y=879))}videoClick(e){Ae.getInstacne().ShowRewardVideo((e,t)=>{t?(be.Ins.event("cut",this.gate),this.close(),Fe.bTryUse=!0,Fe.bTry=!0,this._gameScene.tryUseCallF()):We.Ins.showMsgTip("观看完整视频才能获得金币")},null,this),e&&e.stopPropagation()}selectClick(e){this.isGateSelect=!this.isGateSelect,console.log("this.isGateSelect",this.isGateSelect),this.changeSelectGateSt(),e.stopPropagation()}changeSelectGateSt(){this.unlockcontrol?(this.selectImg.skin=this.isGateSelect?"common/tips-37.png":"common/tips-36.png",this.passBtn.skin=this.isGateSelect?"common/tips-33.png":"common/tips-32.png"):(this.selectImg.skin=this.isGateSelect?"common/tips-35.png":"common/tips-34.png",this.passBtn.skin=this.isGateSelect?"common/tips-32.png":"common/tips-33.png")}closeClick(e){"common/tips-34.png"!=this.selectImg.skin&&"common/tips-37.png"!=this.selectImg.skin?(this.close(),Fe.bTryUse=!1,this._gameScene.tryUseCallF(),e.stopPropagation()):this.videoClick(null)}onClosed(){}onDisable(){Ae.getInstacne().ShowBanner()}showItem(){this.icon.skin="res/image/item/1-"+Fe.nTryuseScene+".png"}nativeAdClick(){this.nativeData&&(console.log("MyOPPOAD:NativeAdDialog.ts--nativeAdClick"),Ne.sdk.reportAdClickex(this.nativeData)),console.log("MyOPPOAD:nativeAdClick",this.nativeData.adId)}closenative(e){this.Img_Native.visible=!1,e.stopPropagation()}}function _adjust_bit_value(e){for(var t=0;t<e.length;t++)for(;e[t]>=1e3;)e[t]-=1e3,t+1>=e.length&&this.value_set.push(0),e[t+1]=e[t+1]+1}function large_number(e){this.value_set=e,_adjust_bit_value(this.value_set)}large_number.prototype.large_add=function(e){for(;this.value_set.length<e.value_set.length;)this.value_set.push(0);for(var t=0;t<e.value_set.length;t++)this.value_set[t]=this.value_set[t]+e.value_set[t];_adjust_bit_value(this.value_set)},large_number.prototype.format_string=function(){for(var e,t=""+this.value_set[this.value_set.length-1],a=this.value_set.length-2;a>=0;a--)t=t+" "+((e=this.value_set[a])<10?"00"+e:e<100?"0"+e:""+e);return t};const $e={Math:new class{randomInt(e,t){return Math.round(Math.random()*(t-e)+e)}randomNumber(e,t){return e+(t-e)*Math.random()}randomBetween(e){return e-this.randomNumber(0,2*e)}sin(e){return Math.sin(e*Math.PI/180)}cos(e){return Math.cos(e*Math.PI/180)}tan(e){return Math.tan(e*Math.PI/180)}angle2Radian(e){return e*Math.PI/180}radian2Angle(e){return 180*e/Math.PI}angle(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}angle1(e,t,a,i){return 180*Math.atan2(i-t,a-e)/Math.PI}randomCircle(e){let t=this.angle2Radian(360*Math.random());return{x:e*Math.cos(t),y:e*Math.sin(t)}}rnd(e){return(e=(9301*e+49297)%233280)/233280}seedRandom(e,t){return t||(t=(new Date).getTime()),Math.ceil(this.rnd(t)*e)}static getRandNumForRange(e,t,a){let i,s=[],n=[];for(let a=e;a<=t;a++)s.push(a);for(let e=0;e<a;e++)i=Math.floor(Math.random()*s.length),n.push(s[i]),s.splice(i,1);return n}static Clamp(e,t,a){return e<t?t:e>a?a:e}},String:new class{cutName(e,t=10,a=!0){const i=/[^\x00-\xff]/g;if(e.replace(i,"mm").length<=t)return e;for(let s=Math.floor(t/2);s<e.length;s++)if(e.substr(0,s).replace(i,"mm").length>=t)return e.substr(0,s)+(a?"...":"");return e}numInsertComma(e){const t=e.toString(),a=t.length;if(a<=4)return t;const i=a%3;return i>0?t.slice(0,i)+","+t.slice(i,a).match(/\d{3}/g).join(","):t.slice(i,a).match(/\d{3}/g).join(",")}dropRepeat(e){for(var t,a=[],i={},s=0;s<e.length;s++)i[t=e[s]]||(i[t]=!0,a+=t);return a.toString()}isChinese(e){return!/^([u4E00-u9FA5]|[uFE30-uFFA0])*$/.test(e)}str2Code(e){let t="";for(let a=0;a<e.length;a++)t+=e[a]+"="+e.charCodeAt(a)+"\n";return t}isBlank(e){return null==e||""==this.trim(e)}isNotBlank(e){return!1===this.isBlank(e)}isEmpty(e){return null==e||""==e}isNotEmpty(e){return!this.isEmpty(e)}nullToStr(e){return this.isEmpty(e)?"":e}trim(e){return null==e?"":e.toString().replace(/(^\s*)|(\s*$)|\r|\n/g,"")}equals(e,t){return e==t}equalsIgnoreCase(e,t){return String(e).toUpperCase()===String(t).toUpperCase()}split(e,t,a){if(this.isEmpty(e))return null;var i=String(e).split(t);return a?i.slice(0,a-1):i}sprintf(e){var t=arguments,a=!0,i=1;return e=e.replace(/%s/g,function(){var e=t[i++];return void 0===e?(a=!1,""):e}),a?e:""}startWith(e,t){return new RegExp("^"+t).test(e)}endWith(e,t){return new RegExp(t+"$").test(e)}},Time:new class{timeToStamp(e,t=!0){let a=Math.floor(e/3600),i=a<10?"0"+a:""+a,s=Math.floor(e%3600/60),n=s<10?"0"+s:""+s,o=Math.floor(e%60),r=o<10?"0"+o:""+o;return a<=0?(t?i+":":"")+n+":"+r:i+":"+n+":"+r}timeToStampDay(e){let t=Math.floor(e/86400),a=Math.floor(e%86400/3600),i=Math.floor(e%3600/60),s=Math.floor(e%60),n="";return t>0&&(n+=t+"天 "),n+a.toString()+":"+i+":"+s}dayDiff(e,t){var a=new Date(e),i=new Date(t);return this.dayDiff2(a,i)}dayDiff2(e,t){var a=e.getMonth()+1,i=e.getDate(),s=e.getFullYear(),n=t.getMonth()+1,o=t.getDate(),r=t.getFullYear(),h=(Date.parse(n+"/"+o+"/"+r)-Date.parse(a+"/"+i+"/"+s))/864e5;return h<0?-1:parseInt(h.toString())}timeDayDiff(e,t){var a=Math.floor((t-e)/864e5);if(!(a<0))return a}surplusTime(e,t){return t-((new Date).getTime()-e)/1e3}intervalNowTime(e){let t=0;return((new Date).getTime()-(t=e instanceof Date?e.getTime():e))/1e3}rnd(e){return(e=(9301*e+49297)%233280)/233280}seedRandom(e,t){return t||(t=(new Date).getTime()),Math.ceil(this.rnd(t)*e)}},Array:new class{map(e,t){if(null!=e)for(let a=0;a<e.length;a++)t&&t(e[a],a)}randomArray(e){if(null===e)return;let t=[-1,0,1];e.sort(function(e,a){let i=Math.round(2*Math.random()+0);return t[i]})}remove(e,t){if(null===e)return;let a=0;for(let i of e)t&&t(i)&&e.splice(a,1),a++}unique(e,t){t=t||function(e,t){return e==t};for(var a=0;a<e.length;a++)for(var i=a+1;i<e.length;i++)t(e[a],e[i])&&(e.splice(i,1),i--);return!0}},Object:new class{merge(e,t){if(e&&t)for(const a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}cloneDeep(e){let t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){t=[];for(let a=0,i=e.length;a<i;a++)t[a]=this.cloneDeep(e[a]);return t}if(e instanceof Object){t={};for(let a in e)e.hasOwnProperty(a)&&(t[a]=this.cloneDeep(e[a]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}copyObject(e){if(null===e)return null;if("object"!=typeof e)return e;if(e.constructor===Date)return new Date(e);if(e.constructor===RegExp)return new RegExp(e);var t=new e.constructor;for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];t[a]="object"==typeof i?arguments.callee(i):i}return t}copyObject2(e,t){for(var a in t=t||{},e)"object"==typeof e[a]?(t[a]=e[a].constructor===Array?[]:{},this.copyObject2(e[a],t[a])):t[a]=e[a];return t}extend(e,t){var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e,e.uber=t.prototype}},Schedule:new class{constructor(){this._onceList={},this._intervalList={}}once(e,t){let a=setTimeout(e,t);return this._onceList[a]=a,a}stopOnce(e){clearTimeout(e)}stopAllOnce(){for(let e in this._onceList)this._onceList[e]&&clearTimeout(this._onceList[e])}interval(e,t){let a=setInterval(e,t);return this._intervalList[a]=a,a}stopInterval(e){for(let e in this._intervalList)this._intervalList[e]&&clearInterval(this._intervalList[e]);this._intervalList={}}stopAllInterval(){for(let e in this._intervalList)clearInterval(this._intervalList[e]);this._intervalList={}}},LargeNum:large_number};class et{constructor(){}goldEffect(e,t=10,a=null,i=null){let s=a||Laya.stage,n=t;for(let a=0;a<t;a++){let t=new Laya.Sprite;t.loadImage("common/tips-09.png");let o,r=$e.Math.randomCircle(10);t.x=e.x+r.x,t.y=e.y+r.y,t.scale(.8,.8),s.addChild(t),o=Ne.isWX?{x:Laya.stage.width-200,y:10}:{x:20,y:90},Laya.Tween.to(t,o,500,Laya.Ease.bounceIn,Laya.Handler.create(this,()=>{t.removeSelf(),--n<=0&&i&&i()}),50*a)}}createButton(e=null,t,a){let i=e||Laya.stage,s=new Laya.Button;return s.clickHandler=a,s.stateNum=1,s.skin=t,s.anchorX=.5,s.anchorY=.5,i.addChild(s),s}static get Ins(){return this._ins||(this._ins=new et),this._ins}}class at{}at.EVENT_NAVIGATE_SUCCESS="NAVIGATE_SUCCESS",at.EVENT_NAVIGATE_FAILED="NAVIGATE_FAILED",at.EVENT_NAVIGATE_COMPLETED="NAVIGATE_COMPLETED",at.EVENT_NAVIGATE_FAILED_WX="NAVIGATE_FAILED_WX",at.SCROLL_NONE=0,at.SCROLL_VERTICAL=1,at.SCROLL_HORIZONTAL=2,at.SPE_RANK_TOP=0,at.SPE_RANK_BOTTOM=1,at.SPE_FRIEND=2,at.AD_IS_AUTOCLICK=!0,at.FULL_CLOSED1=!0,at.FULL_CLOSED2=!0;class it extends Laya.Script{constructor(){super(),this.adType=null,this.autoScroll=!1,this.scrollDir=at.SCROLL_NONE,this.dragSleep=5e3,this.scrollSpeed=1,this.waitTime=1e3,this.passedTime=0,this.inAutoScroll=!1,this.adData=[],this.iosFilterAppIds=[],this.useGamelist=[],this.sameGamelist=[],this.list=null,this.hotIds=[],this.maxNum=null,this.isDataUpdate=!1,this.touchIndex=-1,this.isRandomSelect=!1,this.changeValue=0,this.unitValue=0,this.isEnd=!1,this.isClockPendulum=!1}requestAdData(e,t,a,i,s,n,o){this.adType=e,this.autoScroll=t,this.scrollDir=a,this.iosFilterAppIds=i||[],this.maxNum=s,this.isRandomSelect=n,this.isClockPendulum=o,this.scrollDir==at.SCROLL_VERTICAL?this.list.vScrollBarSkin="":this.scrollDir==at.SCROLL_HORIZONTAL&&(this.list.hScrollBarSkin="");var r=this;Ne.sdk.isUseZS?window.zs.sdk.loadAd(function(e){r.adData=e[r.adType.toString()],r.freshAdList(),r.initHotIds(),r.scrollDir!=at.SCROLL_VERTICAL||r.isClockPendulum||(r.freshFinger(),Laya.timer.loop(3e3,r,r.freshFinger))}):r.list&&(r.adData=_e.sdk.getAdList("defaultData"),r.freshAdList(),r.initHotIds(),r.scrollDir!=at.SCROLL_VERTICAL||r.isClockPendulum||(r.freshFinger(),Laya.timer.loop(3e3,r,r.freshFinger)))}freshFinger(){let e=this.list.cells,t=[],a=this.list.scrollBar,i=a.value,s=(a.min,a.max,i),n=s+this.list.height;for(let a=0;a<e.length;a++){let i=e[a];i.y>=s&&i.y<=n-i.height&&t.push(i);let o=i.getChildByName("fingertap");o&&(o.visible=!1)}if(t.length>0){let e=t[Math.floor(Math.random()*t.length)].getChildByName("fingertap");e&&(e.visible=!0)}}freshAdList(){var e=this;if(this.adData=this.adData.filter(function(t){return Laya.Browser.onAndroid||-1==e.iosFilterAppIds.indexOf(t.appid)}),null!=this.maxNum){for(let e=0;e<this.adData.length;e++)this.adData[e].isshow=0,this.useGamelist.push(this.adData[e]);if(this.useGamelist.length<this.maxNum)for(;this.useGamelist.length<this.maxNum;)this.useGamelist.push(this.adData[Math.floor(Math.random()*this.adData.length)]);else if(this.adData.length>this.maxNum){let e=Math.floor(Math.random()*this.adData.length);this.adData[e].isshow=1;let t=this.adData[e];for(this.useGamelist.push(t);this.useGamelist.length<this.maxNum;){e=Math.floor(Math.random()*this.adData.length);let a=!1;for(let t=0;t<this.useGamelist.length;t++){if((this.adData[e].appid||this.adData[e].id)==(this.useGamelist[t].appid||this.useGamelist[t].id)){a=!0;break}}a||(t=this.adData[e],this.adData[e].isshow=1,this.useGamelist.push(t))}}}else for(let e=0;e<this.adData.length;e++){this.adData[e].isshow=0;let t=this.adData[e],a=!1;for(let i=0;i<this.useGamelist.length;i++){if((t.appid||t.id)==(this.useGamelist[i].appid||this.useGamelist[i].id)){a=!0,this.sameGamelist.push(this.adData[e]);break}}a||(this.adData[e].isshow=1,this.useGamelist.push(this.adData[e]))}this.list.array=this.useGamelist;var t=0,a=this.list.getCell(0);a&&(this.scrollDir==at.SCROLL_VERTICAL?(t=Math.ceil(this.list.array.length/this.list.repeatX),this.unitValue=(a.height+this.list.spaceY)/(t*a.height+this.list.spaceY*(t-1)-this.list.height)*this.list.scrollBar.max):this.scrollDir==at.SCROLL_HORIZONTAL&&(t=Math.ceil(this.list.array.length/this.list.repeatY),this.unitValue=(a.width+this.list.spaceX)/(t*a.width+this.list.spaceX*(t-1)-this.list.width)*this.list.scrollBar.max),this.autoScroll&&Laya.stage.frameOnce(1,this,this.startAutoScrollAd))}autoclick(){if(this.list.array.length>0){let e=Math.floor(Math.random()*this.list.array.length);this.onSelectAd(e),console.log("调用了自动跳转游戏",e)}}initHotIds(){for(var e=Math.random()<.5?3:4,t=Math.floor(this.useGamelist.length/e),a=0;a<e;a++)this.hotIds.push(Math.floor(t*Math.random())+a*t)}startAutoScrollAd(){this.list&&(this.inAutoScroll=!0)}onItemRender(e,t){var a=this.list.array[t];if(a){if(i=e.getChildByName("icon"))i.loadImage(a.app_icon||a.link_img,null);else{var i,s=e.getChildByName("iconBox");if(s)(i=s.getChildByName("icon"))&&(i.skin=a.app_icon||a.link_img)}var n=e.getChildByName("name");n&&(n.text=a.app_title||a.link_name);var o=e.getChildByName("desc");if(o&&(o.text=a.app_desc||a.link_des),1!=this.isDataUpdate){var r=e.getChildByName("titleBg");r&&(r.index=Math.floor(r.clipY*Math.random()));var h=e.getChildByName("tag");if(h)this.hotIds.indexOf(t)>0?(h.visible=!0,h.index=Math.floor(h.clipY*Math.random())):h.visible=!1;else{var l=e.getChildByName("hot"),c=e.getChildByName("new");l&&(l.visible=!1),c&&(c.visible=!1),this.hotIds.indexOf(t)>0&&(l&&c?Math.random()<.5?l.visible=!0:c.visible=!0:l&&!c?l.visible=!0:c&&!l&&(c.visible=!0))}}}else e.visible=!1}onTouchEnd(e){this.list&&this.list.array&&(this.onSelectAd(this.touchIndex),this.touchIndex=-1)}onMouseAd(e,t){e.type==Laya.Event.MOUSE_DOWN&&(this.touchIndex=t)}processGamePlayed(e,t){console.log("是否更新成功执行状态",t);let a=!1,i=[];for(let s=0;s<this.adData.length;s++){let n=this.adData[s].appid||this.adData[s].id;(e.appid||e.id)==n?1==this.adData[s].isplay?a=!0:t&&(this.adData[s].isplay=1):0==this.adData[s].isplay&&i.push(this.adData[s])}if(console.log("未运行过的游戏列表数量为:",i.length),a){if(i&&i.length>0){let e=i[Math.floor(Math.random()*i.length)];for(let a=0;a<this.adData.length;a++){let i=this.adData[a].appid||this.adData[a].id;(e.appid||e.id)==i&&t&&(this.adData[a].isplay=1)}return e}return e}return e}getNewGame(e){console.log("跳转失败的游戏",e);for(let t=0;t<this.sameGamelist.length;t++){console.log("查找可替换游戏图标的游戏",this.sameGamelist[t]);let a=this.sameGamelist[t].appid||this.sameGamelist[t].id;if((e.appid||e.id)==a){if(0==this.sameGamelist[t].isshow)return this.sameGamelist[t].isshow=1,console.log("返回相同图标游戏"),this.sameGamelist[t];console.log("找到游戏了,但已经显示过图标了")}else console.log("未找到appid相同的游戏")}return console.log("未找到图标相同游戏"),null}onSelectAd(e){if(null==e||-1==e)return;if(!this.list)return;if(!this.list.array)return;var t=this.list.array[e],a=this;a.isDataUpdate=!0;let i=this.processGamePlayed(t,!1);_e.sdk.navigateToMiniProgram(i,v.full,()=>{this.processGamePlayed(t,!0);let a=Math.floor(Math.random()*this.list.length);for(;a==e;)a=Math.floor(Math.random()*this.list.length);console.log("跳转成功,新游戏索引",a,this.list.array[a]),this.list.array[e]=this.list.array[a],this.list.array[a]=t,this.list.refresh()},()=>{let a=this.getNewGame(t);a&&(this.list.array[e]=a,this.list.refresh())},()=>{a.list.selectedIndex=-1})}params2String(e){for(var t=e[0]+"="+e[1],a=2;a<e.length;a+=2)t+="&"+e[a]+"="+e[a+1];return t}onDragStateChanged(e){this.inAutoScroll=!1,this.autoScroll&&0==e&&(this.passedTime=0)}onAwake(){this.list=this.owner,this.list.selectEnable=!0,this.list.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1),this.list.mouseHandler=Laya.Handler.create(this,this.onMouseAd,null,!1)}onEnable(){this.owner.on(Laya.Event.MOUSE_UP,this,this.onTouchEnd),this.list.on(Laya.Event.MOUSE_UP,this,this.onDragStateChanged,[0]),this.list.on(Laya.Event.MOUSE_OUT,this,this.onDragStateChanged,[0]),this.list.on(Laya.Event.MOUSE_DOWN,this,this.onDragStateChanged,[1])}onDisable(){this.owner.off(Laya.Event.MOUSE_UP,this,this.onTouchEnd),this.list.off(Laya.Event.MOUSE_UP,this,this.onDragStateChanged),this.list.off(Laya.Event.MOUSE_OUT,this,this.onDragStateChanged),this.list.off(Laya.Event.MOUSE_DOWN,this,this.onDragStateChanged)}onUpdate(){if(this.autoScroll&&1==this.inAutoScroll&&this.list&&this.list.scrollBar&&this.list.scrollBar.max){if(this.list.scrollBar.value>=this.list.scrollBar.max?(this.list.scrollBar.value=this.list.scrollBar.max,this.scrollSpeed=0-this.scrollSpeed,this.isEnd=!0):this.list.scrollBar.value<=0&&(this.list.scrollBar.value=0,this.scrollSpeed=0-this.scrollSpeed,this.isEnd=!0),this.list.scrollBar.value+=this.scrollSpeed,!this.unitValue||!this.isClockPendulum)return;this.isEnd=this.isEnd&&0!=this.changeValue,this.changeValue+=Math.abs(this.scrollSpeed),(this.changeValue>=this.unitValue||this.isEnd)&&(this.autoScroll=!1,this.isEnd=!1,this.changeValue=0,Laya.timer.once(this.waitTime,this,function(){this.autoScroll=!0}))}this.autoScroll&&0==this.inAutoScroll&&(this.passedTime+=Laya.timer.delta,this.passedTime>this.dragSleep&&this.startAutoScrollAd())}}it.FULL_CLOSED1=!0,it.FULL_CLOSED2=!0;class st extends e.commonUI.UIAdwardBoxUI{constructor(){super(),this._isRunning=!1,this._up_step=.1,this._down_step=.02,this._progress=0,this._click_time=0,this._index=0,this._callback=null,this._isHide=!1,this._isClickComplete=!1,this._isAppShow=!1,this._isClosed=!1,this._wxbannerid=1,this.bShowVideo=!1,this.height=Laya.stage.height,this.closeBtn.on(Laya.Event.MOUSE_DOWN,this,this.closeDown),this.closeBtn.on(Laya.Event.MOUSE_UP,this,this.closeUp),Ne.isQQ?(this.boxIcon.on(Laya.Event.MOUSE_DOWN,this,this.boxDown),this.boxIcon.on(Laya.Event.MOUSE_UP,this,this.boxUp),this.closeBtn.visible=!0,this.clickBtn.on(Laya.Event.MOUSE_DOWN,this,this.boxDown),this.clickBtn.on(Laya.Event.MOUSE_UP,this,this.boxUp)):Ne.isTT?(this.closeBtn.visible=!1,this.ImgTitle.skin="common/tt-08.png",this.ImgTitle.x=65,this.ImgTitle.y=190,this.Imgbgpro.y=755,this.boxIcon.y=527,this.boxBg.y=this.boxIcon.y,this.fingerImg.y=880,this.clickBtn.visible=!1,this.Btn_tt_tap.visible=!0,this.Btn_tt_tap.on(Laya.Event.CLICK,this,this.OnCrazyTap),this.Chk_tt_tap.on(Laya.Event.CLICK,this,this.OnChkTapClick)):Ne.isWX&&(this.taptip.visible=!0,this.boxBg.visible=!1,this.ImgTitle.skin="common/QQ-46.png",this.ImgTitle.x=54,this.ImgTitle.y=96,this.boxIcon.skin="common/QQ-47.png",this.boxIcon.x=361,this.boxIcon.y=465,this.Imgbgpro.skin="common/QQ-48.png",this.Imgbgpro.x=207,this.Imgbgpro.y=894,this.prossImg.skin="common/QQ-49.png",this.prossImg.x=0,this.prossImg.y=0,this.Btn_tt_tap.visible=!0,this.Btn_tt_tap.skin="common/QQ-50.png",this.Btn_tt_tap.x=186,this.Btn_tt_tap.y=Laya.stage.height-150,this.fingerImg.y=this.Btn_tt_tap.y+65,this.Btn_tt_tap.on(Laya.Event.MOUSE_DOWN,this,this.boxDown),this.Btn_tt_tap.on(Laya.Event.MOUSE_UP,this,this.boxUp))}onGameShow(){this._isAppShow||this._isClickComplete&&this.timer.once(500,this,()=>{this.complete()})}onGameHide(){this._isHide=!0,this._isClickComplete&&this.timer.clearAll(this)}startRun(){this.timerLoop(50,this,this.update),this._isRunning=!0}stop(){this.clearTimer(this,this.update),this._isRunning=!1,Laya.Tween.clearTween(this.boxIcon)}complete(){Ue.inst.setGold(100),this.getChildByName("GoldSp").getComponent(Me).updateUI();let e=this.boxIcon.x,t=this.boxIcon.y;et.Ins.goldEffect(new Laya.Vector2(e,t),10,this,()=>{this.closeView()})}onOpened(e){}closeView(){this._isClosed||(this._isClosed=!0,this.timer.clearAll(this),this.close())}goldEffect(e,t=10,a=null){let i=t;for(let s=0;s<t;s++){let t=new Laya.Sprite;t.loadImage("adwardbox/1-03.png");let n,o=$e.Math.randomCircle(10);t.x=e.x+o.x,t.y=e.y+o.y,t.scale(.8,.8),this.addChild(t),n=Ne.isWX?{x:Laya.stage.width-200,y:10}:{x:20,y:90},Laya.Tween.to(t,n,500,Laya.Ease.bounceIn,Laya.Handler.create(this,()=>{t.removeSelf(),--i<=0&&a&&a()}),50*s)}}closeDown(e){e.stopPropagation(),this.closeView()}closeUp(e){e.stopPropagation()}boxDown(e){e.stopPropagation(),this._progress+=this._up_step,this._progress>1&&(this._progress=1),this._isRunning||this.fresh(),this._click_time=(new Date).getTime()}boxUp(e){e.stopPropagation()}update(){this.fresh(),(new Date).getTime()-this._click_time>=100&&(this._progress-=this._down_step,(this._progress<0||isNaN(this._progress))&&(this._progress=0)),this._index%2==0&&(this.fingerImg.skin="common/game-119.png"==this.fingerImg.skin?"common/game-120.png":"common/game-119.png"),this._progress>=.85&&(this.stop(),Ne.isWX&&Ne.sdk.showBannerzs(this._wxbannerid),this._isClickComplete=!0,Ne.isQQ&&(this.boxIcon.skin="common/QQ-03.png"),Laya.timer.once(1500,this,()=>{this.complete()})),this._index++}fresh(){this.prossImg.scaleX=this._progress}shake(){Laya.Tween.to(this.boxIcon,{rotation:30},50,null,new Laya.Handler(this,()=>{Laya.Tween.to(this.boxIcon,{rotation:-30},100,null,new Laya.Handler(this,()=>{Laya.Tween.to(this.boxIcon,{rotation:0},50,null,new Laya.Handler(this,()=>{this.shake()}))}))}),1e3)}onShow(){this._isAppShow}onHide(){}InitHorGames(){let e=this.getChildByName("exportList1");if(e&&(e.visible=!0,!e.getChildAt(0).getComponent(it))){e.getChildAt(0).addComponent(it).requestAdData("endPage",!0,at.SCROLL_HORIZONTAL,null,null,!1,!0)}}onEnable(){Ne.isQQ?(Ne.sdk.hide_banner(),this.startRun()):Ne.isTT?this._down_step=0:Ne.isWX&&(this._wxbannerid=Math.floor(2*Math.random()+1),console.log("随机得到的bannerid为:",this._wxbannerid),Ne.sdk.hideBannerzs(this._wxbannerid),this.getChildByName("GoldSp").y=10,this.getChildByName("GoldSp").x=Laya.stage.width-200,this.InitHorGames(),this.startRun()),this._progress=0,this._click_time=0;let e=Ne.isQQ;this.closeBtn.visible=e,this.tipImg.visible=e,this.shake(),this._isClickComplete=!1,this._isHide=!1,this._isAppShow=!1,this._isClosed=!1}onDisable(){this.stop(),Laya.stage.event("QQ_CLICK_BOX")}OnCrazyTap(){let e=this;if("common/tt-09.png"==e.Btn_tt_tap.skin)e._progress+=e._up_step,e._progress>=.9&&(e.Btn_tt_tap.skin="common/tt-10.png",e.boxIcon.skin="common/QQ-03.png",e.Chk_tt_tap.visible=!0,e._progress=.99),e.prossImg.scaleX=e._progress;else if("common/tt-12.png"==this.Chk_tt_tap.skin){if(!e.bShowVideo){e.bShowVideo=!0;let t=this.boxIcon.x,a=this.boxIcon.y;Ae.getInstacne().ShowRewardVideo((e,i)=>{i?(Ue.inst.setGold(100),this.getChildByName("GoldSp").getComponent(Me).updateUI(),et.Ins.goldEffect(new Laya.Vector2(t,a),10,this,()=>{this.close()})):We.Ins.showMsgTip("观看完整视频才能获得金币")},null,this)}}else this.close()}OnChkTapClick(){"common/tt-12.png"==this.Chk_tt_tap.skin?this.Chk_tt_tap.skin="common/tt-11.png":this.Chk_tt_tap.skin="common/tt-12.png"}}class nt extends e.commonUI.UISelectBoxUI{constructor(){super(),this.box_golds=[25,50,75,100,125,150,175,200,300],this.openedBoxs=[0,0,0,0,0,0,0,0,0],this.box_open_count=0,this.cur_open_count=0,this._callBack=null,this._sumGold=0,this.height=Laya.stage.height,this.bg.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#23a8ea"),this.PlatformUIInit()}onOpened(e){e&&(this._callBack=e.callback),console.log("打开选着盒子",e)}onAwake(){}onEnable(){$e.Array.randomArray(this.box_golds),this.threeBtn.clickHandler=new Laya.Handler(this,this.onThree),this.closeBtn.clickHandler=Laya.Handler.create(this,this.closeView),this.backBtn.clickHandler=Laya.Handler.create(this,this.closeView);let e=this.main.getChildByName("boxs");for(let t=1;t<=9;t++){e.getChildByName("item"+t).clickHandler=new Laya.Handler(this,this.onItem,[t])}this.box_open_count=0,this.cur_open_count=0,this.threeBtn.visible=!1,this.closeBtn.visible=!1}onItem(e){if(this.cur_open_count>=3||1==this.openedBoxs[e-1])return;let t=this.boxs.getChildByName(`item${e}`);t.getChildByName("box").visible=!1;let a=()=>{let e=new Laya.Image;e.skin="prefab/home-12.png",e.x=t.width/2-e.width/2,e.y=25;let a=new Laya.Label(`+ ${this.box_golds[this.box_open_count]}`);this._sumGold+=this.box_golds[this.box_open_count],a.color="#ffffff",a.fontSize=35,a.x=t.width/2-a.width/2,a.y=102.5,t.addChild(e),t.addChild(a)};if(8==this.box_open_count){this.getRare().length>0?t.skin="box/tips-21.png":(a(),this.timer.once(2e3,this,()=>{this.closeView()}))}else a();this.openedBoxs[e-1]=1,this.box_open_count++,this.cur_open_count++,3==this.cur_open_count&&(this.threeBtn.visible=!0,this.closeBtn.visible=!0)}getRare(){return[]}onThree(){Ae.getInstacne().ShowRewardVideo((e,t)=>{t?(this._sumGold=3*this._sumGold,this.closeView()):We.Ins.showMsgTip("请观看完整视频后才能获得奖励")},null,this)}closeView(){Ue.inst.setGold(this._sumGold),be.Ins.event("changeGold"),this._callBack&&this._callBack(),this.close()}PlatformUIInit(){Le.largeScreen()&&(this.main.y+=120),Ne.isWX&&Ne.sdk.isUseZS&&(this.getChildByName("GoldSp").y=10)}}class ot extends ke{constructor(){super(),this._signed=!1}getData(){this.init({name:"game-singed"}),this._data.time=this._data.time||0,this._data.day=this._data.day||0,this.dayDiff(new Date(this._data.time),new Date)>0?(this._data.day>=7&&(this._data.day=0),this._signed=!1):this._signed=!0,this.save()}static get inst(){return null==this._instance&&(this._instance=new ot),this._instance}get isSigned(){return this._signed}get signDay(){return this._data.day}get signTime(){return this._data.time}sign(){this._signed||(this._data.day++,this._data.time=(new Date).getTime(),this._signed=!0,this.save())}}ot._instance=null;const rt=[100,150,200,300,400,500,600];class ht extends e.commonUI.UISignUI{constructor(){super(),this.rareCream=null,this.height=Laya.stage.height,this.bg.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#23a8ea"),ht.onSignDay(),this.PlatformUIInit()}onEnable(){ot.inst.sign(),Ae.getInstacne().ShowInter(!1)}static setMainSceneProped(){ht.signData.prop=1,ht.saveSign(),ht.mianPoped=!0}static get mainProped(){return ht.mianPoped}static onSignDay(){if(ht.signData)return ht.isSigned;if(null==ht.signData){ht.signData={signTime:0,signDay:0,prop:0};let e=Laya.LocalStorage.getItem("sign_time"),t=Laya.LocalStorage.getItem("sign_day");e&&""!=e&&(ht.signData.signTime=parseInt(e)),t&&""!=t&&(ht.signData.signDay=parseInt(t))}let e=$e.Time.dayDiff(ht.signData.signTime,(new Date).getTime()),t=ht.signData.signDay;return e>0?(t>=7&&(ht.signData.signDay=0),ht.isSigned=!1):ht.isSigned=!0,ht.isSigned}static saveSign(){Laya.LocalStorage.setItem("sign_time",`${ht.signData.signTime}`),Laya.LocalStorage.setItem("sign_day",`${ht.signData.signDay}`)}onAwake(){this.getMoreBtn.clickHandler=new Laya.Handler(this,this.ongetMore),this.getBtn.clickHandler=new Laya.Handler(this,this.onGet),this.closeBtn.clickHandler=new Laya.Handler(this,this.closeView),ht.isSigned&&this.updateSigned();for(let e=0;e<7;e++)this.setSignedItem(e+1);this.adjustLargeUI()}onDisable(){Ae.getInstacne().ShowBanner()}updateSigned(){this.getMoreBtn.visible=!1,this.getBtn.visible=!1;let e=new Laya.Image("common/tips-25.png");e.anchorX=.5,e.anchorY=.5,e.name="sign-day-1",e.x=Laya.stage.width/2,e.y=this.frame.y+this.frame.height+2*e.height,this.addChild(e)}setSignedItem(e){let t=this.frame.getChildByName(`item${e}`);if(ht.signData.signDay>=e){if(t.getChildByName("daybg").getChildByName("day").text="已签到",e<7){t.getChildByName("goldIcon").visible=!1}t.getChildByName("gold").visible=!1;let a=new Laya.Image("common/tips-10.png");a.x=7!=e?t.width/2-a.width/2:196,a.y=25,t.addChild(a)}else if(e<7){t.getChildByName("gold").text=`${rt[e-1]}`}}signAdward(e=1){if(ht.signData.signDay++,ht.signData.signTime=(new Date).getTime(),ht.saveSign(),ht.signData.signDay<=6){let t=this.frame.getChildByName(`item${ht.signData.signDay}`),a=e*rt[ht.signData.signDay-1];Ue.inst.setGold(a),et.Ins.goldEffect(new Laya.Vector2(t.x+this.frame.x+t.width/2,t.y+this.frame.y+t.height/2),10,this)}else{let t=this.frame.getChildByName("item7").getChildByName("iconbg"),a=t.getChildByName("icon");t.skin="common/tips-11.png",a.skin="common/home-12.png";let i=this.frame.getChildByName(`item${ht.signData.signDay}`),s=e*rt[ht.signData.signDay-1];Ue.inst.setGold(s),et.Ins.goldEffect(new Laya.Vector2(i.x+this.frame.x+i.width/2,i.y+this.frame.y+i.height/2),10,this)}be.Ins.event("changeGold"),ht.isSigned=!0,this.setSignedItem(ht.signData.signDay),this.updateSigned(),this.timer.once(2e3,this,()=>{this.closeView()})}goldEffect(e,t=10,a=null){let i=t;for(let s=0;s<t;s++){let t=new Laya.Sprite;t.loadImage("common/home-12.png");let n=$e.Math.randomCircle(10);t.x=e.x+n.x,t.y=e.y+n.y,t.scale(.8,.8),this.addChild(t),Laya.Tween.to(t,{x:20,y:90},500,Laya.Ease.bounceIn,Laya.Handler.create(this,()=>{t.removeSelf(),--i<=0&&a&&a()}),50*s)}}ongetMore(){Ae.getInstacne().ShowRewardVideo((e,t)=>{t?this.signAdward(5):We.Ins.showMsgTip("观看完整视频才能获得金币")},null,this)}onGet(){this.signAdward()}closeView(){Fe.bBtnClicked=!1,this.timer.clearAll(this),this.close()}adjustLargeUI(){let e=[];if(Le.largeScreen()){e.push(this.getChildByName("closeBtn")),e.push(this.getChildByName("goldinfo")),e.push(this.getChildByName("title")),e.push(this.getChildByName("frame")),e.push(this.getChildByName("getMoreBtn")),e.push(this.getChildByName("getBtn"));let t=this.getChildByName("sign-day-1");t&&(t.y+=120);for(let t=0;t<e.length;t++)e[t]&&(e[t].y+=120)}}PlatformUIInit(){Ne.isWX&&(this.getChildByName("GoldSp").y=10)}}ht.signData=null,ht.isSigned=!1,ht.mianPoped=!1;class lt extends e.commonUI.UnlockNewDialogUI{constructor(){super(),this.rareGateId=0,this.type=0,this.height=Laya.stage.height}onEnable(){this.unlockBtn.on(Laya.Event.CLICK,this,this.onUnLock),this.closeBtn.on(Laya.Event.CLICK,this,this.onCloseClick),this.bg.on(Laya.Event.CLICK,this,this.onCloseClick),this.ani1.play(),this.updateUnlockUI(),this.updateLockData(),Laya.timer.once(2e3,this,function(){this&&(this.ani1.stop(),this.close())})}onOpened(e){console.log("UnlockRareNewDialog",e),e&&(this.type=e.type,this.rareGateId=e.id)}onCloseClick(e){this.ani1.stop(),this.close(),e.stopPropagation()}onUnLock(e){console.log("onUnLock",this.rareGateId),this.close(),2==this.type?be.Ins.event("cut",this.rareGateId):3==this.type&&be.Ins.event("cut",this.rareGateId),e.stopPropagation()}updateUnlockUI(){Fe._curData.UnlockLV;for(var e=1;e<4;e++){var t=Fe._curData.UnlockState[e-1],a=Fe._curData.UnlockIndex[e-1];1==e?this.lockImg1.skin="res/image/item/"+t+"_"+a+".png":2==e?this.lockImg2.skin="res/image/item/"+t+"_"+a+".png":this.lockImg3.skin="res/image/item/"+t+"_"+a+".png"}}updateLockData(){var e=Fe._curData.UnlockLV;if(Fe.nCurScene<=Fe.nTotalScene&&Fe.nCurScene>=e){for(var t=0;t<3;t++){var a=Fe._curData.UnlockState[t],i=Fe._curData.UnlockIndex[t];Fe.tUnlockData[a][i-1]=1}Laya.LocalStorage.setJSON("UnlockData",Fe.tUnlockData)}}onDestroy(){}}class ct extends Laya.Script{constructor(){super()}onAwake(){super.onAwake(),this.owner.height=Laya.stage.height;var e,t=this.owner.getChildByName("topUI");t&&(e=t.getChildByName("adList"),this.closeBtn=t.getChildByName("closeBtn")),this.middleUI=this.owner.getChildByName("middleUI"),this.middleUI&&(e=e||this.middleUI.getChildByName("adList"),this.closeBtn=this.closeBtn||this.middleUI.getChildByName("closeBtn")),this.closeBtn=this.closeBtn||this.owner.getChildByName("closeBtn"),this.adList=e.addComponent(it),this.closeBtn.on(Laya.Event.CLICK,this,this.closeView)}onDestroy(){this.closeBtn.off(Laya.Event.CLICK,this,this.closeView)}onStart(){this.adList.requestAdData("endPage",!1,at.SCROLL_NONE,null,9,!1,!1)}onEnable(){}closeView(){qe.Ins.sceneClose(this.owner.url)}}class dt extends Laya.Script{constructor(){super()}onEnable(){Laya.timer.loop(100,this,this.start)}start(){let e=this.owner;"common/fingerup.png"==e.skin?e.skin="common/fingerdown.png":"common/fingerdown.png"==e.skin&&(e.skin="common/fingerup.png")}onDisable(){Laya.timer.clearAll(this)}}class gt extends Laya.Script{constructor(){super()}onAwake(){this.owner.mouseEnabled=!0}onClick(){this.owner.mouseEnabled=!1,qe.Ins.sceneOpen(xe.fullAd,!1),this.owner.mouseEnabled=!0}}class ut extends Laya.Script{constructor(){super(),this.headAdList=null,this.mainAdList=null,this.continueBtn=null,this.fakeExitBtn=null,this.firstClick=!1}onAwake(){super.onAwake();var e,t,a=this.owner.getChildByName("topUI");a&&(e=a.getChildByName("headAdList"),t=a.getChildByName("mainAdList"),this.continueBtn=a.getChildByName("continueBtn"),this.fakeExitBtn=a.getChildByName("fakeExitBtn"));var i=this.owner.getChildByName("middleUI");i&&(e=e||i.getChildByName("headAdList"),t=t||i.getChildByName("mainAdList"),this.continueBtn=this.continueBtn||i.getChildByName("continueBtn"),this.fakeExitBtn=this.fakeExitBtn||i.getChildByName("fakeExitBtn")),e&&(this.headAdList=e.addComponent(it)),t&&(this.mainAdList=t.addComponent(it)),this.fakeExitBtn&&this.fakeExitBtn.on(Laya.Event.CLICK,this,this.onOpenListAd),this.continueBtn&&this.continueBtn.on(Laya.Event.CLICK,this,this.onContinue)}onDestroy(){this.fakeExitBtn&&this.fakeExitBtn.off(Laya.Event.CLICK,this,this.onOpenListAd),this.continueBtn&&this.continueBtn.off(Laya.Event.CLICK,this,this.onContinue)}onEnable(){super.onEnable(),Ne.sdk.hideBannerzs(h.SCREEN_NONE);var e=this.owner;e.top=0,e.bottom=0,e.left=0,e.right=0;var t=this.owner.getChildByName("topUI"),a=this.owner.getChildByName("middleUI"),i=this.owner.getChildByName("bottomUI"),s=this.owner.getChildByName("fullUI");t&&(t.top=0,t.centerX=0),a&&(a.centerY=0,a.centerX=0),i&&(i.bottom=0,i.centerX=0),s&&(s.top=-10,s.bottom=-10,s.left=-10,s.right=-10),this.initFakeExitBtn()}initFakeExitBtn(){let e=this.owner.getChildByName("exitBtn");e&&(e.visible=!0,e.getComponent(gt)||e.addComponent(gt))}onStart(){super.onStart();this.headAdList&&this.headAdList.requestAdData("endPage",!0,at.SCROLL_HORIZONTAL,null),this.mainAdList&&Laya.timer.once(5,this,()=>{this.mainAdList.requestAdData("endPage",!0,at.SCROLL_VERTICAL,null,null,!1,!1)})}onContinue(){this.closeView()}closeView(){this.owner.url!=xe.fullAd?Laya.stage.event("FULL_SCREEN_AD_CLOSE"):Laya.stage.event("FULL_SCREEN_AD2_CLOSE"),qe.Ins.sceneClose(this.owner.url)}onOpenListAd(){this.owner.url!=xe.fullAd&&qe.Ins.sceneOpen(xe.fullAd,!1)}}class St extends e.commonUI.zs.MoneyGetUI{constructor(){super(),this.showData=[],this.showIndex=-1,this.height=Laya.stage.height,this.closeEffect=null,this.popupEffect=null}onEnable(){this.btn_Giveup.on(Laya.Event.CLICK,this,this.onGiveupClick),this.btn_Get.on(Laya.Event.CLICK,this,this.onGetClick),this.LoadGame()}onGiveupClick(){Laya.stage.once("FULL_SCREEN_AD_CLOSE",this,function(){Ne.sdk.showBannerzs(h.SCREEN_START)}),qe.Ins.sceneOpen(xe.screenAd,!1),qe.Ins.sceneClose(this.url)}onGetClick(){_e.sdk.navigateToMiniProgram(this.showData[this.showIndex],v.more,()=>{},()=>{},()=>{}),qe.Ins.sceneClose(this.url)}LoadGame(){let e=this;window.zs.sdk.loadAd(function(t){e.showData=[];for(var a=0;a<t.endPage.length;a++)e.showData.push(t.endPage[a]);e.showIndex=Math.floor(Math.random()*e.showData.length),e.lbl_GameName.text=e.showData[e.showIndex].app_title,e.img_Game.skin=e.showData[e.showIndex].app_icon,e.lbl_TipGameName.text=`进入${e.showData[e.showIndex].app_title}领取红包`})}}class mt extends Laya.Script{constructor(){super()}onEnable(){this.isPlaying=!0,this.start()}start(){let e=1,t=this.owner;1==t.scaleX?e=.9:.9==t.scaleX?e=1:.6==t.scaleX?e=.7:.7==t.scaleX&&(e=.6),Laya.Tween.to(this.owner,{scaleX:e,scaleY:e},500,null,new Laya.Handler(this,()=>{this.isPlaying&&this.start()}))}onDisable(){this.isPlaying=!1,Laya.Tween.clearTween(this.owner)}}class It extends e.gameUI.GameMainUI{constructor(){super(),this.height=Laya.stage.height}onAwake(){}onMouseDown(){}onEnable(){this.btnMoreGame.on(Laya.Event.CLICK,this,this.onClickMoreGame),this.btnResetGame.on(Laya.Event.CLICK,this,this.onResetGame),this.btnWin.on(Laya.Event.CLICK,this,this.onWin),this.btnFail.on(Laya.Event.CLICK,this,this.onFail),this.onEnableADControl(),this.PlatformUIInit()}onOpened(){}onDisable(){}onFail(){Ne.isTT&&Ne.sdk.stopRecording(),this.Next(!1)}onWin(){this.Next(!0)}onCloseFullAd(e){this.Next(e)}Next(e){this.close()}onResetGame(){Ne.isTT&&Ne.sdk.stopRecording(),this.close(),Laya.Scene.open(xe.GameStartView)}onClickMoreGame(e){if(e.type==Laya.Event.CLICK)if(Ne.isTT){let e=_e.sdk.getAdList("defaultData");Ne.sdk.showMoreGamesModal(e&&e.length>0?e[0]:[],null,null,null,e=>{1==e&&We.Ins.showMsgTip("打开更多游戏失败",this)})}else Ne.isQQ?Ne.sdk.showAppBoxAd():Ne.isWX?Laya.Scene.open(xe.floatAd,!1,{isCloseBanner:!1}):Laya.Scene.open("commonUI/MoreGameDialog.scene",!1,{isCloseBanner:!1});e.stopPropagation()}OnShow(){}onDestroy(){}onEnableADControl(){Ae.getInstacne().ShowBanner()}PlatformUIInit(){}}class vt extends Laya.Script{constructor(){super(),this.isClick=!1,this.showData=[],this.unShowData=[],this.showNum=0}onAwake(){this.owner.height=Laya.stage.height,this.owner.x=-720;this.owner.getChildByName("ImgListBg"),this.owner.getChildByName("adList"),this.owner.getChildByName("btnclose")}onEnable(){this.owner.getChildByName("btnclose").on(Laya.Event.CLICK,this,this.onClose)}tweenshow(e){let t=this.owner.getChildByName("ImgListBg");t.y=e-520-52,this.owner.getChildByName("adList").y=t.y+10;let a=this.owner.getChildByName("btnclose");a.index=0,a.y=e-52,Laya.Tween.to(this.owner,{x:0},500,null,Laya.Handler.create(this,()=>{a.index=1}),0)}onClose(){Laya.Tween.to(this.owner,{x:-620},500,null,Laya.Handler.create(this,()=>{this.owner.visible=!1,be.Ins.event(Oe.EVENT_SHOW_EXPORTGAME)}),0)}}class pt extends Laya.Script{constructor(){super(),this.intType=1e3,this.numType=1e3,this.strType="hello laya",this.boolType=!0,this.elect_list=null,this._curIdx=0}onEnable(){let e=this;e.InitData(),e.owner.on(Laya.Event.CLICK,e,t=>{_e.sdk.navigateToMiniProgram(e.getData(),v.rotation)})}InitData(){let e=this;this.elect_list&&0!=this.elect_list.length||(Ne.sdk.isUseZS?window.zs.sdk.loadAd(function(t){e.elect_list=t.endPage,e.elect_list&&0!=e.elect_list.length?(e.UpdateGame(),e.owner.visible=!0,Laya.timer.loop(3e3,e,e.itemShake)):e.owner.visible=!1}):(this.elect_list=_e.sdk.getAdList("defaultData"),this.elect_list&&0!=this.elect_list.length?(this.UpdateGame(),this.owner.visible=!0,Laya.timer.loop(3e3,this,this.itemShake)):this.owner.visible=!1))}getData(){return this.elect_list&&0!=this.elect_list.length?this.elect_list[this._curIdx%this.elect_list.length]:null}UpdateGame(){this._curIdx=Math.floor(Math.random()*this.elect_list.length);let e=this.getData();e&&(this.owner.getChildByName("icon").skin=e.link_img||e.app_icon,this.owner.getChildByName("nameTxt").text=e.link_name||e.app_title)}itemShake(){Laya.Tween.to(this.owner,{rotation:10},300,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.owner,{rotation:0},300,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.owner,{rotation:-10},300,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.owner,{rotation:0},300,null,Laya.Handler.create(this,()=>{this.UpdateGame()}))}))}))}))}onDisable(){}}class yt extends e.gameUI.GameStartViewUI{constructor(){super(),this._gameScene=je.getInstance(),this.isShowAppBox=!1,this.height=Laya.stage.height,this.touch.height=Laya.stage.height}onAwake(){this.isShowAppBox||(Ae.getInstacne().ShowAppBox(1),this.isShowAppBox=!0)}onMouseDown(){}onEnable(){this.btnPlayer.on(Laya.Event.MOUSE_DOWN,this,this.onClickPlayer),this.touch.on(Laya.Event.MOUSE_DOWN,this,function(){}),this.btnSetting.on(Laya.Event.CLICK,this,this.onClickSetting),this.btnShop.name="1",this.btnShop.on(Laya.Event.CLICK,this,this.onClickShop),this.btnMoreGame.on(Laya.Event.CLICK,this,this.onClickMoreGame),this.btnSign.on(Laya.Event.CLICK,this,this.onClickSign),this.btnDesk.on(Laya.Event.CLICK,this,this.onDesk),this.taskimg.on(Laya.Event.CLICK,this,this.onClickTaskimg),this.btnPopGame.on(Laya.Event.CLICK,this,this.onPopGameClick),this.btnPopGame.on(Laya.Event.MOUSE_DOWN,this,this.onPopMouseDown),this.btnPopGame.on(Laya.Event.MOUSE_UP,this,this.onPopMouseUp),this.btnShop.visible=!0,this.txtCoins.text=Fe.nTotalCoins.toString(),be.Ins.event("changeGold"),this.imgT1.on(Laya.Event.CLICK,this,this.onClickShop),this.imgT1.name="1",this.imgT2.on(Laya.Event.CLICK,this,this.onClickShop),this.imgT2.name="2",this.imgT3.on(Laya.Event.CLICK,this,this.onClickShop),this.imgT3.name="3";let e="res/image/item/1-"+Fe.nCurScene+".png";this.taskimg.skin=e,Laya.timer.once(1e3,this,function(){Fe.bStart&&(this.taskbg.visible=!0,this.ani1.play(0,!0))}),this.textLevel.text="第"+Fe.nShowScene.toString()+"关",this.showToolUI(),be.Ins.on("ShowToolUI",this,this.showToolUI),this.unlockBg.visible=!1,this.onEnableADControl()}onDisable(){}onDesk(e){e.type==Laya.Event.CLICK&&Ne.sdk.installShortcut(e=>{e||We.Ins.showMsgTip("桌面图标已添加")},e=>{We.Ins.showMsgTip("桌面图标添加失败")},()=>{}),e.stopPropagation()}onClickPlayer(e){this.close(),Ne.isWX?this._gameScene.initMainLayer():(Fe.nTryuseScene=Fe.getUseLevel(),Laya.Scene.open(xe.UseDialog,!1),Fe.nTryUseCount++,Laya.LocalStorage.setItem("TryCount",Fe.nTryUseCount.toString()))}onClickTaskimg(e){e.stopPropagation()}onClickShop(e){e.type!=Laya.Event.CLICK||Fe.bBtnClicked||(Fe.bBtnClicked=!0,Fe.nShopTab=Number(e.target.name),Laya.Scene.open("gameUI/ShopView.scene",!1)),e.stopPropagation()}onClickMoreGame(e){if(e.type==Laya.Event.CLICK)if(Ne.isTT){let e=_e.sdk.getAdList("defaultData");Ne.sdk.showMoreGamesModal(e&&e.length>0?e[0]:[],null,null,null,e=>{1==e&&We.Ins.showMsgTip("打开更多游戏失败",this)})}else Ne.isQQ?Ne.sdk.showAppBoxAd():Ne.isWX?Laya.Scene.open(xe.floatAd,!1,{isCloseBanner:!1}):Laya.Scene.open("commonUI/MoreGameDialog.scene",!1,{isCloseBanner:!1});e.stopPropagation()}onClickSetting(e){e.type==Laya.Event.CLICK&&Laya.Scene.open("commonUI/SettingDialog.scene",!1),e.stopPropagation()}onClickSign(e){e.type!=Laya.Event.CLICK||Fe.bBtnClicked||(Fe.bBtnClicked=!0,Laya.Scene.open("commonUI/UISign.scene",!1)),e.stopPropagation()}onPopMouseDown(){this.btnPopGame.scaleX=.9,this.btnPopGame.scaleY=.9}onPopMouseUp(){this.btnPopGame.scaleX=1,this.btnPopGame.scaleY=1}onPopGameClick(e=null){this.btnPopGame.visible=!1;let t=this.getChildByName("exportList2");if(t.visible=!0,t.getComponent(vt)||t.addComponent(vt),t.getComponent(vt).tweenshow(this.btnPopGame.y),!t.getChildByName("adList").getComponent(it)){t.getChildByName("adList").addComponent(it).requestAdData("endPage",!0,at.SCROLL_VERTICAL,null,null,!1,!0)}e&&e.stopPropagation()}showExportGame(){this.btnPopGame.visible=!0}OnShow(){}onDestroy(){}onEnableADControl(){Ae.getInstacne().ShowBanner()}PlatformUIInit(){if(Ne.isOP&&(this.btnDesk.visible=!0,this.btnMoreGame.visible=!0,this.btnShop.visible=!0,this.btnSetting.y=80),Ne.isTT&&(this.btnPopGame.visible=!1,this.btnDesk.visible=!1,this.btnMoreGame.visible=!0,this.btnShop.visible=!0,this.btnSetting.x=20,this.btnSetting.y=90),Ne.isQQ?(this.btnDesk.visible=!1,this.btnMoreGame.visible=!0,this.btnShop.visible=!0,this.btnSetting.y=0,this.btnSetting.bottom=463):Ne.isWX&&(this.btnDesk.visible=!1,this.btnMoreGame.visible=!0,this.btnShop.visible=!0,this.getChildByName("GoldSp").y=10,this.getChildByName("GoldSp").x=Laya.stage.width-200,this.taskbg.y=460,this.level.y=408),Ne.isWX){Laya.stage.on(at.EVENT_NAVIGATE_FAILED,this,this.onShowFullListAd);let e=this.getChildByName("exportList1"),t=this.getChildByName("exitBtn");if(e.visible=!0,t.visible=!0,!e.getChildAt(0).getComponent(it)){e.getChildAt(0).addComponent(it).requestAdData("endPage",!0,at.SCROLL_HORIZONTAL,null,null,!1,!0)}t.getComponent(gt)||t.addComponent(gt),be.Ins.on(Oe.EVENT_SHOW_EXPORTGAME,this,this.showExportGame),this.btnPopGame.visible=!0;let a=Ue.inst.get("login",{}).loginCount||0;console.log("登录次数",a),this.InitFloatGame()}}InitFloatGame(){let e=this.getChildByName("fgame1");e&&(e.getComponent(pt)||e.addComponent(pt))}onShowFullListAd(){qe.Ins.sceneOpen(xe.screenAd,!1,null)}onOpened(){if(Ne.isOP){_e.sdk.getAdList("defaultData").length?this.btnMoreGame.visible=!0:this.btnMoreGame.visible=!1}}showToolUI(){for(var e=1;e<4;e++){Fe.shopSelect[e];for(var t=1;t<7;t++){1==Fe.shopTools[e][t-1]&&(1==e?this.imgT1.skin="res/image/shop/1_"+t+".png":2==e?this.imgT2.skin="res/image/shop/2_"+t+".png":this.imgT3.skin="res/image/shop/3_"+t+".png")}}}updateUnlockUI(){var e=Fe._curData.UnlockLV;this.unlockBg.visible=!0,this.lockText.text="第"+e+"关可解锁";for(var t=1;t<4;t++){var a=Fe._curData.UnlockState[t-1],i=Fe._curData.UnlockIndex[t-1];1==t?this.lockImg1.skin="res/image/item/"+a+"_"+i+".png":2==t?this.lockImg2.skin="res/image/item/"+a+"_"+i+".png":this.lockImg3.skin="res/image/item/"+a+"_"+i+".png"}}}class wt{constructor(){}static get Ins(){return this._ins||(this._ins=new wt),this._ins}init(e,t){console.log("SceneMgr init");let a=this;Laya.loader.create(a.getResource(),Laya.Handler.create(this,function(){console.log("游戏场景加载完成"),a.initScene(),e&&e()}),Laya.Handler.create(this,function(e){t&&t(e)},null,!1))}initScene(){let e=Laya.loader.getRes(Pe.game);this.gameScene=e,Laya.stage.addChild(this.gameScene),Laya.stage.setChildIndex(this.gameScene,0)}getResource(){return[Pe.game,"res/level/leveldata.json"]}loadRes(e,t,a){Laya.loader.create(e,Laya.Handler.create(t,a))}getRes(e){return Laya.loader.getRes(e)}}class Ct{constructor(){}static get Ins(){return this._ins||(this._ins=new Ct),this._ins}init(){console.log("MyOppoAD:GameMgr init"),je.getInstance().onLoadedComplete(wt.Ins.gameScene),Ue.inst.getData(),_e.init(),Ee.inst.playMusic(Ge.bgm,0),Ne.isOP&&Ne.sdk.reportMonitor(),be.Ins.on(Oe.EVENT_BG_TO_GAME,this,this.Bgtogame),be.Ins.on(Oe.EVENT_GAME_TO_BG,this,this.Gametobg)}Bgtogame(){console.log("从后台返回游戏,播放音乐"),Ee.inst.playMusic(Ge.bgm),Laya.timer.once(2e3,this,()=>{Ee.inst.playMusic(Ge.bgm)})}Gametobg(){console.log("从游戏切换到后台,停止音乐")}}class At extends e.gameUI.LoadSceneViewUI{constructor(){super(),this.checkLoadFinishCount=0,this.maxProgress=0,this.height=Laya.stage.height,this.bg.height=Laya.stage.height,this.graphics.drawRect(-400,-600,1500,2600,"#23a8ea")}onAwake(){}checkOnLine(){if(!navigator.onLine){let e=Laya.stage.width/2,t=Laya.stage.height-200;We.Ins.showMsgTip("断网状态下，会影响游戏体验哦~",Laya.stage,e,t,{color:"#fff",strokeColor:"#fff",fontSize:33,width:500,stroke:0,font:"Microsoft YaHei"},0)}}onEnable(){this.checkOnLine(),Ne.init();let e=["res1","res2","res3","res4","res5","res6"],t=e.length/10;t>.5&&(t=.5);let a=t/e.length,i=0,s=this;Ne.sdk.loadSubpackage(e,()=>{wt.Ins.init(()=>{Ct.Ins.init(),this.close()},e=>{s.setProgress(t+e*(1-t))})},e=>{i++,s.setProgress(a*i)})}setProgress(e){e>this.maxProgress&&(this.maxProgress=e,this.progressBar.width=400*e)}onDisable(){}onDestroy(){}}class _t extends e.gameUI.MainLayerUI{constructor(){super(),this._gameScene=je.getInstance(),this.curTouchId=-1,this.originPiont=new Laya.Vector2(0,0),this.deltaX=0,this.deltaY=0,this._curIndex=0,this.angle=0,this.touchDownTime=0,this.controlX=0,this.controlY=0,this.blookedVideo=!1,this.bwillopenresult=!1,this.height=Laya.stage.height,this.imgBg.height=Laya.stage.height,this.imgBg.on(Laya.Event.MOUSE_DOWN,this,this.onTouchDown),this.imgBg.on(Laya.Event.MOUSE_MOVE,this,this.onMoveEvent),this.imgBg.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.imgBg.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp),this.btnPopGame.on(Laya.Event.CLICK,this,this.onPopGameClick),this.btnPopGame.on(Laya.Event.MOUSE_DOWN,this,this.onPopMouseDown),this.btnPopGame.on(Laya.Event.MOUSE_UP,this,this.onPopMouseUp),this.imgHand.visible=!1,this.imgRing.visible=!1,this.btnReset.on(Laya.Event.CLICK,this,function(){Ne.isWX?Ae.getInstacne().ShowRewardVideo((e,t)=>{t?Fe.bStart&&!Fe.bPlayerMove&&(Fe.bStart=!1,Fe.bClickReset=!0,this._gameScene.mainLayer&&(this._gameScene.mainLayer.destroy(),this._gameScene.mainLayer=null),this._gameScene.removeNode(),this._gameScene.nextGame(!1)):We.Ins.showMsgTip("观看完整视频才能重新开始")},null,this):Fe.bStart&&!Fe.bPlayerMove&&(Fe.bStart=!1,Fe.bClickReset=!0,Ne.isTT&&Ne.sdk.stopRecording(),(Ne.isTT||Ne.isOP||Ne.isQQ)&&console.log("show TryUseView------"),this._gameScene.mainLayer&&(this._gameScene.mainLayer.destroy(),this._gameScene.mainLayer=null),this._gameScene.removeNode(),this._gameScene.nextGame(!1))}),this.taskBg.anchorX=.5,this.taskBg.anchorY=.5,this.updateLvPoint(),this.showRetButton(),this.blookedVideo=!1,this.RefreshList(),this.list2.hScrollBarSkin="",this.list2.renderHandler=new Laya.Handler(this,this.onListRender),this.list2.selectHandler=new Laya.Handler(this,this.onSelect),this.list2.mouseHandler=Laya.Handler.create(this,this.onSelect,null,!1),this.showList(!1),this.btnOk.on(Laya.Event.CLICK,this,this.onListOk),this.showCompleteBtn(!1),this.btnComplete.on(Laya.Event.CLICK,this,this.onComplete)}onListOk(){this.showList(!1);Fe._curData.Task.length;let e=0;Fe.nGameState==Xe.State_Swear?(this._gameScene.changeSwearTexture(),e=Fe._curData.Task[0],Fe.nSweared=Fe.nLookSelect,e==Fe.nLookSelect+1?Fe.taskScore+=this.getTaskScore():this.blookedVideo&&(Fe.taskScore+=this.getTaskScore())):Fe.nGameState>=Xe.State_Draw&&((e=Fe._curData.Task[Fe.nCurFinger])==Fe.nLookSelect+1?Fe.taskScore+=this.getTaskScore():this.blookedVideo&&(Fe.taskScore+=this.getTaskScore()),Fe.nGameState==Xe.State_Draw2?(Fe.nSelectPaper=Fe.nLookSelect+1,this._gameScene.changePaperT()):Fe.nGameState==Xe.State_Draw?(Fe.nSelectDraw=Fe.nLookSelect+1,Laya.timer.once(200,this,function(){this._gameScene.changeDrawT()})):Fe.nGameState==Xe.state_Beautify&&(Fe.nSelectBeauty=Fe.nLookSelect+1,this._gameScene.changeBeauty())),this.blookedVideo=!1}showList(e){this.selectNode.visible=e}onEnable(){this.onEnableADControl(),this.PlatformUIInit()}onPopMouseDown(){this.btnPopGame.scaleX=.9,this.btnPopGame.scaleY=.9}onPopMouseUp(){this.btnPopGame.scaleX=1,this.btnPopGame.scaleY=1}onPopGameClick(e){this.btnPopGame.visible=!1;let t=this.getChildByName("exportList2");if(t.visible=!0,t.getComponent(vt)||t.addComponent(vt),t.getComponent(vt).tweenshow(this.btnPopGame.y),!t.getChildByName("adList").getComponent(it)){t.getChildByName("adList").addComponent(it).requestAdData("endPage",!0,at.SCROLL_VERTICAL,null,null,!1,!0)}e.stopPropagation()}showExportGame(){this.btnPopGame.visible=!0}onEnableADControl(){}PlatformUIInit(){if(Ne.isWX){Laya.stage.on(at.EVENT_NAVIGATE_FAILED,this,this.onShowFullListAd);let e=this.getChildByName("exportList1"),t=this.getChildByName("exitBtn");if(e.visible=!0,t.visible=!0,!e.getChildAt(0).getComponent(it)){e.getChildAt(0).addComponent(it).requestAdData("endPage",!0,at.SCROLL_HORIZONTAL,null,null,!1,!0)}t.getComponent(gt)||t.addComponent(gt),be.Ins.on(Oe.EVENT_SHOW_EXPORTGAME,this,this.showExportGame),be.Ins.on(be.EVENT_TEMP_JIESUAN,this,this.AfterJiesuan),this.btnPopGame.visible=!1;this.getChildByName("exportList1");this.taskBg.x=620,this.taskBg.y=500,this.slipBg.y=545,this.btnReset.y=373,this.barBg.y=284,this.barBg.y=284,this.btnReset.skin="common/game-01-wx.png",this.InitFloatGame()}else this.taskBg.x=630,this.taskBg.y=385}InitFloatGame(){let e=this.getChildByName("fgame1");e&&(e.getComponent(pt)||e.addComponent(pt))}onShowFullListAd(){qe.Ins.sceneOpen(xe.screenAd,!1,null)}onClickMoreGame(e){if(e.type==Laya.Event.CLICK)if(Ne.isTT){let e=_e.sdk.getAdList("defaultData");Ne.sdk.showMoreGamesModal(e&&e.length>0?e[0]:[],null,null,null,e=>{1==e&&We.Ins.showMsgTip("打开更多游戏失败",this)})}else Ne.isQQ?Ne.sdk.showAppBoxAd():Ne.isWX?Laya.Scene.open(xe.floatAd,!1,{isCloseBanner:!1}):Laya.Scene.open("commonUI/MoreGameDialog.scene",!1,{isCloseBanner:!1});e.stopPropagation()}onTouchDown(e){0!=Fe.bStart&&(this.curTouchId=e.touchId,Fe.bMouseMoving=!0,this.originPiont.setValue(e.stageX,e.stageY),this._gameScene.onTouchDown())}onMoveEvent(e){if(e.touchId!=this.curTouchId||0==Fe.bStart||!Fe.bMouseMoving)return;this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),!1);this.deltaX=e.stageX-this.originPiont.x,this.deltaY=e.stageY-this.originPiont.y;Math.atan2(this.deltaX,this.deltaY),Math.PI;Fe.nGameState==Xe.State_Draw?this._gameScene.drawColor&&this.checkPos(this.deltaX,this.deltaY,.08,-.03)&&this._gameScene.drawColor.onMouseMove2(this.deltaX,this.deltaY):Fe.nGameState==Xe.State_Draw2?this._gameScene.drawPaper&&this._gameScene.drawPaper.onMouseMove2(this.deltaX,this.deltaY):this.toolMove(this.deltaX,this.deltaY),this.originPiont.setValue(e.stageX,e.stageY)}onMouseUp(e){e.touchId==this.curTouchId&&(this.curTouchId=-1,Fe.bMouseMoving=!1,this._gameScene.onMouseUp())}toolMove(e,t){if(Fe.curTool){var a=Fe.curTool.transform;a&&Fe.curTool.active&&a.localPositionX&&this.checkPos(e,t,0,-.07)&&(e/=4e3,t/=4e3,a.localPositionX+=e,a.localPositionZ+=t)}}checkPos(e,t,a,i){var s=Fe.curTool.transform;if(s)return!(s.localPositionX>a&&e>0)&&(!(s.localPositionX<i&&e<0)&&(!(s.localPositionZ>.38&&t>0)&&!(s.localPositionZ<.23&&t<0)))}handUIMove(){(Fe.nGameState==Xe.State_Mill&&Fe.nSteps<4||5==Fe.nGameState&&Fe.nSteps<4)&&(this.imgHand.x=349,this.imgHand.visible=!0,Laya.Tween.to(this.imgHand,{scaleX:1.2,scaleY:1.2},300,null,Laya.Handler.create(this,function(){this.imgRing.visible=!1,Laya.Tween.to(this.imgHand,{scaleX:1,scaleY:1},300,null,Laya.Handler.create(this,function(){Fe.nGameState==Xe.State_Mill&&Fe.nSteps<4||5==Fe.nGameState&&Fe.nSteps<4?(this.imgRing.visible=!0,Laya.Tween.to(this.imgHand,{alpha:1},500,null,Laya.Handler.create(this,this.handUIMove))):this.imgRing.visible=!1}))})))}hideHandUI(){this.imgHand.visible=!1,this.imgRing.visible=!1}handSlip(e){e?(this.slipBg.visible=!0,this.ani2.play()):this.slipBg.visible=!1}handSlip1(e){e?(this.slipBg1.visible=!0,this.ani4.play()):this.slipBg1.visible=!1}showTextTips(){this.imgRing.visible=!1,this.textTips.visible=!0,this.textTips.alpha=1,this.textTips.bottom=260,Fe.bTextMove=!1}RefreshList(){if(1==Fe.nGameState||3==Fe.nGameState)return;this.list2.scrollTo(0);let e=[],t="",a=6;2==Fe.nGameState?a=14:4==Fe.nGameState?a=11:5==Fe.nGameState&&(a=10);let i=1;i=Fe.nGameState==Xe.State_Swear?Fe._curData.Task[0]:Fe._curData.Task[Fe.nCurFinger];for(let s=1;s<a;s++)s==i&&(t="res/image/item/"+Fe.nGameState+"_"+s+".png",e.push({icon:t,name:"item"+s,curIndex:s-1,type:1,state:1}));for(let s=1;s<a;s++)s!=i&&(t="res/image/item/"+Fe.nGameState+"_"+s+".png",e.push({icon:t,name:"item"+s,curIndex:s-1,type:1,state:Fe.tUnlockData[Fe.nGameState][s-1]}));this.list2.array=e;let s="res/image/item/title_"+Fe.nGameState+".png";this.imgTitle.skin=s}onListRender(e,t){if(t>this.list2.array.length)return;let a=this.list2.array[t];if(!a)return;let i=e.getChildByName("icon");i&&(i.skin=a.icon);let s=e.getChildByName("selectImg"),n=e.getChildByName("type"),o=e.getChildByName("imgVideo"),r=e.getChildByName("porssTxt");r&&(r.text=a.name),s&&(s.visible=!1),2==a.type?n&&(n.visible=!0):n&&(n.visible=!1),o&&(Fe.bTryUse?o&&(o.visible=!1):0==a.state?o&&(o.visible=!0):o&&(o.visible=!1))}onSelect(e,t){if(e.type==Laya.Event.CLICK){let a=e.target.getChildByName("selectImg"),i=e.target.getChildByName("imgVideo");if(i&&i.visible){let e=Math.floor(40*Math.random());Ae.getInstacne().ShowRewardVideo((i,s)=>{if(s){be.Ins.event("cut",e),this.updateCell(),this.blookedVideo=!0;let i=this.list2.array[t];Fe.nLookSelect=i.curIndex,console.log(" onSelect   nLookSelect ===",Fe.nLookSelect),a&&(a.visible=!0),Laya.timer.once(100,this,this.onListOk)}else We.Ins.showMsgTip("观看完整视频才能解锁")},null,this)}else if(i){this.updateCell(),this.blookedVideo=!1;let e=this.list2.array[t];Fe.nLookSelect=e.curIndex,a&&(a.visible=!0),Laya.timer.once(100,this,this.onListOk)}}}updateCell(){for(var e=0;e<this.list2.array.length;e++){let t=this.list2.getCell(e);if(t){let e=t.getChildByName("selectImg");e&&(e.visible=!1)}}}updateTask(e){if(!e||1==Fe.nCurScene&&Fe.nGameState>2&&!Fe.bTryUse)return this.ani3.stop(),void Laya.Tween.to(this.taskBg,{scaleX:0,scaleY:0},300);this.taskBg.visible=e,this.ani3.play();let t=0;Fe.nGameState==Xe.State_Swear?(t=Fe._curData.Task[0],this.taskImg.skin="res/image/item/2_"+t+".png"):Fe.nGameState>=Xe.State_Draw&&(t=Fe._curData.Task[Fe.nCurFinger],this.taskImg.skin="res/image/item/"+Fe.nGameState+"_"+t+".png")}getTaskScore(){let e=Fe._curData.Task.length;return 1==e?Fe.nGameState==Xe.State_Swear?100:0:Fe.nGameState==Xe.State_Swear?40:60/(e-1)}updateLvPoint(e=!0){if(e){this.barBg.visible=!0,this.progressBar.width=0;let e="res/image/state1.png",s="res/image/state2.png",n="res/image/state3.png";for(var t=1;t<5;t++){var a="img"+t,i=this.pointbg.getChildByName(a);t<=Fe.nStateLen?(t<Fe.nStateSteps?i.skin=s:t==Fe.nStateSteps?i.skin=n:i.skin=e,i.visible=!0,this.pointbg.x=156):(i.visible=!1,this.pointbg.x=186)}}else this.barBg.visible=!1}updateProgress(e){this.progressBar.width+=e}setProgress(e){this.progressBar.width=e}showRetButton(e=!0){this.btnReset.visible=e}setZSADVisible(e=!1){this.getChildByName("fgame1").visible=e,this.getChildByName("exportList1").visible=e,this.getChildByName("exportList2").visible=e,this.getChildByName("exitBtn").visible=e}showCompleteBtn(e){this.btnComplete.visible=e}onComplete(){Fe.bAdtoEnd=!0,this.showCompleteBtn(!1),this.WXShowGame()}AfterJiesuan(){this._gameScene.loadGameState()}WXShowGame(){}ShowBannerAfterFull(){console.log("收到显示banner消息",it.FULL_CLOSED1,it.FULL_CLOSED2),this.bwillopenresult&&console.log("要打开结算页不能显示banner")}onDisable(){Laya.stage.on("SHOW_BANNER_AFTER_FULL",this,this.ShowBannerAfterFull)}}class ft extends e.gameUI.ResultViewUI{constructor(){super(),this._gameScene=je.getInstance(),this.isChecked=!0,this.sharecoins=500,this.bClosed=!1,this.bPassed=!1,this.muticoins=3,this.failcoins=30,this.gameresult=!0,this.height=Laya.stage.height,this.bg.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#23a8ea")}onAwake(){}onEnable(){this.CheckImg.on(Laya.Event.CLICK,this,this.OnCheckImg),this.passBtn.on(Laya.Event.CLICK,this,this.OnPassClick),this.closeBtn.on(Laya.Event.CLICK,this,this.OnResetGame,[1]),this.shareBtn.on(Laya.Event.CLICK,this,this.sharevideoClick),this.moreGameBtn.on(Laya.Event.CLICK,this,this.moreGameClick),this.Btn_tt_next1.on(Laya.Event.CLICK,this,this.OnPassClick),this.Btn_tt_next2.on(Laya.Event.CLICK,this,this.OnPassClick_hole),this.Btn_closehole.on(Laya.Event.CLICK,this,this.OnClosehole),this.onEnableADControl(),Ee.inst.playSound(Ge.success,1)}nextGame(){let e=this;qe.Ins.sceneClose(this.url),Laya.timer.once(50,this,function(){Fe.bAdtoEnd?(e._gameScene.loadGameState(),Ne.sdk.showBannerzs(h.SCREEN_START)):e._gameScene.nextGame(Fe.bGameWin)})}onOpened(e){e&&(this.GetCoins=e.gameresult?0==Fe.taskScore?30:Fe.taskScore:this.failcoins,this.UpdateUI(e.gameresult),Ue.inst.setLevel())}isSameDate(e,t){let a=new Date(e),i=new Date(t);return a.getFullYear()==i.getFullYear()&&a.getMonth()==i.getMonth()&&a.getDate()==i.getDate()}onDisable(){Ae.getInstacne().ShowBanner()}onDestroy(){}sharevideoClick(e){Ne.sdk.shareRecordVideo(e=>{e?(this.addGold(this.sharecoins),et.Ins.goldEffect(new Laya.Vector2(this.shareBtn.x,this.shareBtn.y),10,this),this.shareBtn.visible=!1):We.Ins.showMsgTip("请分享录屏后才能获得奖励")})}moreGameClick(e){Ne.isQQ&&Ne.sdk.showAppBoxAd()}addGold(e,t=1){let a=Math.floor(e*t);Ue.inst.setGold(a),this.getChildByName("GoldSp").getComponent(Me).updateUI()}Next(){let e=this;Ne.isOP&&Ne.sdk.getNativeData()?(Laya.stage.once("NATIVE_AD_CLOSE",e,function(){e.nextGame(),qe.Ins.sceneClose(xe.ResultView)}),Laya.Scene.open(xe.NativeAd,!1,{iswin:this.gameresult})):(this.nextGame(),Ne.isVV)}OnClosehole(e){this.rewardTip.visible=!1,e.stopPropagation()}OnPassClick_hole(){this.rewardTip.visible?(this.isChecked=!0,this.gameresult=!0,this.OnPassClick()):this.OnResetGame()}OnResetGame(e=1){this.bClosed||(this.bClosed=!0,this.GetCoins=this.GetCoins*e,this.GetCoins>0?(this.addGold(this.GetCoins),et.Ins.goldEffect(new Laya.Vector2(this.coinLayer.x+230,this.coinLayer.y+20),10,this,()=>{this.Next()})):this.Next())}OnPassClick(){let e=this;Ne.isTT,"common/end-34.png"==e.passBtn.skin||"common/tt-13.png"==e.passBtn.skin?Ae.getInstacne().ShowRewardVideo((t,a)=>{a?(Ue.inst.setLevel(),e.OnResetGame()):We.Ins.showMsgTip("观看完整视频才能跳过此关")},null,this):Ae.getInstacne().ShowRewardVideo((t,a)=>{a?e.OnResetGame(3):We.Ins.showMsgTip("观看完整视频才能获得金币")},null,this)}OnCheckImg(){this.isChecked=!this.isChecked,this.CheckImg.skin=this.isChecked?3==this.muticoins?"common/tips-42.png":"common/tips-46.png":3==this.muticoins?"common/tips-43.png":"common/tips-45.png",this.passBtn.skin=this.isChecked?"common/end-31.png":"common/end-04.png",this.goldAddAnimate()}goldAddAnimate(e=10){Laya.Tween.clearTween(this.scoreTxt);let t=this.isChecked?this.GetCoins*this.muticoins:this.GetCoins,a=Math.floor((t-parseInt(this.scoreTxt.text))/10);Laya.Tween.to(this.scoreTxt,{},5,null,Laya.Handler.create(this,()=>{this.scoreTxt.text=`${parseInt(this.scoreTxt.text)+a}`,(e-=1)<=0?this.scoreTxt.text=`${t}`:this.goldAddAnimate(e)}))}UpdateUI(e){this.gameresult=e,this.titleImg.skin=this.gameresult?"common/end-01.png":"common/end-02.png",this.scoreTxt.text=this.GetCoins+"",Ne.isTT?(this.isChecked=this.gameresult,this.scoreTxt.text=this.gameresult?this.GetCoins*this.muticoins+"":this.GetCoins+"",this.CheckImg.skin=this.isChecked?3==this.muticoins?"common/tips-42.png":"common/tips-46.png":3==this.muticoins?"common/tips-43.png":"common/tips-45.png",this.passBtn.skin=this.gameresult?"common/end-35.png":"common/end-34.png",this.Btn_tt_next1.skin=this.gameresult?"common/tt-13.png":"common/tt-15.png",this.Btn_tt_next2.skin=this.gameresult?"common/tt-14.png":"common/tt-16.png",this.shareBtn.skin=500==this.sharecoins?"common/end-07.png":"common/end-06.png"):Ne.isOP?(this.passBtn.skin=this.gameresult?"common/end-35.png":"common/end-34.png",this.closeBtn.skin=this.gameresult?"common/end-23.png":"common/tips-31.png"):Ne.isWX?(this.passBtn.skin=this.gameresult?3==this.muticoins?"common/end-35.png":"common/end-33.png":"common/end-34.png",this.closeBtn.skin=this.gameresult?"common/end-24.png":"common/tips-31.png"):Ne.isQQ?(this.passBtn.skin=this.gameresult?3==this.muticoins?"common/end-35.png":"common/end-33.png":"common/end-34.png",this.closeBtn.skin="common/end-23.png"):(this.passBtn.skin=this.gameresult?"common/end-35.png":"common/end-34.png",this.closeBtn.skin=this.gameresult?"common/end-24.png":"common/tips-31.png")}ShowNative(){}CloseNative(){}ViewNative(){}ViewOrClosenative(){}onEnableADControl(){Ae.getInstacne().ShowInter()}TTUIInit(){this.coinLayer.y=246,this.coinLayer.x=182,this.CheckImg.y=641,this.Btn_tt_next1.x=64,this.Btn_tt_next1.y=668,this.Btn_tt_next2.x=364,this.Btn_tt_next2.y=668,this.passBtn.y=688,this.shareBtn.y=878,this.closeBtn.y=819,this.Btn_tt_next1.y=670,this.Btn_tt_next2.y=670,console.log("resultview--tt no zs_result_get"),this.CheckImg.visible=!0,this.closeBtn.visible=!0,this.passBtn.visible=!0,this.Btn_tt_next1.visible=!1,this.Btn_tt_next2.visible=!1}}class Nt extends e.gameUI.ShopViewUI{constructor(){super(),this._gameScene=je.getInstance(),this.tabNum=3,this.nCurTab=1,this.tabAarry=[],this.nPayIndex=0,this.height=Laya.stage.height,this.bg.height=this.height,this.bg.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#23a8ea")}onAwake(){}onMouseDown(){}onEnable(){Ae.getInstacne().ShowInter(!1),this.closeBtn.on(Laya.Event.MOUSE_DOWN,this,function(){Fe.bBtnClicked=!1,this.close()}),this.videoBtn.on(Laya.Event.MOUSE_DOWN,this,this.onVideo),this.nCurTab=Fe.nShopTab;for(var e=1;e<=this.tabNum;e++)this.tabAarry[e]=this.getChildByName("tabBtn"+e.toString()),this.tabAarry[e].name=e,this.tabAarry[e].on(Laya.Event.CLICK,this,function(e){this.nCurTab=e.target.name,this.updateTab()});this.updateTab(),this.selectBtn2.visible=!1,this.selectBtn.on(Laya.Event.CLICK,this,this.onBuy),this.list2.renderHandler=new Laya.Handler(this,this.onListRender),this.list2.selectHandler=new Laya.Handler(this,this.onSelect),this.list2.mouseHandler=Laya.Handler.create(this,this.onSelect,null,!1),this.list2.vScrollBarSkin="",this.updateBtnDesc(),this.PlatformUIInit(),this.adjustLargerUI()}adjustLargerUI(){Le.largeScreen()&&(console.log(" 高大屏  ===== "),this.y+=120,this.bg.y-=120,this.goldBg.y-=120)}RefreshList(){let e=[],t="",a=this.nPayIndex.toString();for(let i=1;i<7;i++)t="res/image/shop/"+this.nPayIndex+"_"+i+".png",e.push({icon:t,name:"item"+i,curIndex:Fe.shopSelect[a],state:Fe.shopTools[a][i-1],type:Xe.ToolType[a][i-1]});this.list2.array=e}onVideo(){Ae.getInstacne().ShowRewardVideo((e,t)=>{t?(this.addGold(200),et.Ins.goldEffect(new Laya.Vector2(this.videoBtn.x+this.videoBtn.width/2,this.videoBtn.y+this.videoBtn.y/2),10,this)):We.Ins.showMsgTip("观看完整视频才能获得金币")},null,this)}addGold(e,t=1){let a=Math.floor(e*t);Ue.inst.setGold(a),be.Ins.event("changeGold")}updateData(){for(let e=1;e<7;e++){1==Fe.shopTools[this.nPayIndex.toString()][e-1]&&(Fe.shopTools[this.nPayIndex.toString()][e-1]=2)}Fe.shopTools[this.nPayIndex.toString()][Fe.nCurUsing]=1,Laya.LocalStorage.setJSON("ShopTools",Fe.shopTools),Fe.shopSelect[this.nPayIndex.toString()]=Fe.nCurUsing,Laya.LocalStorage.setJSON("ShopSelect",Fe.shopSelect),Laya.LocalStorage.setItem("nCurSelect",Fe.nCurUsing.toString()),1==this.nPayIndex&&this._gameScene.loadGameState(),be.Ins.event("ShowToolUI")}onBuy(){let e=Fe.shopTools[this.nPayIndex.toString()][Fe.nCurUsing],t=1e3*Xe.ToolType[this.nPayIndex.toString()][Fe.nCurUsing];0==e?Ue.inst.gold>=t?(Fe.showTips("购买道具成功"),Ue.inst.setGold(-t),be.Ins.event("changeGold"),this.updateData(),this.RefreshList()):Fe.showTips("金币不足"):1==e?Fe.showTips("使用中!"):(Fe.showTips("使用成功!"),this.updateData(),this.RefreshList()),this.updateBtnDesc()}updateTab(){for(var e=1;e<=this.tabNum;e++){var t="res/image/shop/tab"+e.toString()+".png";e==this.nCurTab&&(t="res/image/shop/tab"+(this.nCurTab+10).toString()+".png"),this.tabAarry[e].skin=t}this.nPayIndex=this.nCurTab,Fe.nCurUsing=Fe.shopSelect[this.nPayIndex.toString()],this.updateBtnDesc(),this.RefreshList()}updateBtnDesc(){let e=1e3*Xe.ToolType[this.nPayIndex.toString()][Fe.nCurUsing],t=Fe.shopTools[this.nPayIndex.toString()][Fe.nCurUsing];this.selectBtn.label=0==t?"  "+e.toString()+" 解锁":1==t?"使用中":"使用道具"}onOpened(){}onDisable(){Ae.getInstacne().ShowBanner()}onCloseFullAd(e){this.Next(e)}Next(e){this.close(),qe.Ins.sceneOpen(xe.ResultView,!1,{gameresult:e})}onResetGame(){Ne.isTT&&Ne.sdk.stopRecording(),this.close(),Laya.Scene.open(xe.GameStartView)}onListRender(e,t){if(t>this.list2.array.length)return;let a=this.list2.array[t];if(!a)return;let i=e.getChildByName("icon");i&&(i.skin=a.icon);let s=e.getChildByName("selectImg"),n=e.getChildByName("type"),o=e.getChildByName("porssTxt");o&&(o.text=a.name),t==a.curIndex?s&&(s.visible=!0):s&&(s.visible=!1),2==a.type?n&&(n.visible=!0):n&&(n.visible=!1),0==a.state?(o&&(o.text="未解锁"),o.strokeColor="#666666"):1==a.state?(o&&(o.text="使用中"),o.strokeColor="#00a008"):(o&&(o.text="已解锁"),o.strokeColor="#be589e")}onSelect(e,t){if(e.type==Laya.Event.MOUSE_DOWN){this.updateCell(),Fe.nCurUsing=t;let a=e.target.getChildByName("selectImg");a&&(a.visible=!0),this.updateBtnDesc()}}updateCell(){for(var e=0;e<this.list2.array.length;e++){let t=this.list2.getCell(e);if(t){let e=t.getChildByName("selectImg");e&&(e.visible=!1)}}}PlatformUIInit(){Ne.isWX&&(this.getChildByName("GoldSp").y=10)}}class Lt extends e.gameUI.ShowOffViewUI{constructor(){super(),this._gameScene=je.getInstance(),this.tabNum=4,this.nCurTab=1,this.tabAarry=[],this.nPayIndex=0,this._score=0,this.height=Laya.stage.height,this.bg.height=this.height}onAwake(){}onMouseDown(){}onEnable(){this.closeBtn.on(Laya.Event.MOUSE_DOWN,this,function(){Fe.bBtnClicked=!1,Fe.bAdtoEnd=!1,this.initUI(!1),this.close(),this._gameScene.GameFinish(0)}),Fe.bTryUse&&(Fe.taskScore=100),this.progressBar.width=0;let e=Math.floor(100*Math.random())+1;if(this.text.visible=!1,this.text.text=e.toString(),this.adjustLargerUI(),Laya.timer.loop(2,this,this.updateScore),Fe.taskScore>0&&!Fe.bTryUse&&Fe.nShowScene<=37){var t=Fe._curData.UnlockLV;Fe.nCurScene==t&&qe.Ins.sceneOpen(xe.UnlockView,!1)}if(Ne.isWX&&_e.sdk.adConfig.electControl("zs_banner_vertical_enable")){this.closeBtn.bottom=50,this.spProgress.x=100,this.spProgress.y=227;let e=this.getChildByName("exportList1");if(e.visible=!0,!e.getChildAt(0).getComponent(it)){e.getChildAt(0).addComponent(it).requestAdData("endPage",!0,at.SCROLL_HORIZONTAL,null,null,!1,!0)}}}updateScore(){this._score<Fe.taskScore?(this._score+=2,this.progressBar.width+=6.38,this.textBar.text=this._score.toString()+"%"):this.initUI(!0)}initUI(e){Laya.timer.clear(this,this.updateScore),this.progressBar.width=Fe.taskScore/100*319,this.textBar.text=Fe.taskScore.toString()+"%",Fe.taskScore>0&&this._gameScene.showEndEffect(e)}showGameUI(){let e=(Laya.stage.height-1280)/2;this._gameScene._endCamera.renderTarget=new Laya.RenderTexture(Laya.stage.width,Laya.stage.height),this._gameScene._endCamera.renderingOrder=-1,this._gameScene._endCamera.clearFlag=Laya.BaseCamera.CLEARFLAG_SKY;let t=this._gameScene._endCamera.renderTarget;var a=new Laya.Texture(t,Laya.Texture.DEF_UV);a.width=500,a.height=600+e}adjustLargerUI(){Ne.isWX&&Ne.sdk.isUseZS}}const Dt=5e3,Bt=1e3;class bt extends Laya.Script{constructor(){super(),this.itemType=0,this.looptype=0,this.elect_list=null,this._curIdx=0,this._iTime=0,this._idataTime=0,this.bwork=!1}onAwake(){this.owner.visible=!1,this.itemShake()}onEnable(){this.owner.on(Laya.Event.CLICK,this,e=>{if(Ne.isTT){let e=_e.sdk.getAdList("defaultData");Ne.sdk.showMoreGamesModal(e&&e.length>0?e[0]:[],null,null,null,e=>{1==e&&We.Ins.showMsgTip("打开更多游戏失败")})}else _e.sdk.navigateToMiniProgram(this.getData(),v.rotation)}),this.owner.on(Laya.Event.MOUSE_DOWN,this,e=>{e.stopPropagation()}),this.owner.on(Laya.Event.MOUSE_UP,this,e=>{e.stopPropagation()})}onUpdate(){if(!this.bwork)if(Ne.isWX);else if(Ne.isOP);else{if(!Ne.isTT)return;this.bwork=!0}let e=Laya.timer.delta;if(this.elect_list&&0!=this.elect_list.length)this._iTime+=e,this._iTime>=Dt&&(this._iTime=0,this._curIdx=Math.floor(Math.random()*this.elect_list.length),this.updateItemUI());else if(this._idataTime+=e,this._idataTime>=Bt){this._idataTime=0;let e=[];if(e=Ne.isWX&&Ne.sdk.isUseZS?_e.sdk.getAdList("endPage"):_e.sdk.getAdList("defaultData"),0==this.itemType)this.elect_list=e;else if(1==this.itemType&&e&&e.length>0){let t=e.length<3?e.length:3;this.elect_list=[];for(let a=0;a<t;a++)this.elect_list.push(e[a])}else this.elect_list=[];this.elect_list.length>0&&(1==this.looptype&&(this._curIdx=Math.floor(this.elect_list.length/2)),0==this.looptype&&(this._curIdx=Math.floor(Math.random()*this.elect_list.length)),this.owner.visible=!0,this.updateItemUI())}}itemShake(){Laya.Tween.to(this.owner,{rotation:10},300,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.owner,{rotation:0},300,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.owner,{rotation:-10},300,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.owner,{rotation:0},300,null,Laya.Handler.create(this,()=>{this.itemShake()}))}))}))}))}getData(){return this.elect_list&&0!=this.elect_list.length?this.elect_list[this._curIdx%this.elect_list.length]:null}updateItemUI(){let e=this.getData();e&&(this.owner.getChildByName("icon").texture=e.link_img||e.app_icon,this.owner.getChildByName("nameTxt").text=e.link_name||e.app_title,this.owner.getChildByName("downBg").graphics.drawRect(0,0,168,54,this.getClor(this._curIdx)),this.owner.getChildByName("hot").visible=!1)}getClor(e){return["0xb852b6","0x4294a2","0x2f67c4","0xe09031","0x35bd75","0xc5645e"][e%6]}}class kt extends Laya.Script{constructor(){super(),this.isH=!1,this.downH=54,this.downW=200,this.timestmp=0,this.time=0,this.adData=[],this.fingerindex=-1,this.isStopMove=!1}onAwake(){}onEnable(){let e=this;if(this.owner.getChildByName("list").mouseHandler=new Laya.Handler(this,this.click),this.owner.getChildByName("list").renderHandler=new Laya.Handler(this,this.rederer),Ne.isTT||Ne.isOP){let e=_e.sdk.getAdList("defaultData",30);Ne.isTT?this.setData(e,!0):this.setData(e,this.isH)}else if(Ne.isWX){if(this.owner.getChildByName("list").hScrollBarSkin="",this.owner.getChildByName("list").vScrollBarSkin="",Ne.sdk.isUseZS)window.zs.sdk.loadAd(function(t){e.adData=t.endPage,e.LoadShowGame(),Laya.timer.loop(3e3,e,e.LoadShowGame)});else this.adData=_e.sdk.getAdList("defaultData"),this.LoadShowGame(),Laya.timer.loop(3e3,this,this.LoadShowGame)}}LoadShowGame(){let e=[];for(e.push(this.adData[Math.floor(Math.random()*this.adData.length)]);e.length<6;){let t=this.adData[Math.floor(Math.random()*this.adData.length)],a=!1;for(let i=0;i<e.length;i++){if((t.appid||t.id)==(e[i].appid||e[i].id)){a=!0;break}}a||e.push(t)}let t,a,i=Math.floor(Math.random()*e.length);for(;i==this.fingerindex;)i=Math.floor(Math.random()*e.length);switch(this.fingerindex=i,this.fingerindex){case 0:t=120,a=160;break;case 1:t=360,a=160;break;case 2:t=600,a=160;break;case 3:t=120,a=450;break;case 4:t=360,a=450;break;case 5:t=600,a=450}let s=this.owner.getChildByName("fingertap");s&&(s.x=t,s.y=a,s.visible=!0),this.owner.getChildByName("list").array=e}setData(e,t=!0){this.data=e,this.isH=t,this.owner.getChildByName("list").array=this.data,t?this.owner.getChildByName("list").hScrollBarSkin="":this.owner.getChildByName("list").vScrollBarSkin="",Laya.timer.once(1e3,this,this.twMove)}OnShow(){if(!Ne.isWX){this.stopMove();let e=this.owner.getChildByName("list");e.tweenTo(0,500,Laya.Handler.create(this,()=>{this.tweenList(e,!1)}))}}rederer(e,t){let a=e.dataSource;if(a){e.getChildByName("icon").texture=a.link_img||a.app_icon,e.getChildByName("nameTxt").text=a.link_name||a.app_title;let i=e.getChildByName("downBg");i.graphics.drawRect(0,0,i.width,i.height,this.getClor(t)),e.getChildByName("hot").visible=t<2,t<2&&(e.getChildByName("hot").texture=0==t?"prefab/icon-hot.png":"prefab/icon-new.png")}}processGamePlayed(e){let t=!1,a=[];for(let i=0;i<this.adData.length;i++){(e.appid||e.id)==(this.adData[i].appid||this.adData[i].id)?1==this.adData[i].isplay?t=!0:this.adData[i].isplay=1:0==this.adData[i].isplay&&a.push(this.adData[i])}if(console.log("未运行过的游戏列表数量为:",a.length),t){if(a&&a.length>0){let e=a[Math.floor(Math.random()*a.length)];for(let t=0;t<this.adData.length;t++){(e.appid||e.id)==(this.adData[t].appid||this.adData[t].id)&&(this.adData[t].isplay=1)}return e}return e}return e}click(e,t){let a=e.target.dataSource,i=v.full;this.isH&&(i=v.bottom);if(e.type==Laya.Event.CLICK&&(Ne.isWX||(this.isH&&Ne.isTT?Ne.sdk.showMoreGamesModal(a,null,null,null,e=>{1==e&&We.Ins.showMsgTip("打开更多游戏失败",this)}):_e.sdk.navigateToMiniProgram(a,i))),e.type==Laya.Event.MOUSE_DOWN&&Ne.isWX){let e=this.processGamePlayed(a);_e.sdk.navigateToMiniProgram(e,i,()=>{},()=>{})}}getClor(e){return["0xb852b6","0x4294a2","0x2f67c4","0xe09031","0x35bd75","0xc5645e"][e%6]}twMove(){let e=(new Date).getTime();if(e-this.timestmp>=2e4||this.timestmp>0){this.timestmp=e;let t=this.owner.getChildByName("list"),a=5e4;Ne.isTT&&(a=7e4),this.tweenList(t,!1,0)}}stopMove(){this.isStopMove=!0;let e=this.owner.getChildByName("list");Laya.Tween.clearTween(e)}createGameInfo(e,t,a){return{app_icon:a,appid:e,app_title:t,app_desc:t}}onDisable(){}tweenList(e,t,a=0){let i=e,s=i.array.length,n=i.repeatX,o=i.repeatY,r=n*o;if(s<=r)return;let h=r;if(t&&s%o!=0){h=r-(o-s%o)}else if(!t&&s%n!=0){h=r-(n-s%n)}let l=s-h;i.tweenTo(l-a,1500*(l-a),Laya.Handler.create(this,()=>{i.tweenTo(0,1500*l,Laya.Handler.create(this,()=>{this.tweenList(e,!1,0)}))}))}}class Tt{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("commonUI/MoreGameDialog.ts",De),e("commonUI/NativeAdDialog.ts",Be),e("commonUI/prefab/GoldSp.ts",Me),e("commonUI/SettingDialog.ts",Re),e("commonUI/TryUseDialog.ts",Ze),e("commonUI/UIAdwardBox.ts",st),e("commonUI/UISelectBox.ts",nt),e("commonUI/UISign.ts",ht),e("commonUI/UnlockNewDialog.ts",lt),e("commonUI/zs/HomeFloatAdView.ts",ct),e("commonUI/script/FingerTap.ts",dt),e("commonUI/zs/FullScreeAdView.ts",ut),e("commonUI/zs/MoneyGet.ts",St),e("commonUI/script/Breathe.ts",mt),e("gameUI/GameMain.ts",It),e("gameUI/GameStartView.ts",yt),e("gameUI/LoadSceneView.ts",At),e("gameUI/MainLayer.ts",_t),e("gameUI/ResultView.ts",ft),e("gameUI/ShopView.ts",Nt),e("gameUI/ShowOffView.ts",Lt),e("commonUI/prefab/ElectItem.ts",bt),e("commonUI/prefab/MoreGame1.ts",kt)}}Tt.width=720,Tt.height=1280,Tt.scaleMode="fixedwidth",Tt.screenMode="none",Tt.alignV="top",Tt.alignH="left",Tt.startScene="gameUI/LoadSceneView.scene",Tt.sceneRoot="",Tt.debug=!1,Tt.stat=!1,Tt.physicsDebug=!1,Tt.exportSceneToJson=!0,Tt.init();new class{constructor(){window.Laya3D?Laya3D.init(Tt.width,Tt.height):Laya.init(Tt.width,Tt.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=Tt.scaleMode,Laya.stage.screenMode=Tt.screenMode,Laya.stage.alignV=Tt.alignV,Laya.stage.alignH=Tt.alignH,Laya.URL.exportSceneToJson=Tt.exportSceneToJson,(Tt.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),Tt.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),Tt.stat&&Laya.Stat.show(),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){je.instance.initScene()}}}();